import{_ as e,r as a,J as l,l as t,o as n,c as d,a as i,b as u,w as s,K as o,i as c,E as r,d as p,L as f,e as m,u as v,O as g,g as _,M as b,Q as y,t as h,U as V,X as w,D as k,y as C,z as U,j as D,k as x}from"./index-C3v4GxiK.js";const z={class:"traffic-container"},M={class:"page-header"},S={class:"header-actions"},T={class:"overview-section"},P={class:"card-content"},j={class:"card-icon primary"},q={class:"card-info"},I={class:"card-value"},O={class:"card-content"},R={class:"card-icon success"},A={class:"card-info"},L={class:"card-value"},B={class:"card-content"},F={class:"card-icon warning"},K={class:"card-info"},E={class:"card-value"},J={class:"card-content"},Q={class:"card-icon info"},X={class:"card-info"},$={class:"card-value"},G={class:"search-section"},H={class:"traffic-list"},N={class:"pagination-container"},W={class:"dialog-footer"},Y={key:0,class:"traffic-detail"},Z=e({__name:"traffic",setup(e){const Z=a(!1),ee=a(!1),ae=a(!1),le=a(!1),te=a(),ne=a(null),de=l({name:"",type:"",status:""}),ie=l({currentPage:1,pageSize:10,total:0}),ue=l({id:null,name:"",type:"",location:"",length:0,capacity:"",status:"normal",buildDate:"",lastMaintenance:"",description:""}),se={name:[{required:!0,message:"请输入设施名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择设施类型",trigger:"change"}],location:[{required:!0,message:"请输入设施位置",trigger:"blur"}],length:[{required:!0,message:"请输入设施长度",trigger:"blur"}],capacity:[{required:!0,message:"请输入通行能力",trigger:"blur"}]},oe=l({totalRoads:0,totalVehicles:0,totalAccidents:0,totalSignals:0}),ce=a([{id:1,name:"长安街",type:"road",location:"北京市中心",length:3.8,capacity:"双向八车道",status:"normal",buildDate:"1950-01-01",lastMaintenance:"2024-01-15",description:"北京市最重要的东西向主干道，连接天安门广场",createTime:"2020-01-01 10:00:00"},{id:2,name:"二环路",type:"road",location:"北京市二环",length:32.7,capacity:"双向六车道",status:"normal",buildDate:"1980-01-01",lastMaintenance:"2024-02-01",description:"北京市重要的环形主干道",createTime:"2020-01-01 10:00:00"},{id:3,name:"长安街信号灯系统",type:"signal",location:"长安街沿线",length:0,capacity:"智能控制",status:"normal",buildDate:"2010-01-01",lastMaintenance:"2024-01-20",description:"智能交通信号灯系统，实现绿波带控制",createTime:"2020-01-01 10:00:00"},{id:4,name:"西直门立交桥",type:"bridge",location:"西直门地区",length:1.2,capacity:"双向四车道",status:"maintenance",buildDate:"1995-01-01",lastMaintenance:"2024-03-01",description:"重要的交通枢纽立交桥",createTime:"2020-01-01 10:00:00"},{id:5,name:"王府井停车场",type:"parking",location:"王府井商业区",length:0,capacity:"500个车位",status:"normal",buildDate:"2005-01-01",lastMaintenance:"2024-01-10",description:"王府井商业区地下停车场",createTime:"2020-01-01 10:00:00"}]),re=t((()=>ue.id?"编辑交通设施":"添加交通设施")),pe=e=>({road:"道路",bridge:"桥梁",tunnel:"隧道",signal:"信号灯",parking:"停车场"}[e]||"未知"),fe=e=>({road:"primary",bridge:"success",tunnel:"warning",signal:"info",parking:"danger"}[e]||""),me=e=>({normal:"正常",maintenance:"维护中",fault:"故障",construction:"建设中"}[e]||"未知"),ve=e=>({normal:"success",maintenance:"warning",fault:"danger",construction:"info"}[e]||""),ge=()=>{ue.id=null,ae.value=!0},_e=async()=>{if(te.value)try{if(await te.value.validate(),ee.value=!0,await new Promise((e=>setTimeout(e,1e3))),ue.id){const e=ce.value.findIndex((e=>e.id===ue.id));e>-1&&(ce.value[e]={...ue}),r.success("编辑成功")}else{const e={...ue,id:Date.now(),createTime:(new Date).toLocaleString()};ce.value.unshift(e),r.success("添加成功")}Ce(),ae.value=!1,be()}catch(e){}finally{ee.value=!1}},be=()=>{te.value&&te.value.resetFields(),Object.assign(ue,{id:null,name:"",type:"",location:"",length:0,capacity:"",status:"normal",buildDate:"",lastMaintenance:"",description:""})},ye=()=>{ie.currentPage=1},he=()=>{Object.assign(de,{name:"",type:"",status:""}),ye()},Ve=e=>{ie.pageSize=e},we=e=>{ie.currentPage=e},ke=()=>{r.success("交通设施数据导出成功")},Ce=()=>{oe.totalRoads=ce.value.filter((e=>"road"===e.type)).length,oe.totalVehicles=15e5,oe.totalAccidents=25,oe.totalSignals=ce.value.filter((e=>"signal"===e.type)).length};return n((()=>{Ce(),ie.total=ce.value.length})),(e,a)=>{const l=p("el-icon"),t=p("el-button"),n=p("el-card"),Ue=p("el-col"),De=p("el-row"),xe=p("el-input"),ze=p("el-option"),Me=p("el-select"),Se=p("el-table-column"),Te=p("el-tag"),Pe=p("el-table"),je=p("el-pagination"),qe=p("el-form-item"),Ie=p("el-input-number"),Oe=p("el-date-picker"),Re=p("el-form"),Ae=p("el-dialog"),Le=p("el-descriptions-item"),Be=p("el-descriptions"),Fe=f("loading");return m(),d("div",z,[i("div",M,[a[19]||(a[19]=i("h2",null,"交通管理系统",-1)),i("div",S,[u(t,{type:"success",onClick:ke},{default:s((()=>[u(l,null,{default:s((()=>[u(v(g))])),_:1}),a[17]||(a[17]=_(" 导出数据 "))])),_:1,__:[17]}),u(t,{type:"primary",onClick:ge},{default:s((()=>[u(l,null,{default:s((()=>[u(v(b))])),_:1}),a[18]||(a[18]=_(" 添加设施 "))])),_:1,__:[18]})])]),i("div",T,[u(De,{gutter:20},{default:s((()=>[u(Ue,{span:6},{default:s((()=>[u(n,{class:"overview-card"},{default:s((()=>[i("div",P,[i("div",j,[u(l,null,{default:s((()=>[u(v(y))])),_:1})]),i("div",q,[a[20]||(a[20]=i("div",{class:"card-title"},"道路总数",-1)),i("div",I,h(oe.totalRoads),1)])])])),_:1})])),_:1}),u(Ue,{span:6},{default:s((()=>[u(n,{class:"overview-card"},{default:s((()=>{return[i("div",O,[i("div",R,[u(l,null,{default:s((()=>[u(v(V))])),_:1})]),i("div",A,[a[21]||(a[21]=i("div",{class:"card-title"},"车辆流量",-1)),i("div",L,h((e=oe.totalVehicles,e.toLocaleString())),1)])])];var e})),_:1})])),_:1}),u(Ue,{span:6},{default:s((()=>[u(n,{class:"overview-card"},{default:s((()=>[i("div",B,[i("div",F,[u(l,null,{default:s((()=>[u(v(w))])),_:1})]),i("div",K,[a[22]||(a[22]=i("div",{class:"card-title"},"事故数量",-1)),i("div",E,h(oe.totalAccidents),1)])])])),_:1})])),_:1}),u(Ue,{span:6},{default:s((()=>[u(n,{class:"overview-card"},{default:s((()=>[i("div",J,[i("div",Q,[u(l,null,{default:s((()=>[u(v(k))])),_:1})]),i("div",X,[a[23]||(a[23]=i("div",{class:"card-title"},"信号灯",-1)),i("div",$,h(oe.totalSignals),1)])])])),_:1})])),_:1})])),_:1})]),i("div",G,[u(De,{gutter:20},{default:s((()=>[u(Ue,{span:6},{default:s((()=>[u(xe,{modelValue:de.name,"onUpdate:modelValue":a[0]||(a[0]=e=>de.name=e),placeholder:"设施名称",clearable:"",onClear:ye,onKeyup:C(ye,["enter"])},{prefix:s((()=>[u(l,null,{default:s((()=>[u(v(U))])),_:1})])),_:1},8,["modelValue"])])),_:1}),u(Ue,{span:6},{default:s((()=>[u(Me,{modelValue:de.type,"onUpdate:modelValue":a[1]||(a[1]=e=>de.type=e),placeholder:"设施类型",clearable:"",onChange:ye},{default:s((()=>[u(ze,{label:"道路",value:"road"}),u(ze,{label:"桥梁",value:"bridge"}),u(ze,{label:"隧道",value:"tunnel"}),u(ze,{label:"信号灯",value:"signal"}),u(ze,{label:"停车场",value:"parking"})])),_:1},8,["modelValue"])])),_:1}),u(Ue,{span:6},{default:s((()=>[u(Me,{modelValue:de.status,"onUpdate:modelValue":a[2]||(a[2]=e=>de.status=e),placeholder:"设施状态",clearable:"",onChange:ye},{default:s((()=>[u(ze,{label:"正常",value:"normal"}),u(ze,{label:"维护中",value:"maintenance"}),u(ze,{label:"故障",value:"fault"}),u(ze,{label:"建设中",value:"construction"})])),_:1},8,["modelValue"])])),_:1}),u(Ue,{span:6},{default:s((()=>[u(t,{type:"primary",onClick:ye},{default:s((()=>[u(l,null,{default:s((()=>[u(v(U))])),_:1}),a[24]||(a[24]=_(" 搜索 "))])),_:1,__:[24]}),u(t,{onClick:he},{default:s((()=>a[25]||(a[25]=[_("重置")]))),_:1,__:[25]})])),_:1})])),_:1})]),i("div",H,[o((m(),c(Pe,{data:ce.value,stripe:""},{default:s((()=>[u(Se,{prop:"id",label:"ID",width:"80"}),u(Se,{prop:"name",label:"设施名称"}),u(Se,{prop:"type",label:"设施类型",width:"100"},{default:s((e=>[u(Te,{type:fe(e.row.type)},{default:s((()=>[_(h(pe(e.row.type)),1)])),_:2},1032,["type"])])),_:1}),u(Se,{prop:"location",label:"位置"}),u(Se,{prop:"length",label:"长度(km)",width:"100"}),u(Se,{prop:"capacity",label:"通行能力",width:"120"}),u(Se,{prop:"status",label:"状态",width:"100"},{default:s((e=>[u(Te,{type:ve(e.row.status)},{default:s((()=>[_(h(me(e.row.status)),1)])),_:2},1032,["type"])])),_:1}),u(Se,{prop:"lastMaintenance",label:"最后维护",width:"120"}),u(Se,{label:"操作",width:"200",fixed:"right"},{default:s((e=>[u(t,{size:"small",onClick:a=>{return l=e.row,ne.value=l,void(le.value=!0);var l}},{default:s((()=>a[26]||(a[26]=[_("查看")]))),_:2,__:[26]},1032,["onClick"]),u(t,{size:"small",type:"primary",onClick:a=>{return l=e.row,Object.assign(ue,l),void(ae.value=!0);var l}},{default:s((()=>a[27]||(a[27]=[_("编辑")]))),_:2,__:[27]},1032,["onClick"]),u(t,{size:"small",type:"danger",onClick:a=>(async e=>{try{await x.confirm(`确定要删除交通设施"${e.name}"吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const a=ce.value.findIndex((a=>a.id===e.id));a>-1&&(ce.value.splice(a,1),Ce(),r.success("删除成功"))}catch(a){}})(e.row)},{default:s((()=>a[28]||(a[28]=[_("删除")]))),_:2,__:[28]},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[Fe,Z.value]]),i("div",N,[u(je,{"current-page":ie.currentPage,"onUpdate:currentPage":a[3]||(a[3]=e=>ie.currentPage=e),"page-size":ie.pageSize,"onUpdate:pageSize":a[4]||(a[4]=e=>ie.pageSize=e),"page-sizes":[10,20,50,100],total:ie.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:Ve,onCurrentChange:we},null,8,["current-page","page-size","total"])])]),u(Ae,{modelValue:ae.value,"onUpdate:modelValue":a[15]||(a[15]=e=>ae.value=e),title:re.value,width:"700px",onClose:be},{footer:s((()=>[i("div",W,[u(t,{onClick:a[14]||(a[14]=e=>ae.value=!1)},{default:s((()=>a[29]||(a[29]=[_("取消")]))),_:1,__:[29]}),u(t,{type:"primary",onClick:_e,loading:ee.value},{default:s((()=>a[30]||(a[30]=[_("确定")]))),_:1,__:[30]},8,["loading"])])])),default:s((()=>[u(Re,{model:ue,rules:se,ref_key:"trafficFormRef",ref:te,"label-width":"120px"},{default:s((()=>[u(De,{gutter:20},{default:s((()=>[u(Ue,{span:12},{default:s((()=>[u(qe,{label:"设施名称",prop:"name"},{default:s((()=>[u(xe,{modelValue:ue.name,"onUpdate:modelValue":a[5]||(a[5]=e=>ue.name=e),placeholder:"请输入设施名称"},null,8,["modelValue"])])),_:1})])),_:1}),u(Ue,{span:12},{default:s((()=>[u(qe,{label:"设施类型",prop:"type"},{default:s((()=>[u(Me,{modelValue:ue.type,"onUpdate:modelValue":a[6]||(a[6]=e=>ue.type=e),placeholder:"请选择设施类型",style:{width:"100%"}},{default:s((()=>[u(ze,{label:"道路",value:"road"}),u(ze,{label:"桥梁",value:"bridge"}),u(ze,{label:"隧道",value:"tunnel"}),u(ze,{label:"信号灯",value:"signal"}),u(ze,{label:"停车场",value:"parking"})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),u(De,{gutter:20},{default:s((()=>[u(Ue,{span:12},{default:s((()=>[u(qe,{label:"位置",prop:"location"},{default:s((()=>[u(xe,{modelValue:ue.location,"onUpdate:modelValue":a[7]||(a[7]=e=>ue.location=e),placeholder:"请输入设施位置"},null,8,["modelValue"])])),_:1})])),_:1}),u(Ue,{span:12},{default:s((()=>[u(qe,{label:"长度(km)",prop:"length"},{default:s((()=>[u(Ie,{modelValue:ue.length,"onUpdate:modelValue":a[8]||(a[8]=e=>ue.length=e),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),u(De,{gutter:20},{default:s((()=>[u(Ue,{span:12},{default:s((()=>[u(qe,{label:"通行能力",prop:"capacity"},{default:s((()=>[u(xe,{modelValue:ue.capacity,"onUpdate:modelValue":a[9]||(a[9]=e=>ue.capacity=e),placeholder:"如：双向四车道"},null,8,["modelValue"])])),_:1})])),_:1}),u(Ue,{span:12},{default:s((()=>[u(qe,{label:"设施状态",prop:"status"},{default:s((()=>[u(Me,{modelValue:ue.status,"onUpdate:modelValue":a[10]||(a[10]=e=>ue.status=e),placeholder:"请选择设施状态",style:{width:"100%"}},{default:s((()=>[u(ze,{label:"正常",value:"normal"}),u(ze,{label:"维护中",value:"maintenance"}),u(ze,{label:"故障",value:"fault"}),u(ze,{label:"建设中",value:"construction"})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),u(De,{gutter:20},{default:s((()=>[u(Ue,{span:12},{default:s((()=>[u(qe,{label:"建设时间",prop:"buildDate"},{default:s((()=>[u(Oe,{modelValue:ue.buildDate,"onUpdate:modelValue":a[11]||(a[11]=e=>ue.buildDate=e),type:"date",placeholder:"选择建设时间",style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1}),u(Ue,{span:12},{default:s((()=>[u(qe,{label:"最后维护",prop:"lastMaintenance"},{default:s((()=>[u(Oe,{modelValue:ue.lastMaintenance,"onUpdate:modelValue":a[12]||(a[12]=e=>ue.lastMaintenance=e),type:"date",placeholder:"选择最后维护时间",style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),u(qe,{label:"设施描述",prop:"description"},{default:s((()=>[u(xe,{modelValue:ue.description,"onUpdate:modelValue":a[13]||(a[13]=e=>ue.description=e),type:"textarea",rows:3,placeholder:"请输入设施描述"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"]),u(Ae,{modelValue:le.value,"onUpdate:modelValue":a[16]||(a[16]=e=>le.value=e),title:"交通设施详情",width:"800px"},{default:s((()=>[ne.value?(m(),d("div",Y,[u(Be,{column:2,border:""},{default:s((()=>[u(Le,{label:"设施名称"},{default:s((()=>[_(h(ne.value.name),1)])),_:1}),u(Le,{label:"设施类型"},{default:s((()=>[u(Te,{type:fe(ne.value.type)},{default:s((()=>[_(h(pe(ne.value.type)),1)])),_:1},8,["type"])])),_:1}),u(Le,{label:"位置"},{default:s((()=>[_(h(ne.value.location),1)])),_:1}),u(Le,{label:"长度"},{default:s((()=>[_(h(ne.value.length)+" km",1)])),_:1}),u(Le,{label:"通行能力"},{default:s((()=>[_(h(ne.value.capacity),1)])),_:1}),u(Le,{label:"设施状态"},{default:s((()=>[u(Te,{type:ve(ne.value.status)},{default:s((()=>[_(h(me(ne.value.status)),1)])),_:1},8,["type"])])),_:1}),u(Le,{label:"建设时间"},{default:s((()=>[_(h(ne.value.buildDate),1)])),_:1}),u(Le,{label:"最后维护"},{default:s((()=>[_(h(ne.value.lastMaintenance),1)])),_:1}),u(Le,{label:"设施描述",span:2},{default:s((()=>[_(h(ne.value.description||"暂无描述"),1)])),_:1})])),_:1})])):D("",!0)])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-6fb2a1f1"]]);export{Z as default};
