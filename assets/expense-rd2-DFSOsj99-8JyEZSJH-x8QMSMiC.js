import{r as ze}from"./_plugin-vue_export-helper-DlAUqK2U-lGy7RumW-DNI5evPq.js";import{L as v,R as P,E as Te,r as y,b as r,$ as E,Y as t,J as a,M as i,a as p,l as m,O as n,P as _,D as Ve,t as $e,C as g,U as X}from"./index-q8LaeBoo.js";const Ue={class:"rd-expense-container"},Le={class:"header"},Se={class:"header-actions"},qe={class:"tab-content"},Be=["onClick"],Pe={class:"amount"},Me={class:"tab-content"},Fe=["onClick"],Ie={class:"amount"},Re={class:"tab-content"},Ae=["onClick"],De={class:"amount"},Ee={class:"tab-content"},Ge=["onClick"],Je={class:"amount"},Oe={class:"tab-content"},Ye=["onClick"],He={class:"amount"},Ke={class:"tab-content"},Qe=["onClick"],Xe={class:"amount"},Ze={class:"tab-content"},We=["onClick"],ea={class:"amount"},aa={class:"tab-content"},la=["onClick"],ta={class:"amount"},ia={key:0,class:"expense-detail"},pa={class:"card-header"},da={class:"detail-item"},ra={class:"detail-item"},na={class:"detail-item"},oa={class:"amount"},sa={class:"detail-item"},ua={class:"detail-item"},ca={class:"detail-item"},ma={class:"detail-item"},_a={class:"content-text"},ya={class:"timeline-content"},fa={class:"timeline-title"},wa={class:"timeline-user"},va={key:0,class:"timeline-comment"},ba={class:"dialog-footer"},ka={class:"dialog-footer"},ga={class:"statistics-content"},ha={class:"stat-number"},Ca={class:"stat-number"},ja={class:"stat-number"},xa={class:"stat-number"},Na={__name:"expense-rd2",setup(za){const M=v("material"),h=v([]),F=v(!1),f=v(null),U=v(!1),I=v("申请费用"),G=v(null),q=v(!1),J=v(null),R=v(!1),O=v([]),Z=[{id:"exp001",projectName:"AI算法优化项目",type:"material",amount:25e3,status:"pending",applicant:"张工程师",department:"技术部",applyTime:"2024-01-15 09:00:00",approver:"",description:"购买高性能GPU服务器用于AI模型训练，包括材料、燃料和动力费用。"},{id:"exp002",projectName:"新材料研发项目",type:"material",amount:18e3,status:"approved",applicant:"李研究员",department:"研发部",applyTime:"2024-01-14 14:30:00",approver:"王经理",description:"研发新材料的原材料采购费用。"},{id:"exp003",projectName:"移动端开发项目",type:"personnel",amount:15e4,status:"approved",applicant:"李开发",department:"技术部",applyTime:"2024-01-14 14:30:00",approver:"王经理",description:"研发人员工资、奖金、津贴、补贴、社会保险费、住房公积金等人工费用。"},{id:"exp004",projectName:"外聘专家咨询",type:"personnel",amount:5e4,status:"paid",applicant:"陈主管",department:"人事部",applyTime:"2024-01-13 11:20:00",approver:"刘总监",description:"外聘研发专家的劳务费用。"},{id:"exp005",projectName:"产品设计项目",type:"depreciation",amount:8e4,status:"paid",applicant:"陈设计师",department:"设计部",applyTime:"2024-01-13 11:20:00",approver:"刘总监",description:"用于研发活动的仪器、设备、房屋等固定资产的折旧费。"},{id:"exp006",projectName:"实验室设备租赁",type:"depreciation",amount:3e4,status:"approved",applicant:"赵研究员",department:"研发部",applyTime:"2024-01-12 16:45:00",approver:"孙经理",description:"实验室设备租赁费用。"},{id:"exp007",projectName:"软件系统开发",type:"intangible",amount:45e3,status:"approved",applicant:"赵研究员",department:"研发部",applyTime:"2024-01-12 16:45:00",approver:"孙经理",description:"用于研发活动的软件、专利权、非专利技术等无形资产的摊销费用。"},{id:"exp008",projectName:"专利技术购买",type:"intangible",amount:12e4,status:"pending",applicant:"钱工程师",department:"研发部",applyTime:"2024-01-11 10:30:00",approver:"",description:"购买相关专利技术的摊销费用。"},{id:"exp009",projectName:"新产品试制",type:"testing",amount:35e3,status:"pending",applicant:"钱工程师",department:"研发部",applyTime:"2024-01-11 10:30:00",approver:"",description:"用于中间试验和产品试制的模具、工艺装备开发及制造费，设备调整及检验费。"},{id:"exp010",projectName:"样品制作检验",type:"testing",amount:15e3,status:"approved",applicant:"孙工程师",department:"研发部",applyTime:"2024-01-10 15:20:00",approver:"李总监",description:"样品、样机及一般测试手段购置费，试制产品的检验费等。"},{id:"exp011",projectName:"专利申请项目",type:"intellectual",amount:12e3,status:"paid",applicant:"孙律师",department:"法务部",applyTime:"2024-01-10 15:20:00",approver:"李总监",description:"研发成果的论证、评审、验收、评估以及知识产权的申请费、注册费、代理费等费用。"},{id:"exp012",projectName:"技术成果评估",type:"intellectual",amount:8e3,status:"approved",applicant:"周工程师",department:"技术部",applyTime:"2024-01-09 09:15:00",approver:"王总监",description:"技术成果的评估和认证费用。"},{id:"exp013",projectName:"技术合作开发",type:"outsourcing",amount:2e5,status:"approved",applicant:"周经理",department:"技术部",applyTime:"2024-01-09 09:15:00",approver:"王总监",description:"通过外包、合作研发等方式，委托其他单位、个人或者与之合作进行研发而支付的费用。"},{id:"exp014",projectName:"第三方研发服务",type:"outsourcing",amount:8e4,status:"pending",applicant:"吴主管",department:"人事部",applyTime:"2024-01-08 14:00:00",approver:"",description:"委托第三方机构进行专项研发服务。"},{id:"exp015",projectName:"技术培训会议",type:"other",amount:8e3,status:"rejected",applicant:"吴主管",department:"人事部",applyTime:"2024-01-08 14:00:00",approver:"陈经理",description:"与研发活动直接相关的其他费用，包括技术图书资料费、会议费、差旅费、研发人员培训费等。"},{id:"exp016",projectName:"技术资料翻译",type:"other",amount:5e3,status:"approved",applicant:"郑翻译",department:"技术部",applyTime:"2024-01-07 16:30:00",approver:"张经理",description:"技术资料翻译费用。"}],Y=v([{action:"提交申请",user:"张工程师",department:"技术部",time:"2024-01-15 09:00:00",type:"submit"}]),k=v({projectName:"",type:"",amount:0,description:""}),L=v({result:"approve",comment:""}),W={projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}],type:[{required:!0,message:"请选择费用类型",trigger:"change"}],amount:[{required:!0,message:"请输入申请金额",trigger:"blur"}],description:[{required:!0,message:"请输入费用说明",trigger:"blur"}]},ee={result:[{required:!0,message:"请选择审批结果",trigger:"change"}],comment:[{required:!0,message:"请输入审批意见",trigger:"blur"}]},j=P(()=>h.value.filter(o=>o.type===M.value)),ae=P(()=>h.value.reduce((o,e)=>o+e.amount,0)),le=P(()=>h.value.filter(o=>o.status==="pending").length),te=P(()=>h.value.filter(o=>o.status==="approved").length),ie=P(()=>h.value.filter(o=>o.status==="paid").length),pe=o=>{console.log("切换到tab:",o.props.name)},de=o=>({material:"材料燃料动力费",personnel:"人工费用",depreciation:"固定资产费用",intangible:"无形资产费用",testing:"试验费用",intellectual:"研发成果费用",outsourcing:"外包合作费用",other:"其他相关费用"})[o]||"未知类型",re=o=>({material:"primary",personnel:"success",depreciation:"warning",intangible:"info",testing:"danger",intellectual:"default",outsourcing:"primary",other:"default"})[o]||"default",A=async()=>{try{await new Promise(o=>setTimeout(o,500)),h.value=Z,g.success("费用列表加载成功")}catch{g.error("获取费用列表失败")}},ne=()=>{A()},oe=()=>{I.value="申请费用",k.value={projectName:"",type:M.value,amount:0,description:""},O.value=[],U.value=!0},se=o=>{I.value="编辑费用",k.value={...o},U.value=!0},ue=async()=>{try{await G.value.validate(),await new Promise(o=>setTimeout(o,1e3)),g.success(I.value==="申请费用"?"费用申请提交成功":"费用信息更新成功"),U.value=!1,A()}catch{g.error("表单验证失败")}},x=async o=>{try{await X.confirm(`确定要删除费用申请"${o.projectName}"吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),h.value=h.value.filter(e=>e.id!==o.id),g.success("删除成功")}catch{g.info("已取消删除")}},w=o=>{f.value=o,F.value=!0,_e(o.id)},N=o=>{f.value=o,L.value={result:"approve",comment:""},q.value=!0},ce=async()=>{try{await J.value.validate(),await new Promise(e=>setTimeout(e,1e3));const o=h.value.find(e=>e.id===f.value.id);o&&(o.status=L.value.result==="approve"?"approved":"rejected",o.approver="当前用户"),g.success("审批完成"),q.value=!1,A()}catch{g.error("表单验证失败")}},z=async o=>{try{await X.confirm(`确定要支付费用"${o.projectName}"吗？`,"确认支付",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),o.status="paid",g.success("支付成功")}catch{g.info("已取消支付")}},me=()=>{R.value=!0},_e=o=>{Y.value=[{action:"提交申请",user:"张工程师",department:"技术部",time:"2024-01-15 09:00:00",type:"submit"}]},ye=(o,e)=>{console.log("文件变化:",o,e)},fe=()=>{F.value=!1,f.value=null,Y.value=[]},we=()=>{var o;U.value=!1,(o=G.value)==null||o.resetFields(),O.value=[]},ve=()=>{var o;q.value=!1,(o=J.value)==null||o.resetFields()},be=()=>{R.value=!1};return Te(A),(o,e)=>{const s=y("el-button"),d=y("el-table-column"),c=y("el-tag"),T=y("el-table"),V=y("el-tab-pane"),ke=y("el-tabs"),C=y("el-card"),b=y("el-col"),B=y("el-row"),ge=y("el-timeline-item"),he=y("el-timeline"),D=y("el-dialog"),H=y("el-input"),S=y("el-form-item"),$=y("el-option"),Ce=y("el-select"),je=y("el-input-number"),xe=y("el-upload"),K=y("el-form"),Q=y("el-radio"),Ne=y("el-radio-group");return r(),E("div",Ue,[t(C,null,{default:a(()=>[i("div",Le,[e[17]||(e[17]=i("span",null,"研发费用管理",-1)),i("div",Se,[t(s,{type:"primary",onClick:oe,size:"small"},{default:a(()=>e[14]||(e[14]=[p("申请费用")])),_:1,__:[14]}),t(s,{type:"success",onClick:ne,size:"small"},{default:a(()=>e[15]||(e[15]=[p("刷新")])),_:1,__:[15]}),t(s,{type:"info",onClick:me,size:"small"},{default:a(()=>e[16]||(e[16]=[p("费用统计")])),_:1,__:[16]})])]),t(ke,{modelValue:M.value,"onUpdate:modelValue":e[0]||(e[0]=l=>M.value=l),type:"card",onTabClick:pe,class:"expense-tabs"},{default:a(()=>[t(V,{label:"材料燃料动力费",name:"material"},{default:a(()=>[i("div",qe,[e[26]||(e[26]=i("div",{class:"tab-description"},[i("h4",null,"研发活动直接消耗的材料、燃料和动力费用"),i("p",null,"包括研发过程中消耗的原材料、辅助材料、燃料、动力等费用")],-1)),t(T,{data:j.value,style:{width:"100%"},fit:"true"},{default:a(()=>[t(d,{prop:"projectName",label:"项目名称","min-width":"150"},{default:a(l=>[i("span",{class:"clickable-title",onClick:u=>w(l.row)},m(l.row.projectName),9,Be)]),_:1}),t(d,{prop:"amount",label:"金额","min-width":"120"},{default:a(l=>[i("span",Pe,"¥"+m(l.row.amount.toLocaleString()),1)]),_:1}),t(d,{prop:"status",label:"状态","min-width":"100"},{default:a(l=>[l.row.status==="pending"?(r(),n(c,{key:0,type:"warning"},{default:a(()=>e[18]||(e[18]=[p("待审批")])),_:1,__:[18]})):l.row.status==="approved"?(r(),n(c,{key:1,type:"success"},{default:a(()=>e[19]||(e[19]=[p("已通过")])),_:1,__:[19]})):l.row.status==="rejected"?(r(),n(c,{key:2,type:"danger"},{default:a(()=>e[20]||(e[20]=[p("已拒绝")])),_:1,__:[20]})):l.row.status==="paid"?(r(),n(c,{key:3,type:"primary"},{default:a(()=>e[21]||(e[21]=[p("已支付")])),_:1,__:[21]})):_("",!0)]),_:1}),t(d,{prop:"applicant",label:"申请人","min-width":"120"}),t(d,{prop:"department",label:"部门","min-width":"120"}),t(d,{prop:"applyTime",label:"申请时间","min-width":"150"}),t(d,{prop:"approver",label:"审批人","min-width":"120"}),t(d,{label:"操作","min-width":"200",fixed:"right"},{default:a(l=>[t(s,{size:"small",type:"primary",onClick:u=>w(l.row)},{default:a(()=>e[22]||(e[22]=[p("查看")])),_:2,__:[22]},1032,["onClick"]),l.row.status==="pending"?(r(),n(s,{key:0,size:"small",type:"success",onClick:u=>N(l.row)},{default:a(()=>e[23]||(e[23]=[p("审批")])),_:2,__:[23]},1032,["onClick"])):_("",!0),l.row.status==="approved"?(r(),n(s,{key:1,size:"small",type:"warning",onClick:u=>z(l.row)},{default:a(()=>e[24]||(e[24]=[p("支付")])),_:2,__:[24]},1032,["onClick"])):_("",!0),t(s,{size:"small",type:"danger",onClick:u=>x(l.row)},{default:a(()=>e[25]||(e[25]=[p("删除")])),_:2,__:[25]},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),_:1}),t(V,{label:"人工费用",name:"personnel"},{default:a(()=>[i("div",Me,[e[35]||(e[35]=i("div",{class:"tab-description"},[i("h4",null,"企业在职研发人员的工资、奖金、津贴、补贴、社会保险费、住房公积金等人工费用以及外聘研发人员的劳务费用"),i("p",null,"包括研发人员的各项薪酬福利和外聘人员费用")],-1)),t(T,{data:j.value,style:{width:"100%"},fit:"true"},{default:a(()=>[t(d,{prop:"projectName",label:"项目名称","min-width":"150"},{default:a(l=>[i("span",{class:"clickable-title",onClick:u=>w(l.row)},m(l.row.projectName),9,Fe)]),_:1}),t(d,{prop:"amount",label:"金额","min-width":"120"},{default:a(l=>[i("span",Ie,"¥"+m(l.row.amount.toLocaleString()),1)]),_:1}),t(d,{prop:"status",label:"状态","min-width":"100"},{default:a(l=>[l.row.status==="pending"?(r(),n(c,{key:0,type:"warning"},{default:a(()=>e[27]||(e[27]=[p("待审批")])),_:1,__:[27]})):l.row.status==="approved"?(r(),n(c,{key:1,type:"success"},{default:a(()=>e[28]||(e[28]=[p("已通过")])),_:1,__:[28]})):l.row.status==="rejected"?(r(),n(c,{key:2,type:"danger"},{default:a(()=>e[29]||(e[29]=[p("已拒绝")])),_:1,__:[29]})):l.row.status==="paid"?(r(),n(c,{key:3,type:"primary"},{default:a(()=>e[30]||(e[30]=[p("已支付")])),_:1,__:[30]})):_("",!0)]),_:1}),t(d,{prop:"applicant",label:"申请人","min-width":"120"}),t(d,{prop:"department",label:"部门","min-width":"120"}),t(d,{prop:"applyTime",label:"申请时间","min-width":"150"}),t(d,{prop:"approver",label:"审批人","min-width":"120"}),t(d,{label:"操作","min-width":"200",fixed:"right"},{default:a(l=>[t(s,{size:"small",type:"primary",onClick:u=>w(l.row)},{default:a(()=>e[31]||(e[31]=[p("查看")])),_:2,__:[31]},1032,["onClick"]),l.row.status==="pending"?(r(),n(s,{key:0,size:"small",type:"success",onClick:u=>N(l.row)},{default:a(()=>e[32]||(e[32]=[p("审批")])),_:2,__:[32]},1032,["onClick"])):_("",!0),l.row.status==="approved"?(r(),n(s,{key:1,size:"small",type:"warning",onClick:u=>z(l.row)},{default:a(()=>e[33]||(e[33]=[p("支付")])),_:2,__:[33]},1032,["onClick"])):_("",!0),t(s,{size:"small",type:"danger",onClick:u=>x(l.row)},{default:a(()=>e[34]||(e[34]=[p("删除")])),_:2,__:[34]},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),_:1}),t(V,{label:"固定资产费用",name:"depreciation"},{default:a(()=>[i("div",Re,[e[44]||(e[44]=i("div",{class:"tab-description"},[i("h4",null,"用于研发活动的仪器、设备、房屋等固定资产的折旧费或租赁费以及相关固定资产的运行维护、维修等费用"),i("p",null,"包括研发用固定资产的折旧、租赁、维护等费用")],-1)),t(T,{data:j.value,style:{width:"100%"},fit:"true"},{default:a(()=>[t(d,{prop:"projectName",label:"项目名称","min-width":"150"},{default:a(l=>[i("span",{class:"clickable-title",onClick:u=>w(l.row)},m(l.row.projectName),9,Ae)]),_:1}),t(d,{prop:"amount",label:"金额","min-width":"120"},{default:a(l=>[i("span",De,"¥"+m(l.row.amount.toLocaleString()),1)]),_:1}),t(d,{prop:"status",label:"状态","min-width":"100"},{default:a(l=>[l.row.status==="pending"?(r(),n(c,{key:0,type:"warning"},{default:a(()=>e[36]||(e[36]=[p("待审批")])),_:1,__:[36]})):l.row.status==="approved"?(r(),n(c,{key:1,type:"success"},{default:a(()=>e[37]||(e[37]=[p("已通过")])),_:1,__:[37]})):l.row.status==="rejected"?(r(),n(c,{key:2,type:"danger"},{default:a(()=>e[38]||(e[38]=[p("已拒绝")])),_:1,__:[38]})):l.row.status==="paid"?(r(),n(c,{key:3,type:"primary"},{default:a(()=>e[39]||(e[39]=[p("已支付")])),_:1,__:[39]})):_("",!0)]),_:1}),t(d,{prop:"applicant",label:"申请人","min-width":"120"}),t(d,{prop:"department",label:"部门","min-width":"120"}),t(d,{prop:"applyTime",label:"申请时间","min-width":"150"}),t(d,{prop:"approver",label:"审批人","min-width":"120"}),t(d,{label:"操作","min-width":"200",fixed:"right"},{default:a(l=>[t(s,{size:"small",type:"primary",onClick:u=>w(l.row)},{default:a(()=>e[40]||(e[40]=[p("查看")])),_:2,__:[40]},1032,["onClick"]),l.row.status==="pending"?(r(),n(s,{key:0,size:"small",type:"success",onClick:u=>N(l.row)},{default:a(()=>e[41]||(e[41]=[p("审批")])),_:2,__:[41]},1032,["onClick"])):_("",!0),l.row.status==="approved"?(r(),n(s,{key:1,size:"small",type:"warning",onClick:u=>z(l.row)},{default:a(()=>e[42]||(e[42]=[p("支付")])),_:2,__:[42]},1032,["onClick"])):_("",!0),t(s,{size:"small",type:"danger",onClick:u=>x(l.row)},{default:a(()=>e[43]||(e[43]=[p("删除")])),_:2,__:[43]},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),_:1}),t(V,{label:"无形资产费用",name:"intangible"},{default:a(()=>[i("div",Ee,[e[53]||(e[53]=i("div",{class:"tab-description"},[i("h4",null,"用于研发活动的软件、专利权、非专利技术等无形资产的摊销费用"),i("p",null,"包括研发用软件、专利、技术等无形资产的摊销费用")],-1)),t(T,{data:j.value,style:{width:"100%"},fit:"true"},{default:a(()=>[t(d,{prop:"projectName",label:"项目名称","min-width":"150"},{default:a(l=>[i("span",{class:"clickable-title",onClick:u=>w(l.row)},m(l.row.projectName),9,Ge)]),_:1}),t(d,{prop:"amount",label:"金额","min-width":"120"},{default:a(l=>[i("span",Je,"¥"+m(l.row.amount.toLocaleString()),1)]),_:1}),t(d,{prop:"status",label:"状态","min-width":"100"},{default:a(l=>[l.row.status==="pending"?(r(),n(c,{key:0,type:"warning"},{default:a(()=>e[45]||(e[45]=[p("待审批")])),_:1,__:[45]})):l.row.status==="approved"?(r(),n(c,{key:1,type:"success"},{default:a(()=>e[46]||(e[46]=[p("已通过")])),_:1,__:[46]})):l.row.status==="rejected"?(r(),n(c,{key:2,type:"danger"},{default:a(()=>e[47]||(e[47]=[p("已拒绝")])),_:1,__:[47]})):l.row.status==="paid"?(r(),n(c,{key:3,type:"primary"},{default:a(()=>e[48]||(e[48]=[p("已支付")])),_:1,__:[48]})):_("",!0)]),_:1}),t(d,{prop:"applicant",label:"申请人","min-width":"120"}),t(d,{prop:"department",label:"部门","min-width":"120"}),t(d,{prop:"applyTime",label:"申请时间","min-width":"150"}),t(d,{prop:"approver",label:"审批人","min-width":"120"}),t(d,{label:"操作","min-width":"200",fixed:"right"},{default:a(l=>[t(s,{size:"small",type:"primary",onClick:u=>w(l.row)},{default:a(()=>e[49]||(e[49]=[p("查看")])),_:2,__:[49]},1032,["onClick"]),l.row.status==="pending"?(r(),n(s,{key:0,size:"small",type:"success",onClick:u=>N(l.row)},{default:a(()=>e[50]||(e[50]=[p("审批")])),_:2,__:[50]},1032,["onClick"])):_("",!0),l.row.status==="approved"?(r(),n(s,{key:1,size:"small",type:"warning",onClick:u=>z(l.row)},{default:a(()=>e[51]||(e[51]=[p("支付")])),_:2,__:[51]},1032,["onClick"])):_("",!0),t(s,{size:"small",type:"danger",onClick:u=>x(l.row)},{default:a(()=>e[52]||(e[52]=[p("删除")])),_:2,__:[52]},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),_:1}),t(V,{label:"试验费用",name:"testing"},{default:a(()=>[i("div",Oe,[e[62]||(e[62]=i("div",{class:"tab-description"},[i("h4",null,"用于中间试验和产品试制的模具、工艺装备开发及制造费,设备调整及检验费,样品、样机及一般测试手段购置费,试制产品的检验费等"),i("p",null,"包括试制、检验、测试等相关费用")],-1)),t(T,{data:j.value,style:{width:"100%"},fit:"true"},{default:a(()=>[t(d,{prop:"projectName",label:"项目名称","min-width":"150"},{default:a(l=>[i("span",{class:"clickable-title",onClick:u=>w(l.row)},m(l.row.projectName),9,Ye)]),_:1}),t(d,{prop:"amount",label:"金额","min-width":"120"},{default:a(l=>[i("span",He,"¥"+m(l.row.amount.toLocaleString()),1)]),_:1}),t(d,{prop:"status",label:"状态","min-width":"100"},{default:a(l=>[l.row.status==="pending"?(r(),n(c,{key:0,type:"warning"},{default:a(()=>e[54]||(e[54]=[p("待审批")])),_:1,__:[54]})):l.row.status==="approved"?(r(),n(c,{key:1,type:"success"},{default:a(()=>e[55]||(e[55]=[p("已通过")])),_:1,__:[55]})):l.row.status==="rejected"?(r(),n(c,{key:2,type:"danger"},{default:a(()=>e[56]||(e[56]=[p("已拒绝")])),_:1,__:[56]})):l.row.status==="paid"?(r(),n(c,{key:3,type:"primary"},{default:a(()=>e[57]||(e[57]=[p("已支付")])),_:1,__:[57]})):_("",!0)]),_:1}),t(d,{prop:"applicant",label:"申请人","min-width":"120"}),t(d,{prop:"department",label:"部门","min-width":"120"}),t(d,{prop:"applyTime",label:"申请时间","min-width":"150"}),t(d,{prop:"approver",label:"审批人","min-width":"120"}),t(d,{label:"操作","min-width":"200",fixed:"right"},{default:a(l=>[t(s,{size:"small",type:"primary",onClick:u=>w(l.row)},{default:a(()=>e[58]||(e[58]=[p("查看")])),_:2,__:[58]},1032,["onClick"]),l.row.status==="pending"?(r(),n(s,{key:0,size:"small",type:"success",onClick:u=>N(l.row)},{default:a(()=>e[59]||(e[59]=[p("审批")])),_:2,__:[59]},1032,["onClick"])):_("",!0),l.row.status==="approved"?(r(),n(s,{key:1,size:"small",type:"warning",onClick:u=>z(l.row)},{default:a(()=>e[60]||(e[60]=[p("支付")])),_:2,__:[60]},1032,["onClick"])):_("",!0),t(s,{size:"small",type:"danger",onClick:u=>x(l.row)},{default:a(()=>e[61]||(e[61]=[p("删除")])),_:2,__:[61]},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),_:1}),t(V,{label:"研发成果费用",name:"intellectual"},{default:a(()=>[i("div",Ke,[e[71]||(e[71]=i("div",{class:"tab-description"},[i("h4",null,"研发成果的论证、评审、验收、评估以及知识产权的申请费、注册费、代理费等费用"),i("p",null,"包括成果评估、知识产权申请等相关费用")],-1)),t(T,{data:j.value,style:{width:"100%"},fit:"true"},{default:a(()=>[t(d,{prop:"projectName",label:"项目名称","min-width":"150"},{default:a(l=>[i("span",{class:"clickable-title",onClick:u=>w(l.row)},m(l.row.projectName),9,Qe)]),_:1}),t(d,{prop:"amount",label:"金额","min-width":"120"},{default:a(l=>[i("span",Xe,"¥"+m(l.row.amount.toLocaleString()),1)]),_:1}),t(d,{prop:"status",label:"状态","min-width":"100"},{default:a(l=>[l.row.status==="pending"?(r(),n(c,{key:0,type:"warning"},{default:a(()=>e[63]||(e[63]=[p("待审批")])),_:1,__:[63]})):l.row.status==="approved"?(r(),n(c,{key:1,type:"success"},{default:a(()=>e[64]||(e[64]=[p("已通过")])),_:1,__:[64]})):l.row.status==="rejected"?(r(),n(c,{key:2,type:"danger"},{default:a(()=>e[65]||(e[65]=[p("已拒绝")])),_:1,__:[65]})):l.row.status==="paid"?(r(),n(c,{key:3,type:"primary"},{default:a(()=>e[66]||(e[66]=[p("已支付")])),_:1,__:[66]})):_("",!0)]),_:1}),t(d,{prop:"applicant",label:"申请人","min-width":"120"}),t(d,{prop:"department",label:"部门","min-width":"120"}),t(d,{prop:"applyTime",label:"申请时间","min-width":"150"}),t(d,{prop:"approver",label:"审批人","min-width":"120"}),t(d,{label:"操作","min-width":"200",fixed:"right"},{default:a(l=>[t(s,{size:"small",type:"primary",onClick:u=>w(l.row)},{default:a(()=>e[67]||(e[67]=[p("查看")])),_:2,__:[67]},1032,["onClick"]),l.row.status==="pending"?(r(),n(s,{key:0,size:"small",type:"success",onClick:u=>N(l.row)},{default:a(()=>e[68]||(e[68]=[p("审批")])),_:2,__:[68]},1032,["onClick"])):_("",!0),l.row.status==="approved"?(r(),n(s,{key:1,size:"small",type:"warning",onClick:u=>z(l.row)},{default:a(()=>e[69]||(e[69]=[p("支付")])),_:2,__:[69]},1032,["onClick"])):_("",!0),t(s,{size:"small",type:"danger",onClick:u=>x(l.row)},{default:a(()=>e[70]||(e[70]=[p("删除")])),_:2,__:[70]},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),_:1}),t(V,{label:"外包合作费用",name:"outsourcing"},{default:a(()=>[i("div",Ze,[e[80]||(e[80]=i("div",{class:"tab-description"},[i("h4",null,"通过外包、合作研发等方式,委托其他单位、个人或者与之合作进行研发而支付的费用"),i("p",null,"包括外包研发、合作开发等相关费用")],-1)),t(T,{data:j.value,style:{width:"100%"},fit:"true"},{default:a(()=>[t(d,{prop:"projectName",label:"项目名称","min-width":"150"},{default:a(l=>[i("span",{class:"clickable-title",onClick:u=>w(l.row)},m(l.row.projectName),9,We)]),_:1}),t(d,{prop:"amount",label:"金额","min-width":"120"},{default:a(l=>[i("span",ea,"¥"+m(l.row.amount.toLocaleString()),1)]),_:1}),t(d,{prop:"status",label:"状态","min-width":"100"},{default:a(l=>[l.row.status==="pending"?(r(),n(c,{key:0,type:"warning"},{default:a(()=>e[72]||(e[72]=[p("待审批")])),_:1,__:[72]})):l.row.status==="approved"?(r(),n(c,{key:1,type:"success"},{default:a(()=>e[73]||(e[73]=[p("已通过")])),_:1,__:[73]})):l.row.status==="rejected"?(r(),n(c,{key:2,type:"danger"},{default:a(()=>e[74]||(e[74]=[p("已拒绝")])),_:1,__:[74]})):l.row.status==="paid"?(r(),n(c,{key:3,type:"primary"},{default:a(()=>e[75]||(e[75]=[p("已支付")])),_:1,__:[75]})):_("",!0)]),_:1}),t(d,{prop:"applicant",label:"申请人","min-width":"120"}),t(d,{prop:"department",label:"部门","min-width":"120"}),t(d,{prop:"applyTime",label:"申请时间","min-width":"150"}),t(d,{prop:"approver",label:"审批人","min-width":"120"}),t(d,{label:"操作","min-width":"200",fixed:"right"},{default:a(l=>[t(s,{size:"small",type:"primary",onClick:u=>w(l.row)},{default:a(()=>e[76]||(e[76]=[p("查看")])),_:2,__:[76]},1032,["onClick"]),l.row.status==="pending"?(r(),n(s,{key:0,size:"small",type:"success",onClick:u=>N(l.row)},{default:a(()=>e[77]||(e[77]=[p("审批")])),_:2,__:[77]},1032,["onClick"])):_("",!0),l.row.status==="approved"?(r(),n(s,{key:1,size:"small",type:"warning",onClick:u=>z(l.row)},{default:a(()=>e[78]||(e[78]=[p("支付")])),_:2,__:[78]},1032,["onClick"])):_("",!0),t(s,{size:"small",type:"danger",onClick:u=>x(l.row)},{default:a(()=>e[79]||(e[79]=[p("删除")])),_:2,__:[79]},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),_:1}),t(V,{label:"其他相关费用",name:"other"},{default:a(()=>[i("div",aa,[e[89]||(e[89]=i("div",{class:"tab-description"},[i("h4",null,"与研发活动直接相关的其他费用，包括技术图书资料费、资料翻译费、会议费、差旅费、办公费、外事费、研发人员培训费、培养费、专家咨询费、高新科技研发保险费用等"),i("p",null,"包括研发相关的其他各项费用")],-1)),t(T,{data:j.value,style:{width:"100%"},fit:"true"},{default:a(()=>[t(d,{prop:"projectName",label:"项目名称","min-width":"150"},{default:a(l=>[i("span",{class:"clickable-title",onClick:u=>w(l.row)},m(l.row.projectName),9,la)]),_:1}),t(d,{prop:"amount",label:"金额","min-width":"120"},{default:a(l=>[i("span",ta,"¥"+m(l.row.amount.toLocaleString()),1)]),_:1}),t(d,{prop:"status",label:"状态","min-width":"100"},{default:a(l=>[l.row.status==="pending"?(r(),n(c,{key:0,type:"warning"},{default:a(()=>e[81]||(e[81]=[p("待审批")])),_:1,__:[81]})):l.row.status==="approved"?(r(),n(c,{key:1,type:"success"},{default:a(()=>e[82]||(e[82]=[p("已通过")])),_:1,__:[82]})):l.row.status==="rejected"?(r(),n(c,{key:2,type:"danger"},{default:a(()=>e[83]||(e[83]=[p("已拒绝")])),_:1,__:[83]})):l.row.status==="paid"?(r(),n(c,{key:3,type:"primary"},{default:a(()=>e[84]||(e[84]=[p("已支付")])),_:1,__:[84]})):_("",!0)]),_:1}),t(d,{prop:"applicant",label:"申请人","min-width":"120"}),t(d,{prop:"department",label:"部门","min-width":"120"}),t(d,{prop:"applyTime",label:"申请时间","min-width":"150"}),t(d,{prop:"approver",label:"审批人","min-width":"120"}),t(d,{label:"操作","min-width":"200",fixed:"right"},{default:a(l=>[t(s,{size:"small",type:"primary",onClick:u=>w(l.row)},{default:a(()=>e[85]||(e[85]=[p("查看")])),_:2,__:[85]},1032,["onClick"]),l.row.status==="pending"?(r(),n(s,{key:0,size:"small",type:"success",onClick:u=>N(l.row)},{default:a(()=>e[86]||(e[86]=[p("审批")])),_:2,__:[86]},1032,["onClick"])):_("",!0),l.row.status==="approved"?(r(),n(s,{key:1,size:"small",type:"warning",onClick:u=>z(l.row)},{default:a(()=>e[87]||(e[87]=[p("支付")])),_:2,__:[87]},1032,["onClick"])):_("",!0),t(s,{size:"small",type:"danger",onClick:u=>x(l.row)},{default:a(()=>e[88]||(e[88]=[p("删除")])),_:2,__:[88]},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(D,{modelValue:F.value,"onUpdate:modelValue":e[2]||(e[2]=l=>F.value=l),title:"费用详情",width:"900px","before-close":fe},{default:a(()=>[f.value?(r(),E("div",ia,[t(C,{class:"info-card",shadow:"never"},{header:a(()=>[i("div",pa,[e[91]||(e[91]=i("span",null,"费用信息",-1)),t(s,{type:"primary",size:"small",onClick:e[1]||(e[1]=l=>se(f.value))},{default:a(()=>e[90]||(e[90]=[p("编辑")])),_:1,__:[90]})])]),default:a(()=>[t(B,{gutter:20},{default:a(()=>[t(b,{span:12},{default:a(()=>[i("div",da,[e[92]||(e[92]=i("label",null,"项目名称：",-1)),i("span",null,m(f.value.projectName),1)])]),_:1}),t(b,{span:12},{default:a(()=>[i("div",ra,[e[93]||(e[93]=i("label",null,"费用类型：",-1)),t(c,{type:re(f.value.type)},{default:a(()=>[p(m(de(f.value.type)),1)]),_:1},8,["type"])])]),_:1})]),_:1}),t(B,{gutter:20},{default:a(()=>[t(b,{span:12},{default:a(()=>[i("div",na,[e[94]||(e[94]=i("label",null,"申请金额：",-1)),i("span",oa,"¥"+m(f.value.amount.toLocaleString()),1)])]),_:1}),t(b,{span:12},{default:a(()=>[i("div",sa,[e[99]||(e[99]=i("label",null,"状态：",-1)),f.value.status==="pending"?(r(),n(c,{key:0,type:"warning"},{default:a(()=>e[95]||(e[95]=[p("待审批")])),_:1,__:[95]})):f.value.status==="approved"?(r(),n(c,{key:1,type:"success"},{default:a(()=>e[96]||(e[96]=[p("已通过")])),_:1,__:[96]})):f.value.status==="rejected"?(r(),n(c,{key:2,type:"danger"},{default:a(()=>e[97]||(e[97]=[p("已拒绝")])),_:1,__:[97]})):f.value.status==="paid"?(r(),n(c,{key:3,type:"primary"},{default:a(()=>e[98]||(e[98]=[p("已支付")])),_:1,__:[98]})):_("",!0)])]),_:1})]),_:1}),t(B,{gutter:20},{default:a(()=>[t(b,{span:12},{default:a(()=>[i("div",ua,[e[100]||(e[100]=i("label",null,"申请人：",-1)),i("span",null,m(f.value.applicant),1)])]),_:1}),t(b,{span:12},{default:a(()=>[i("div",ca,[e[101]||(e[101]=i("label",null,"申请时间：",-1)),i("span",null,m(f.value.applyTime),1)])]),_:1})]),_:1}),t(B,{gutter:20},{default:a(()=>[t(b,{span:24},{default:a(()=>[i("div",ma,[e[102]||(e[102]=i("label",null,"费用说明：",-1)),i("div",_a,m(f.value.description),1)])]),_:1})]),_:1})]),_:1}),t(C,{class:"approval-card",shadow:"never"},{header:a(()=>e[103]||(e[103]=[i("div",{class:"card-header"},[i("span",null,"审批记录")],-1)])),default:a(()=>[t(he,null,{default:a(()=>[(r(!0),E(Ve,null,$e(Y.value,(l,u)=>(r(),n(ge,{key:u,timestamp:l.time,type:l.type==="approve"?"success":l.type==="reject"?"danger":"primary"},{default:a(()=>[i("div",ya,[i("div",fa,m(l.action),1),i("div",wa,m(l.user)+" ("+m(l.department)+")",1),l.comment?(r(),E("div",va,m(l.comment),1)):_("",!0)])]),_:2},1032,["timestamp","type"]))),128))]),_:1})]),_:1})])):_("",!0)]),_:1},8,["modelValue"]),t(D,{modelValue:U.value,"onUpdate:modelValue":e[8]||(e[8]=l=>U.value=l),title:I.value,width:"800px","before-close":we},{footer:a(()=>[i("div",ba,[t(s,{onClick:e[7]||(e[7]=l=>U.value=!1)},{default:a(()=>e[106]||(e[106]=[p("取消")])),_:1,__:[106]}),t(s,{type:"primary",onClick:ue},{default:a(()=>e[107]||(e[107]=[p("提交申请")])),_:1,__:[107]})])]),default:a(()=>[t(K,{model:k.value,rules:W,ref_key:"expenseFormRef",ref:G,"label-width":"120px"},{default:a(()=>[t(S,{label:"项目名称",prop:"projectName"},{default:a(()=>[t(H,{modelValue:k.value.projectName,"onUpdate:modelValue":e[3]||(e[3]=l=>k.value.projectName=l),placeholder:"请输入项目名称"},null,8,["modelValue"])]),_:1}),t(S,{label:"费用类型",prop:"type"},{default:a(()=>[t(Ce,{modelValue:k.value.type,"onUpdate:modelValue":e[4]||(e[4]=l=>k.value.type=l),placeholder:"请选择费用类型",style:{width:"100%"}},{default:a(()=>[t($,{label:"材料燃料动力费",value:"material"}),t($,{label:"人工费用",value:"personnel"}),t($,{label:"固定资产费用",value:"depreciation"}),t($,{label:"无形资产费用",value:"intangible"}),t($,{label:"试验费用",value:"testing"}),t($,{label:"研发成果费用",value:"intellectual"}),t($,{label:"外包合作费用",value:"outsourcing"}),t($,{label:"其他相关费用",value:"other"})]),_:1},8,["modelValue"])]),_:1}),t(S,{label:"申请金额",prop:"amount"},{default:a(()=>[t(je,{modelValue:k.value.amount,"onUpdate:modelValue":e[5]||(e[5]=l=>k.value.amount=l),min:0,precision:2,step:100,style:{width:"100%"},placeholder:"请输入金额"},null,8,["modelValue"])]),_:1}),t(S,{label:"费用说明",prop:"description"},{default:a(()=>[t(H,{modelValue:k.value.description,"onUpdate:modelValue":e[6]||(e[6]=l=>k.value.description=l),type:"textarea",rows:4,placeholder:"请详细说明费用用途和必要性"},null,8,["modelValue"])]),_:1}),t(S,{label:"附件"},{default:a(()=>[t(xe,{class:"upload-demo",action:"#","auto-upload":!1,"on-change":ye,"file-list":O.value,multiple:""},{tip:a(()=>e[105]||(e[105]=[i("div",{class:"el-upload__tip"}," 支持jpg/png/pdf/doc/docx文件，且不超过10MB ",-1)])),default:a(()=>[t(s,{type:"primary"},{default:a(()=>e[104]||(e[104]=[p("选择文件")])),_:1,__:[104]})]),_:1},8,["file-list"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),t(D,{modelValue:q.value,"onUpdate:modelValue":e[12]||(e[12]=l=>q.value=l),title:"费用审批",width:"600px","before-close":ve},{footer:a(()=>[i("div",ka,[t(s,{onClick:e[11]||(e[11]=l=>q.value=!1)},{default:a(()=>e[110]||(e[110]=[p("取消")])),_:1,__:[110]}),t(s,{type:"primary",onClick:ce},{default:a(()=>e[111]||(e[111]=[p("确认审批")])),_:1,__:[111]})])]),default:a(()=>[t(K,{model:L.value,rules:ee,ref_key:"approvalFormRef",ref:J,"label-width":"100px"},{default:a(()=>[t(S,{label:"审批结果",prop:"result"},{default:a(()=>[t(Ne,{modelValue:L.value.result,"onUpdate:modelValue":e[9]||(e[9]=l=>L.value.result=l)},{default:a(()=>[t(Q,{label:"approve"},{default:a(()=>e[108]||(e[108]=[p("通过")])),_:1,__:[108]}),t(Q,{label:"reject"},{default:a(()=>e[109]||(e[109]=[p("拒绝")])),_:1,__:[109]})]),_:1},8,["modelValue"])]),_:1}),t(S,{label:"审批意见",prop:"comment"},{default:a(()=>[t(H,{modelValue:L.value.comment,"onUpdate:modelValue":e[10]||(e[10]=l=>L.value.comment=l),type:"textarea",rows:4,placeholder:"请输入审批意见"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(D,{modelValue:R.value,"onUpdate:modelValue":e[13]||(e[13]=l=>R.value=l),title:"费用统计",width:"1000px","before-close":be},{default:a(()=>[i("div",ga,[t(B,{gutter:20,style:{"margin-bottom":"30px"}},{default:a(()=>[t(b,{span:6},{default:a(()=>[t(C,{class:"stat-card"},{default:a(()=>[i("div",ha,"¥"+m(ae.value.toLocaleString()),1),e[112]||(e[112]=i("div",{class:"stat-label"},"总费用",-1))]),_:1,__:[112]})]),_:1}),t(b,{span:6},{default:a(()=>[t(C,{class:"stat-card"},{default:a(()=>[i("div",Ca,m(le.value),1),e[113]||(e[113]=i("div",{class:"stat-label"},"待审批",-1))]),_:1,__:[113]})]),_:1}),t(b,{span:6},{default:a(()=>[t(C,{class:"stat-card"},{default:a(()=>[i("div",ja,m(te.value),1),e[114]||(e[114]=i("div",{class:"stat-label"},"已通过",-1))]),_:1,__:[114]})]),_:1}),t(b,{span:6},{default:a(()=>[t(C,{class:"stat-card"},{default:a(()=>[i("div",xa,m(ie.value),1),e[115]||(e[115]=i("div",{class:"stat-label"},"已支付",-1))]),_:1,__:[115]})]),_:1})]),_:1}),t(B,{gutter:20},{default:a(()=>[t(b,{span:12},{default:a(()=>[t(C,null,{header:a(()=>e[116]||(e[116]=[p("费用类型分布")])),default:a(()=>[e[117]||(e[117]=i("div",{id:"typeChart",style:{height:"300px"}},null,-1))]),_:1,__:[117]})]),_:1}),t(b,{span:12},{default:a(()=>[t(C,null,{header:a(()=>e[118]||(e[118]=[p("月度费用趋势")])),default:a(()=>[e[119]||(e[119]=i("div",{id:"trendChart",style:{height:"300px"}},null,-1))]),_:1,__:[119]})]),_:1})]),_:1})])]),_:1},8,["modelValue"])])}}},$a=ze(Na,[["__scopeId","data-v-4b996f6b"]]);export{$a as default};
