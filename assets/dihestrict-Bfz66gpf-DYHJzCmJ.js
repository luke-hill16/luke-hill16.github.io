import{A as ge,V as k,x as G,S as _e,o as be,B as n,y as he,b as j,M,k as d,c as e,W as l,g as w,E as ye,e as i,C as Ve,P as we,a as s,Q as Ce,O as ke,T as De,m as Ue,p as Q,D as Pe,i as xe,f as ze,Y as $e,J as B}from"./index-Cu5WJHTx.js";const Te={class:"district-container"},Se={class:"page-header"},Ge={class:"header-actions"},Be={class:"overview-section"},qe={class:"card-content"},Oe={class:"card-icon primary"},We={class:"card-info"},je={class:"card-value"},Ie={class:"card-content"},Ae={class:"card-icon success"},Je={class:"card-info"},Re={class:"card-value"},Fe={class:"card-content"},Ye={class:"card-icon warning"},Ee={class:"card-info"},Ke={class:"card-value"},Le={class:"card-content"},Ne={class:"card-icon info"},Me={class:"card-info"},Qe={class:"card-value"},Xe={class:"search-section"},Ze={class:"district-list"},He={class:"pagination-container"},el={class:"dialog-footer"},ll={key:0,class:"district-detail"},al={__name:"dihestrict",setup(tl){const X=k(!1),q=k(!1),D=k(!1),O=k(!1),x=k(),p=k(null),y=G({name:"",level:"",region:""}),b=G({currentPage:1,pageSize:10,total:0}),u=G({id:null,name:"",level:"",region:"",postcode:"",population:0,area:0,gdp:0,companies:0,status:"normal",establishDate:"",location:"",description:""}),Z={name:[{required:!0,message:"请输入区县名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],level:[{required:!0,message:"请选择行政级别",trigger:"change"}],region:[{required:!0,message:"请选择所属区域",trigger:"change"}],postcode:[{pattern:/^\d{6}$/,message:"邮政编码格式不正确",trigger:"blur"}],population:[{required:!0,message:"请输入人口数量",trigger:"blur"}],area:[{required:!0,message:"请输入面积",trigger:"blur"}]},V=G({total:0,totalPopulation:0,totalGDP:0,totalCompanies:0}),f=k([{id:1,name:"朝阳区",level:"district",region:"urban",postcode:"100020",population:345.2,area:470.8,gdp:1250.5,companies:15680,status:"normal",establishDate:"1958-05-01",location:"北京市东部",description:"北京市中心城区之一，经济发达，文化繁荣",createTime:"2020-01-01 10:00:00"},{id:2,name:"海淀区",level:"district",region:"urban",postcode:"100080",population:332.1,area:431,gdp:1180.3,companies:14250,status:"normal",establishDate:"1952-09-01",location:"北京市西北部",description:"科技教育中心，中关村科技园区所在地",createTime:"2020-01-01 10:00:00"},{id:3,name:"昌平区",level:"district",region:"suburban",postcode:"102200",population:196.8,area:1343.5,gdp:680.2,companies:8560,status:"developing",establishDate:"1999-09-16",location:"北京市北部",description:"北京市重要的生态涵养区和科技创新基地",createTime:"2020-01-01 10:00:00"},{id:4,name:"密云区",level:"district",region:"rural",postcode:"101500",population:45.6,area:2229.5,gdp:180.5,companies:2340,status:"developing",establishDate:"2015-11-17",location:"北京市东北部",description:"生态涵养区，以旅游业和农业为主",createTime:"2020-01-01 10:00:00"}]),H=_e(()=>u.id?"编辑区县":"添加区县"),I=o=>({district:"市辖区",county:"县级市","county-level":"县",autonomous:"自治县"})[o]||"未知",A=o=>({district:"primary",county:"success","county-level":"warning",autonomous:"info"})[o]||"",J=o=>({urban:"城区",suburban:"郊区",rural:"农村"})[o]||"未知",R=o=>({urban:"primary",suburban:"warning",rural:"success"})[o]||"",F=o=>({normal:"正常",developing:"发展中",pending:"待开发"})[o]||"未知",Y=o=>({normal:"success",developing:"warning",pending:"info"})[o]||"",E=o=>o.toLocaleString(),ee=o=>(o/1e4).toFixed(1)+"万亿",le=()=>{u.id=null,D.value=!0},ae=o=>{Object.assign(u,o),D.value=!0},te=o=>{p.value=o,O.value=!0},oe=async o=>{try{await $e.confirm(`确定要删除区县"${o.name}"吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const a=f.value.findIndex(g=>g.id===o.id);a>-1&&(f.value.splice(a,1),W(),B.success("删除成功"))}catch{}},ue=async()=>{if(x.value)try{if(await x.value.validate(),q.value=!0,await new Promise(o=>setTimeout(o,1e3)),u.id){const o=f.value.findIndex(a=>a.id===u.id);o>-1&&(f.value[o]={...u}),B.success("编辑成功")}else{const o={...u,id:Date.now(),createTime:new Date().toLocaleString()};f.value.unshift(o),B.success("添加成功")}W(),D.value=!1,K()}catch(o){console.error("表单验证失败:",o)}finally{q.value=!1}},K=()=>{x.value&&x.value.resetFields(),Object.assign(u,{id:null,name:"",level:"",region:"",postcode:"",population:0,area:0,gdp:0,companies:0,status:"normal",establishDate:"",location:"",description:""})},U=()=>{b.currentPage=1,console.log("搜索条件:",y)},de=()=>{Object.assign(y,{name:"",level:"",region:""}),U()},ie=o=>{b.pageSize=o},ne=o=>{b.currentPage=o},se=()=>{B.success("区县数据导出成功")},W=()=>{V.total=f.value.length,V.totalPopulation=f.value.reduce((o,a)=>o+a.population,0),V.totalGDP=f.value.reduce((o,a)=>o+a.gdp,0),V.totalCompanies=f.value.reduce((o,a)=>o+a.companies,0)};return be(()=>{W(),b.total=f.value.length}),(o,a)=>{const g=n("el-icon"),h=n("el-button"),T=n("el-card"),r=n("el-col"),C=n("el-row"),z=n("el-input"),c=n("el-option"),$=n("el-select"),_=n("el-table-column"),P=n("el-tag"),re=n("el-table"),pe=n("el-pagination"),m=n("el-form-item"),S=n("el-input-number"),ce=n("el-date-picker"),me=n("el-form"),L=n("el-dialog"),v=n("el-descriptions-item"),ve=n("el-descriptions"),fe=he("loading");return j(),M("div",Te,[d("div",Se,[a[22]||(a[22]=d("h2",null,"区县管理系统",-1)),d("div",Ge,[e(h,{type:"success",onClick:se},{default:l(()=>[e(g,null,{default:l(()=>[e(w(ye))]),_:1}),a[20]||(a[20]=i(" 导出数据 "))]),_:1,__:[20]}),e(h,{type:"primary",onClick:le},{default:l(()=>[e(g,null,{default:l(()=>[e(w(Ve))]),_:1}),a[21]||(a[21]=i(" 添加区县 "))]),_:1,__:[21]})])]),d("div",Be,[e(C,{gutter:20},{default:l(()=>[e(r,{span:6},{default:l(()=>[e(T,{class:"overview-card"},{default:l(()=>[d("div",qe,[d("div",Oe,[e(g,null,{default:l(()=>[e(w(we))]),_:1})]),d("div",We,[a[23]||(a[23]=d("div",{class:"card-title"},"区县总数",-1)),d("div",je,s(V.total),1)])])]),_:1})]),_:1}),e(r,{span:6},{default:l(()=>[e(T,{class:"overview-card"},{default:l(()=>[d("div",Ie,[d("div",Ae,[e(g,null,{default:l(()=>[e(w(Ce))]),_:1})]),d("div",Je,[a[24]||(a[24]=d("div",{class:"card-title"},"总人口",-1)),d("div",Re,s(E(V.totalPopulation)),1)])])]),_:1})]),_:1}),e(r,{span:6},{default:l(()=>[e(T,{class:"overview-card"},{default:l(()=>[d("div",Fe,[d("div",Ye,[e(g,null,{default:l(()=>[e(w(ke))]),_:1})]),d("div",Ee,[a[25]||(a[25]=d("div",{class:"card-title"},"GDP总量",-1)),d("div",Ke,s(ee(V.totalGDP)),1)])])]),_:1})]),_:1}),e(r,{span:6},{default:l(()=>[e(T,{class:"overview-card"},{default:l(()=>[d("div",Le,[d("div",Ne,[e(g,null,{default:l(()=>[e(w(De))]),_:1})]),d("div",Me,[a[26]||(a[26]=d("div",{class:"card-title"},"企业数量",-1)),d("div",Qe,s(E(V.totalCompanies)),1)])])]),_:1})]),_:1})]),_:1})]),d("div",Xe,[e(C,{gutter:20},{default:l(()=>[e(r,{span:6},{default:l(()=>[e(z,{modelValue:y.name,"onUpdate:modelValue":a[0]||(a[0]=t=>y.name=t),placeholder:"区县名称",clearable:"",onClear:U,onKeyup:Ue(U,["enter"])},{prefix:l(()=>[e(g,null,{default:l(()=>[e(w(Q))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(r,{span:6},{default:l(()=>[e($,{modelValue:y.level,"onUpdate:modelValue":a[1]||(a[1]=t=>y.level=t),placeholder:"行政级别",clearable:"",onChange:U},{default:l(()=>[e(c,{label:"市辖区",value:"district"}),e(c,{label:"县级市",value:"county"}),e(c,{label:"县",value:"county-level"}),e(c,{label:"自治县",value:"autonomous"})]),_:1},8,["modelValue"])]),_:1}),e(r,{span:6},{default:l(()=>[e($,{modelValue:y.region,"onUpdate:modelValue":a[2]||(a[2]=t=>y.region=t),placeholder:"所属区域",clearable:"",onChange:U},{default:l(()=>[e(c,{label:"城区",value:"urban"}),e(c,{label:"郊区",value:"suburban"}),e(c,{label:"农村",value:"rural"})]),_:1},8,["modelValue"])]),_:1}),e(r,{span:6},{default:l(()=>[e(h,{type:"primary",onClick:U},{default:l(()=>[e(g,null,{default:l(()=>[e(w(Q))]),_:1}),a[27]||(a[27]=i(" 搜索 "))]),_:1,__:[27]}),e(h,{onClick:de},{default:l(()=>a[28]||(a[28]=[i("重置")])),_:1,__:[28]})]),_:1})]),_:1})]),d("div",Ze,[Pe((j(),xe(re,{data:f.value,stripe:""},{default:l(()=>[e(_,{prop:"id",label:"ID",width:"80"}),e(_,{prop:"name",label:"区县名称"}),e(_,{prop:"level",label:"行政级别",width:"120"},{default:l(t=>[e(P,{type:A(t.row.level)},{default:l(()=>[i(s(I(t.row.level)),1)]),_:2},1032,["type"])]),_:1}),e(_,{prop:"region",label:"所属区域",width:"100"},{default:l(t=>[e(P,{type:R(t.row.region)},{default:l(()=>[i(s(J(t.row.region)),1)]),_:2},1032,["type"])]),_:1}),e(_,{prop:"population",label:"人口(万)",width:"100"}),e(_,{prop:"area",label:"面积(km²)",width:"120"}),e(_,{prop:"gdp",label:"GDP(亿元)",width:"120"}),e(_,{prop:"companies",label:"企业数量",width:"100"}),e(_,{prop:"status",label:"状态",width:"100"},{default:l(t=>[e(P,{type:Y(t.row.status)},{default:l(()=>[i(s(F(t.row.status)),1)]),_:2},1032,["type"])]),_:1}),e(_,{label:"操作",width:"200",fixed:"right"},{default:l(t=>[e(h,{size:"small",onClick:N=>te(t.row)},{default:l(()=>a[29]||(a[29]=[i("查看")])),_:2,__:[29]},1032,["onClick"]),e(h,{size:"small",type:"primary",onClick:N=>ae(t.row)},{default:l(()=>a[30]||(a[30]=[i("编辑")])),_:2,__:[30]},1032,["onClick"]),e(h,{size:"small",type:"danger",onClick:N=>oe(t.row)},{default:l(()=>a[31]||(a[31]=[i("删除")])),_:2,__:[31]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[fe,X.value]]),d("div",He,[e(pe,{"current-page":b.currentPage,"onUpdate:currentPage":a[3]||(a[3]=t=>b.currentPage=t),"page-size":b.pageSize,"onUpdate:pageSize":a[4]||(a[4]=t=>b.pageSize=t),"page-sizes":[10,20,50,100],total:b.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:ie,onCurrentChange:ne},null,8,["current-page","page-size","total"])])]),e(L,{modelValue:D.value,"onUpdate:modelValue":a[18]||(a[18]=t=>D.value=t),title:H.value,width:"700px",onClose:K},{footer:l(()=>[d("div",el,[e(h,{onClick:a[17]||(a[17]=t=>D.value=!1)},{default:l(()=>a[32]||(a[32]=[i("取消")])),_:1,__:[32]}),e(h,{type:"primary",onClick:ue,loading:q.value},{default:l(()=>a[33]||(a[33]=[i("确定")])),_:1,__:[33]},8,["loading"])])]),default:l(()=>[e(me,{model:u,rules:Z,ref_key:"districtFormRef",ref:x,"label-width":"120px"},{default:l(()=>[e(C,{gutter:20},{default:l(()=>[e(r,{span:12},{default:l(()=>[e(m,{label:"区县名称",prop:"name"},{default:l(()=>[e(z,{modelValue:u.name,"onUpdate:modelValue":a[5]||(a[5]=t=>u.name=t),placeholder:"请输入区县名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{label:"行政级别",prop:"level"},{default:l(()=>[e($,{modelValue:u.level,"onUpdate:modelValue":a[6]||(a[6]=t=>u.level=t),placeholder:"请选择行政级别",style:{width:"100%"}},{default:l(()=>[e(c,{label:"市辖区",value:"district"}),e(c,{label:"县级市",value:"county"}),e(c,{label:"县",value:"county-level"}),e(c,{label:"自治县",value:"autonomous"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(C,{gutter:20},{default:l(()=>[e(r,{span:12},{default:l(()=>[e(m,{label:"所属区域",prop:"region"},{default:l(()=>[e($,{modelValue:u.region,"onUpdate:modelValue":a[7]||(a[7]=t=>u.region=t),placeholder:"请选择所属区域",style:{width:"100%"}},{default:l(()=>[e(c,{label:"城区",value:"urban"}),e(c,{label:"郊区",value:"suburban"}),e(c,{label:"农村",value:"rural"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{label:"邮政编码",prop:"postcode"},{default:l(()=>[e(z,{modelValue:u.postcode,"onUpdate:modelValue":a[8]||(a[8]=t=>u.postcode=t),placeholder:"请输入邮政编码"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(C,{gutter:20},{default:l(()=>[e(r,{span:12},{default:l(()=>[e(m,{label:"人口(万)",prop:"population"},{default:l(()=>[e(S,{modelValue:u.population,"onUpdate:modelValue":a[9]||(a[9]=t=>u.population=t),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{label:"面积(km²)",prop:"area"},{default:l(()=>[e(S,{modelValue:u.area,"onUpdate:modelValue":a[10]||(a[10]=t=>u.area=t),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(C,{gutter:20},{default:l(()=>[e(r,{span:12},{default:l(()=>[e(m,{label:"GDP(亿元)",prop:"gdp"},{default:l(()=>[e(S,{modelValue:u.gdp,"onUpdate:modelValue":a[11]||(a[11]=t=>u.gdp=t),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{label:"企业数量",prop:"companies"},{default:l(()=>[e(S,{modelValue:u.companies,"onUpdate:modelValue":a[12]||(a[12]=t=>u.companies=t),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(C,{gutter:20},{default:l(()=>[e(r,{span:12},{default:l(()=>[e(m,{label:"区县状态",prop:"status"},{default:l(()=>[e($,{modelValue:u.status,"onUpdate:modelValue":a[13]||(a[13]=t=>u.status=t),placeholder:"请选择区县状态",style:{width:"100%"}},{default:l(()=>[e(c,{label:"正常",value:"normal"}),e(c,{label:"发展中",value:"developing"}),e(c,{label:"待开发",value:"pending"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{label:"成立时间",prop:"establishDate"},{default:l(()=>[e(ce,{modelValue:u.establishDate,"onUpdate:modelValue":a[14]||(a[14]=t=>u.establishDate=t),type:"date",placeholder:"选择成立时间",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,{label:"地理位置",prop:"location"},{default:l(()=>[e(z,{modelValue:u.location,"onUpdate:modelValue":a[15]||(a[15]=t=>u.location=t),placeholder:"请输入地理位置描述"},null,8,["modelValue"])]),_:1}),e(m,{label:"区县描述",prop:"description"},{default:l(()=>[e(z,{modelValue:u.description,"onUpdate:modelValue":a[16]||(a[16]=t=>u.description=t),type:"textarea",rows:3,placeholder:"请输入区县描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),e(L,{modelValue:O.value,"onUpdate:modelValue":a[19]||(a[19]=t=>O.value=t),title:"区县详情",width:"800px"},{default:l(()=>[p.value?(j(),M("div",ll,[e(ve,{column:2,border:""},{default:l(()=>[e(v,{label:"区县名称"},{default:l(()=>[i(s(p.value.name),1)]),_:1}),e(v,{label:"行政级别"},{default:l(()=>[e(P,{type:A(p.value.level)},{default:l(()=>[i(s(I(p.value.level)),1)]),_:1},8,["type"])]),_:1}),e(v,{label:"所属区域"},{default:l(()=>[e(P,{type:R(p.value.region)},{default:l(()=>[i(s(J(p.value.region)),1)]),_:1},8,["type"])]),_:1}),e(v,{label:"邮政编码"},{default:l(()=>[i(s(p.value.postcode),1)]),_:1}),e(v,{label:"人口"},{default:l(()=>[i(s(p.value.population)+"万人",1)]),_:1}),e(v,{label:"面积"},{default:l(()=>[i(s(p.value.area)+" km²",1)]),_:1}),e(v,{label:"GDP"},{default:l(()=>[i(s(p.value.gdp)+"亿元",1)]),_:1}),e(v,{label:"企业数量"},{default:l(()=>[i(s(p.value.companies)+"家",1)]),_:1}),e(v,{label:"区县状态"},{default:l(()=>[e(P,{type:Y(p.value.status)},{default:l(()=>[i(s(F(p.value.status)),1)]),_:1},8,["type"])]),_:1}),e(v,{label:"成立时间"},{default:l(()=>[i(s(p.value.establishDate),1)]),_:1}),e(v,{label:"地理位置",span:2},{default:l(()=>[i(s(p.value.location),1)]),_:1}),e(v,{label:"区县描述",span:2},{default:l(()=>[i(s(p.value.description||"暂无描述"),1)]),_:1})]),_:1})])):ze("",!0)]),_:1},8,["modelValue"])])}}},ul=ge(al,[["__scopeId","data-v-b9520e4d"]]);export{ul as default};
