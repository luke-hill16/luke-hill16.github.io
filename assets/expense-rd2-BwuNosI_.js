import{ref as e,computed as a,onMounted as t,resolveComponent as l,openBlock as i,createElementBlock as p,createVNode as r,withCtx as n,createElementVNode as o,createTextVNode as s,toDisplayString as d,createBlock as u,createCommentVNode as c,Fragment as m,renderList as _}from"vue";import{ElMessage as y,ElMessageBox as f}from"element-plus";import{_ as v}from"./_plugin-vue_export-helper-BCo6x5W8.js";const w={class:"rd-expense-container"},b={class:"header"},k={class:"header-actions"},g={class:"tab-content"},h=["onClick"],C={class:"amount"},j={class:"tab-content"},x=["onClick"],N={class:"amount"},z={class:"tab-content"},T=["onClick"],V={class:"amount"},U={class:"tab-content"},L=["onClick"],S={class:"amount"},q={class:"tab-content"},B=["onClick"],F={class:"amount"},P={class:"tab-content"},I=["onClick"],A={class:"amount"},R={class:"tab-content"},$=["onClick"],G={class:"amount"},M={class:"tab-content"},D=["onClick"],E={class:"amount"},H={key:0,class:"expense-detail"},J={class:"card-header"},K={class:"detail-item"},O={class:"detail-item"},Q={class:"detail-item"},W={class:"amount"},X={class:"detail-item"},Y={class:"detail-item"},Z={class:"detail-item"},ee={class:"detail-item"},ae={class:"content-text"},te={class:"timeline-content"},le={class:"timeline-title"},ie={class:"timeline-user"},pe={key:0,class:"timeline-comment"},re={class:"dialog-footer"},ne={class:"dialog-footer"},oe={class:"statistics-content"},se={class:"stat-number"},de={class:"stat-number"},ue={class:"stat-number"},ce={class:"stat-number"},me=v({__name:"expense-rd2",setup(v){const me=e("material"),_e=e([]),ye=e(!1),fe=e(null),ve=e(!1),we=e("申请费用"),be=e(null),ke=e(!1),ge=e(null),he=e(!1),Ce=e([]),je=[{id:"exp001",projectName:"AI算法优化项目",type:"material",amount:25e3,status:"pending",applicant:"张工程师",department:"技术部",applyTime:"2024-01-15 09:00:00",approver:"",description:"购买高性能GPU服务器用于AI模型训练，包括材料、燃料和动力费用。"},{id:"exp002",projectName:"新材料研发项目",type:"material",amount:18e3,status:"approved",applicant:"李研究员",department:"研发部",applyTime:"2024-01-14 14:30:00",approver:"王经理",description:"研发新材料的原材料采购费用。"},{id:"exp003",projectName:"移动端开发项目",type:"personnel",amount:15e4,status:"approved",applicant:"李开发",department:"技术部",applyTime:"2024-01-14 14:30:00",approver:"王经理",description:"研发人员工资、奖金、津贴、补贴、社会保险费、住房公积金等人工费用。"},{id:"exp004",projectName:"外聘专家咨询",type:"personnel",amount:5e4,status:"paid",applicant:"陈主管",department:"人事部",applyTime:"2024-01-13 11:20:00",approver:"刘总监",description:"外聘研发专家的劳务费用。"},{id:"exp005",projectName:"产品设计项目",type:"depreciation",amount:8e4,status:"paid",applicant:"陈设计师",department:"设计部",applyTime:"2024-01-13 11:20:00",approver:"刘总监",description:"用于研发活动的仪器、设备、房屋等固定资产的折旧费。"},{id:"exp006",projectName:"实验室设备租赁",type:"depreciation",amount:3e4,status:"approved",applicant:"赵研究员",department:"研发部",applyTime:"2024-01-12 16:45:00",approver:"孙经理",description:"实验室设备租赁费用。"},{id:"exp007",projectName:"软件系统开发",type:"intangible",amount:45e3,status:"approved",applicant:"赵研究员",department:"研发部",applyTime:"2024-01-12 16:45:00",approver:"孙经理",description:"用于研发活动的软件、专利权、非专利技术等无形资产的摊销费用。"},{id:"exp008",projectName:"专利技术购买",type:"intangible",amount:12e4,status:"pending",applicant:"钱工程师",department:"研发部",applyTime:"2024-01-11 10:30:00",approver:"",description:"购买相关专利技术的摊销费用。"},{id:"exp009",projectName:"新产品试制",type:"testing",amount:35e3,status:"pending",applicant:"钱工程师",department:"研发部",applyTime:"2024-01-11 10:30:00",approver:"",description:"用于中间试验和产品试制的模具、工艺装备开发及制造费，设备调整及检验费。"},{id:"exp010",projectName:"样品制作检验",type:"testing",amount:15e3,status:"approved",applicant:"孙工程师",department:"研发部",applyTime:"2024-01-10 15:20:00",approver:"李总监",description:"样品、样机及一般测试手段购置费，试制产品的检验费等。"},{id:"exp011",projectName:"专利申请项目",type:"intellectual",amount:12e3,status:"paid",applicant:"孙律师",department:"法务部",applyTime:"2024-01-10 15:20:00",approver:"李总监",description:"研发成果的论证、评审、验收、评估以及知识产权的申请费、注册费、代理费等费用。"},{id:"exp012",projectName:"技术成果评估",type:"intellectual",amount:8e3,status:"approved",applicant:"周工程师",department:"技术部",applyTime:"2024-01-09 09:15:00",approver:"王总监",description:"技术成果的评估和认证费用。"},{id:"exp013",projectName:"技术合作开发",type:"outsourcing",amount:2e5,status:"approved",applicant:"周经理",department:"技术部",applyTime:"2024-01-09 09:15:00",approver:"王总监",description:"通过外包、合作研发等方式，委托其他单位、个人或者与之合作进行研发而支付的费用。"},{id:"exp014",projectName:"第三方研发服务",type:"outsourcing",amount:8e4,status:"pending",applicant:"吴主管",department:"人事部",applyTime:"2024-01-08 14:00:00",approver:"",description:"委托第三方机构进行专项研发服务。"},{id:"exp015",projectName:"技术培训会议",type:"other",amount:8e3,status:"rejected",applicant:"吴主管",department:"人事部",applyTime:"2024-01-08 14:00:00",approver:"陈经理",description:"与研发活动直接相关的其他费用，包括技术图书资料费、会议费、差旅费、研发人员培训费等。"},{id:"exp016",projectName:"技术资料翻译",type:"other",amount:5e3,status:"approved",applicant:"郑翻译",department:"技术部",applyTime:"2024-01-07 16:30:00",approver:"张经理",description:"技术资料翻译费用。"}],xe=e([{action:"提交申请",user:"张工程师",department:"技术部",time:"2024-01-15 09:00:00",type:"submit"}]),Ne=e({projectName:"",type:"",amount:0,description:""}),ze=e({result:"approve",comment:""}),Te={projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}],type:[{required:!0,message:"请选择费用类型",trigger:"change"}],amount:[{required:!0,message:"请输入申请金额",trigger:"blur"}],description:[{required:!0,message:"请输入费用说明",trigger:"blur"}]},Ve={result:[{required:!0,message:"请选择审批结果",trigger:"change"}],comment:[{required:!0,message:"请输入审批意见",trigger:"blur"}]},Ue=a((()=>_e.value.filter((e=>e.type===me.value)))),Le=a((()=>_e.value.reduce(((e,a)=>e+a.amount),0))),Se=a((()=>_e.value.filter((e=>"pending"===e.status)).length)),qe=a((()=>_e.value.filter((e=>"approved"===e.status)).length)),Be=a((()=>_e.value.filter((e=>"paid"===e.status)).length)),Fe=e=>{},Pe=e=>({material:"材料燃料动力费",personnel:"人工费用",depreciation:"固定资产费用",intangible:"无形资产费用",testing:"试验费用",intellectual:"研发成果费用",outsourcing:"外包合作费用",other:"其他相关费用"}[e]||"未知类型"),Ie=async()=>{try{await new Promise((e=>setTimeout(e,500))),_e.value=je,y.success("费用列表加载成功")}catch(e){y.error("获取费用列表失败")}},Ae=()=>{Ie()},Re=()=>{we.value="申请费用",Ne.value={projectName:"",type:me.value,amount:0,description:""},Ce.value=[],ve.value=!0},$e=async()=>{try{await be.value.validate(),await new Promise((e=>setTimeout(e,1e3))),y.success("申请费用"===we.value?"费用申请提交成功":"费用信息更新成功"),ve.value=!1,Ie()}catch(e){y.error("表单验证失败")}},Ge=async e=>{try{await f.confirm(`确定要删除费用申请"${e.projectName}"吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),_e.value=_e.value.filter((a=>a.id!==e.id)),y.success("删除成功")}catch{y.info("已取消删除")}},Me=e=>{fe.value=e,ye.value=!0,Ke(e.id)},De=e=>{fe.value=e,ze.value={result:"approve",comment:""},ke.value=!0},Ee=async()=>{try{await ge.value.validate(),await new Promise((e=>setTimeout(e,1e3)));const e=_e.value.find((e=>e.id===fe.value.id));e&&(e.status="approve"===ze.value.result?"approved":"rejected",e.approver="当前用户"),y.success("审批完成"),ke.value=!1,Ie()}catch(e){y.error("表单验证失败")}},He=async e=>{try{await f.confirm(`确定要支付费用"${e.projectName}"吗？`,"确认支付",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),e.status="paid",y.success("支付成功")}catch{y.info("已取消支付")}},Je=()=>{he.value=!0},Ke=e=>{xe.value=[{action:"提交申请",user:"张工程师",department:"技术部",time:"2024-01-15 09:00:00",type:"submit"}]},Oe=(e,a)=>{},Qe=()=>{ye.value=!1,fe.value=null,xe.value=[]},We=()=>{var e;ve.value=!1,null==(e=be.value)||e.resetFields(),Ce.value=[]},Xe=()=>{var e;ke.value=!1,null==(e=ge.value)||e.resetFields()},Ye=()=>{he.value=!1};return t(Ie),(e,a)=>{const t=l("el-button"),y=l("el-table-column"),f=l("el-tag"),v=l("el-table"),_e=l("el-tab-pane"),je=l("el-tabs"),Ie=l("el-card"),Ke=l("el-col"),Ze=l("el-row"),ea=l("el-timeline-item"),aa=l("el-timeline"),ta=l("el-dialog"),la=l("el-input"),ia=l("el-form-item"),pa=l("el-option"),ra=l("el-select"),na=l("el-input-number"),oa=l("el-upload"),sa=l("el-form"),da=l("el-radio"),ua=l("el-radio-group");return i(),p("div",w,[r(Ie,null,{default:n((()=>[o("div",b,[a[17]||(a[17]=o("span",null,"研发费用管理",-1)),o("div",k,[r(t,{type:"primary",onClick:Re,size:"small"},{default:n((()=>a[14]||(a[14]=[s("申请费用")]))),_:1,__:[14]}),r(t,{type:"success",onClick:Ae,size:"small"},{default:n((()=>a[15]||(a[15]=[s("刷新")]))),_:1,__:[15]}),r(t,{type:"info",onClick:Je,size:"small"},{default:n((()=>a[16]||(a[16]=[s("费用统计")]))),_:1,__:[16]})])]),r(je,{modelValue:me.value,"onUpdate:modelValue":a[0]||(a[0]=e=>me.value=e),type:"card",onTabClick:Fe,class:"expense-tabs"},{default:n((()=>[r(_e,{label:"材料燃料动力费",name:"material"},{default:n((()=>[o("div",g,[a[26]||(a[26]=o("div",{class:"tab-description"},[o("h4",null,"研发活动直接消耗的材料、燃料和动力费用"),o("p",null,"包括研发过程中消耗的原材料、辅助材料、燃料、动力等费用")],-1)),r(v,{data:Ue.value,style:{width:"100%"},fit:"true"},{default:n((()=>[r(y,{prop:"projectName",label:"项目名称","min-width":"150"},{default:n((e=>[o("span",{class:"clickable-title",onClick:a=>Me(e.row)},d(e.row.projectName),9,h)])),_:1}),r(y,{prop:"amount",label:"金额","min-width":"120"},{default:n((e=>[o("span",C,"¥"+d(e.row.amount.toLocaleString()),1)])),_:1}),r(y,{prop:"status",label:"状态","min-width":"100"},{default:n((e=>["pending"===e.row.status?(i(),u(f,{key:0,type:"warning"},{default:n((()=>a[18]||(a[18]=[s("待审批")]))),_:1,__:[18]})):"approved"===e.row.status?(i(),u(f,{key:1,type:"success"},{default:n((()=>a[19]||(a[19]=[s("已通过")]))),_:1,__:[19]})):"rejected"===e.row.status?(i(),u(f,{key:2,type:"danger"},{default:n((()=>a[20]||(a[20]=[s("已拒绝")]))),_:1,__:[20]})):"paid"===e.row.status?(i(),u(f,{key:3,type:"primary"},{default:n((()=>a[21]||(a[21]=[s("已支付")]))),_:1,__:[21]})):c("",!0)])),_:1}),r(y,{prop:"applicant",label:"申请人","min-width":"120"}),r(y,{prop:"department",label:"部门","min-width":"120"}),r(y,{prop:"applyTime",label:"申请时间","min-width":"150"}),r(y,{prop:"approver",label:"审批人","min-width":"120"}),r(y,{label:"操作","min-width":"200",fixed:"right"},{default:n((e=>[r(t,{size:"small",type:"primary",onClick:a=>Me(e.row)},{default:n((()=>a[22]||(a[22]=[s("查看")]))),_:2,__:[22]},1032,["onClick"]),"pending"===e.row.status?(i(),u(t,{key:0,size:"small",type:"success",onClick:a=>De(e.row)},{default:n((()=>a[23]||(a[23]=[s("审批")]))),_:2,__:[23]},1032,["onClick"])):c("",!0),"approved"===e.row.status?(i(),u(t,{key:1,size:"small",type:"warning",onClick:a=>He(e.row)},{default:n((()=>a[24]||(a[24]=[s("支付")]))),_:2,__:[24]},1032,["onClick"])):c("",!0),r(t,{size:"small",type:"danger",onClick:a=>Ge(e.row)},{default:n((()=>a[25]||(a[25]=[s("删除")]))),_:2,__:[25]},1032,["onClick"])])),_:1})])),_:1},8,["data"])])])),_:1}),r(_e,{label:"人工费用",name:"personnel"},{default:n((()=>[o("div",j,[a[35]||(a[35]=o("div",{class:"tab-description"},[o("h4",null,"企业在职研发人员的工资、奖金、津贴、补贴、社会保险费、住房公积金等人工费用以及外聘研发人员的劳务费用"),o("p",null,"包括研发人员的各项薪酬福利和外聘人员费用")],-1)),r(v,{data:Ue.value,style:{width:"100%"},fit:"true"},{default:n((()=>[r(y,{prop:"projectName",label:"项目名称","min-width":"150"},{default:n((e=>[o("span",{class:"clickable-title",onClick:a=>Me(e.row)},d(e.row.projectName),9,x)])),_:1}),r(y,{prop:"amount",label:"金额","min-width":"120"},{default:n((e=>[o("span",N,"¥"+d(e.row.amount.toLocaleString()),1)])),_:1}),r(y,{prop:"status",label:"状态","min-width":"100"},{default:n((e=>["pending"===e.row.status?(i(),u(f,{key:0,type:"warning"},{default:n((()=>a[27]||(a[27]=[s("待审批")]))),_:1,__:[27]})):"approved"===e.row.status?(i(),u(f,{key:1,type:"success"},{default:n((()=>a[28]||(a[28]=[s("已通过")]))),_:1,__:[28]})):"rejected"===e.row.status?(i(),u(f,{key:2,type:"danger"},{default:n((()=>a[29]||(a[29]=[s("已拒绝")]))),_:1,__:[29]})):"paid"===e.row.status?(i(),u(f,{key:3,type:"primary"},{default:n((()=>a[30]||(a[30]=[s("已支付")]))),_:1,__:[30]})):c("",!0)])),_:1}),r(y,{prop:"applicant",label:"申请人","min-width":"120"}),r(y,{prop:"department",label:"部门","min-width":"120"}),r(y,{prop:"applyTime",label:"申请时间","min-width":"150"}),r(y,{prop:"approver",label:"审批人","min-width":"120"}),r(y,{label:"操作","min-width":"200",fixed:"right"},{default:n((e=>[r(t,{size:"small",type:"primary",onClick:a=>Me(e.row)},{default:n((()=>a[31]||(a[31]=[s("查看")]))),_:2,__:[31]},1032,["onClick"]),"pending"===e.row.status?(i(),u(t,{key:0,size:"small",type:"success",onClick:a=>De(e.row)},{default:n((()=>a[32]||(a[32]=[s("审批")]))),_:2,__:[32]},1032,["onClick"])):c("",!0),"approved"===e.row.status?(i(),u(t,{key:1,size:"small",type:"warning",onClick:a=>He(e.row)},{default:n((()=>a[33]||(a[33]=[s("支付")]))),_:2,__:[33]},1032,["onClick"])):c("",!0),r(t,{size:"small",type:"danger",onClick:a=>Ge(e.row)},{default:n((()=>a[34]||(a[34]=[s("删除")]))),_:2,__:[34]},1032,["onClick"])])),_:1})])),_:1},8,["data"])])])),_:1}),r(_e,{label:"固定资产费用",name:"depreciation"},{default:n((()=>[o("div",z,[a[44]||(a[44]=o("div",{class:"tab-description"},[o("h4",null,"用于研发活动的仪器、设备、房屋等固定资产的折旧费或租赁费以及相关固定资产的运行维护、维修等费用"),o("p",null,"包括研发用固定资产的折旧、租赁、维护等费用")],-1)),r(v,{data:Ue.value,style:{width:"100%"},fit:"true"},{default:n((()=>[r(y,{prop:"projectName",label:"项目名称","min-width":"150"},{default:n((e=>[o("span",{class:"clickable-title",onClick:a=>Me(e.row)},d(e.row.projectName),9,T)])),_:1}),r(y,{prop:"amount",label:"金额","min-width":"120"},{default:n((e=>[o("span",V,"¥"+d(e.row.amount.toLocaleString()),1)])),_:1}),r(y,{prop:"status",label:"状态","min-width":"100"},{default:n((e=>["pending"===e.row.status?(i(),u(f,{key:0,type:"warning"},{default:n((()=>a[36]||(a[36]=[s("待审批")]))),_:1,__:[36]})):"approved"===e.row.status?(i(),u(f,{key:1,type:"success"},{default:n((()=>a[37]||(a[37]=[s("已通过")]))),_:1,__:[37]})):"rejected"===e.row.status?(i(),u(f,{key:2,type:"danger"},{default:n((()=>a[38]||(a[38]=[s("已拒绝")]))),_:1,__:[38]})):"paid"===e.row.status?(i(),u(f,{key:3,type:"primary"},{default:n((()=>a[39]||(a[39]=[s("已支付")]))),_:1,__:[39]})):c("",!0)])),_:1}),r(y,{prop:"applicant",label:"申请人","min-width":"120"}),r(y,{prop:"department",label:"部门","min-width":"120"}),r(y,{prop:"applyTime",label:"申请时间","min-width":"150"}),r(y,{prop:"approver",label:"审批人","min-width":"120"}),r(y,{label:"操作","min-width":"200",fixed:"right"},{default:n((e=>[r(t,{size:"small",type:"primary",onClick:a=>Me(e.row)},{default:n((()=>a[40]||(a[40]=[s("查看")]))),_:2,__:[40]},1032,["onClick"]),"pending"===e.row.status?(i(),u(t,{key:0,size:"small",type:"success",onClick:a=>De(e.row)},{default:n((()=>a[41]||(a[41]=[s("审批")]))),_:2,__:[41]},1032,["onClick"])):c("",!0),"approved"===e.row.status?(i(),u(t,{key:1,size:"small",type:"warning",onClick:a=>He(e.row)},{default:n((()=>a[42]||(a[42]=[s("支付")]))),_:2,__:[42]},1032,["onClick"])):c("",!0),r(t,{size:"small",type:"danger",onClick:a=>Ge(e.row)},{default:n((()=>a[43]||(a[43]=[s("删除")]))),_:2,__:[43]},1032,["onClick"])])),_:1})])),_:1},8,["data"])])])),_:1}),r(_e,{label:"无形资产费用",name:"intangible"},{default:n((()=>[o("div",U,[a[53]||(a[53]=o("div",{class:"tab-description"},[o("h4",null,"用于研发活动的软件、专利权、非专利技术等无形资产的摊销费用"),o("p",null,"包括研发用软件、专利、技术等无形资产的摊销费用")],-1)),r(v,{data:Ue.value,style:{width:"100%"},fit:"true"},{default:n((()=>[r(y,{prop:"projectName",label:"项目名称","min-width":"150"},{default:n((e=>[o("span",{class:"clickable-title",onClick:a=>Me(e.row)},d(e.row.projectName),9,L)])),_:1}),r(y,{prop:"amount",label:"金额","min-width":"120"},{default:n((e=>[o("span",S,"¥"+d(e.row.amount.toLocaleString()),1)])),_:1}),r(y,{prop:"status",label:"状态","min-width":"100"},{default:n((e=>["pending"===e.row.status?(i(),u(f,{key:0,type:"warning"},{default:n((()=>a[45]||(a[45]=[s("待审批")]))),_:1,__:[45]})):"approved"===e.row.status?(i(),u(f,{key:1,type:"success"},{default:n((()=>a[46]||(a[46]=[s("已通过")]))),_:1,__:[46]})):"rejected"===e.row.status?(i(),u(f,{key:2,type:"danger"},{default:n((()=>a[47]||(a[47]=[s("已拒绝")]))),_:1,__:[47]})):"paid"===e.row.status?(i(),u(f,{key:3,type:"primary"},{default:n((()=>a[48]||(a[48]=[s("已支付")]))),_:1,__:[48]})):c("",!0)])),_:1}),r(y,{prop:"applicant",label:"申请人","min-width":"120"}),r(y,{prop:"department",label:"部门","min-width":"120"}),r(y,{prop:"applyTime",label:"申请时间","min-width":"150"}),r(y,{prop:"approver",label:"审批人","min-width":"120"}),r(y,{label:"操作","min-width":"200",fixed:"right"},{default:n((e=>[r(t,{size:"small",type:"primary",onClick:a=>Me(e.row)},{default:n((()=>a[49]||(a[49]=[s("查看")]))),_:2,__:[49]},1032,["onClick"]),"pending"===e.row.status?(i(),u(t,{key:0,size:"small",type:"success",onClick:a=>De(e.row)},{default:n((()=>a[50]||(a[50]=[s("审批")]))),_:2,__:[50]},1032,["onClick"])):c("",!0),"approved"===e.row.status?(i(),u(t,{key:1,size:"small",type:"warning",onClick:a=>He(e.row)},{default:n((()=>a[51]||(a[51]=[s("支付")]))),_:2,__:[51]},1032,["onClick"])):c("",!0),r(t,{size:"small",type:"danger",onClick:a=>Ge(e.row)},{default:n((()=>a[52]||(a[52]=[s("删除")]))),_:2,__:[52]},1032,["onClick"])])),_:1})])),_:1},8,["data"])])])),_:1}),r(_e,{label:"试验费用",name:"testing"},{default:n((()=>[o("div",q,[a[62]||(a[62]=o("div",{class:"tab-description"},[o("h4",null,"用于中间试验和产品试制的模具、工艺装备开发及制造费,设备调整及检验费,样品、样机及一般测试手段购置费,试制产品的检验费等"),o("p",null,"包括试制、检验、测试等相关费用")],-1)),r(v,{data:Ue.value,style:{width:"100%"},fit:"true"},{default:n((()=>[r(y,{prop:"projectName",label:"项目名称","min-width":"150"},{default:n((e=>[o("span",{class:"clickable-title",onClick:a=>Me(e.row)},d(e.row.projectName),9,B)])),_:1}),r(y,{prop:"amount",label:"金额","min-width":"120"},{default:n((e=>[o("span",F,"¥"+d(e.row.amount.toLocaleString()),1)])),_:1}),r(y,{prop:"status",label:"状态","min-width":"100"},{default:n((e=>["pending"===e.row.status?(i(),u(f,{key:0,type:"warning"},{default:n((()=>a[54]||(a[54]=[s("待审批")]))),_:1,__:[54]})):"approved"===e.row.status?(i(),u(f,{key:1,type:"success"},{default:n((()=>a[55]||(a[55]=[s("已通过")]))),_:1,__:[55]})):"rejected"===e.row.status?(i(),u(f,{key:2,type:"danger"},{default:n((()=>a[56]||(a[56]=[s("已拒绝")]))),_:1,__:[56]})):"paid"===e.row.status?(i(),u(f,{key:3,type:"primary"},{default:n((()=>a[57]||(a[57]=[s("已支付")]))),_:1,__:[57]})):c("",!0)])),_:1}),r(y,{prop:"applicant",label:"申请人","min-width":"120"}),r(y,{prop:"department",label:"部门","min-width":"120"}),r(y,{prop:"applyTime",label:"申请时间","min-width":"150"}),r(y,{prop:"approver",label:"审批人","min-width":"120"}),r(y,{label:"操作","min-width":"200",fixed:"right"},{default:n((e=>[r(t,{size:"small",type:"primary",onClick:a=>Me(e.row)},{default:n((()=>a[58]||(a[58]=[s("查看")]))),_:2,__:[58]},1032,["onClick"]),"pending"===e.row.status?(i(),u(t,{key:0,size:"small",type:"success",onClick:a=>De(e.row)},{default:n((()=>a[59]||(a[59]=[s("审批")]))),_:2,__:[59]},1032,["onClick"])):c("",!0),"approved"===e.row.status?(i(),u(t,{key:1,size:"small",type:"warning",onClick:a=>He(e.row)},{default:n((()=>a[60]||(a[60]=[s("支付")]))),_:2,__:[60]},1032,["onClick"])):c("",!0),r(t,{size:"small",type:"danger",onClick:a=>Ge(e.row)},{default:n((()=>a[61]||(a[61]=[s("删除")]))),_:2,__:[61]},1032,["onClick"])])),_:1})])),_:1},8,["data"])])])),_:1}),r(_e,{label:"研发成果费用",name:"intellectual"},{default:n((()=>[o("div",P,[a[71]||(a[71]=o("div",{class:"tab-description"},[o("h4",null,"研发成果的论证、评审、验收、评估以及知识产权的申请费、注册费、代理费等费用"),o("p",null,"包括成果评估、知识产权申请等相关费用")],-1)),r(v,{data:Ue.value,style:{width:"100%"},fit:"true"},{default:n((()=>[r(y,{prop:"projectName",label:"项目名称","min-width":"150"},{default:n((e=>[o("span",{class:"clickable-title",onClick:a=>Me(e.row)},d(e.row.projectName),9,I)])),_:1}),r(y,{prop:"amount",label:"金额","min-width":"120"},{default:n((e=>[o("span",A,"¥"+d(e.row.amount.toLocaleString()),1)])),_:1}),r(y,{prop:"status",label:"状态","min-width":"100"},{default:n((e=>["pending"===e.row.status?(i(),u(f,{key:0,type:"warning"},{default:n((()=>a[63]||(a[63]=[s("待审批")]))),_:1,__:[63]})):"approved"===e.row.status?(i(),u(f,{key:1,type:"success"},{default:n((()=>a[64]||(a[64]=[s("已通过")]))),_:1,__:[64]})):"rejected"===e.row.status?(i(),u(f,{key:2,type:"danger"},{default:n((()=>a[65]||(a[65]=[s("已拒绝")]))),_:1,__:[65]})):"paid"===e.row.status?(i(),u(f,{key:3,type:"primary"},{default:n((()=>a[66]||(a[66]=[s("已支付")]))),_:1,__:[66]})):c("",!0)])),_:1}),r(y,{prop:"applicant",label:"申请人","min-width":"120"}),r(y,{prop:"department",label:"部门","min-width":"120"}),r(y,{prop:"applyTime",label:"申请时间","min-width":"150"}),r(y,{prop:"approver",label:"审批人","min-width":"120"}),r(y,{label:"操作","min-width":"200",fixed:"right"},{default:n((e=>[r(t,{size:"small",type:"primary",onClick:a=>Me(e.row)},{default:n((()=>a[67]||(a[67]=[s("查看")]))),_:2,__:[67]},1032,["onClick"]),"pending"===e.row.status?(i(),u(t,{key:0,size:"small",type:"success",onClick:a=>De(e.row)},{default:n((()=>a[68]||(a[68]=[s("审批")]))),_:2,__:[68]},1032,["onClick"])):c("",!0),"approved"===e.row.status?(i(),u(t,{key:1,size:"small",type:"warning",onClick:a=>He(e.row)},{default:n((()=>a[69]||(a[69]=[s("支付")]))),_:2,__:[69]},1032,["onClick"])):c("",!0),r(t,{size:"small",type:"danger",onClick:a=>Ge(e.row)},{default:n((()=>a[70]||(a[70]=[s("删除")]))),_:2,__:[70]},1032,["onClick"])])),_:1})])),_:1},8,["data"])])])),_:1}),r(_e,{label:"外包合作费用",name:"outsourcing"},{default:n((()=>[o("div",R,[a[80]||(a[80]=o("div",{class:"tab-description"},[o("h4",null,"通过外包、合作研发等方式,委托其他单位、个人或者与之合作进行研发而支付的费用"),o("p",null,"包括外包研发、合作开发等相关费用")],-1)),r(v,{data:Ue.value,style:{width:"100%"},fit:"true"},{default:n((()=>[r(y,{prop:"projectName",label:"项目名称","min-width":"150"},{default:n((e=>[o("span",{class:"clickable-title",onClick:a=>Me(e.row)},d(e.row.projectName),9,$)])),_:1}),r(y,{prop:"amount",label:"金额","min-width":"120"},{default:n((e=>[o("span",G,"¥"+d(e.row.amount.toLocaleString()),1)])),_:1}),r(y,{prop:"status",label:"状态","min-width":"100"},{default:n((e=>["pending"===e.row.status?(i(),u(f,{key:0,type:"warning"},{default:n((()=>a[72]||(a[72]=[s("待审批")]))),_:1,__:[72]})):"approved"===e.row.status?(i(),u(f,{key:1,type:"success"},{default:n((()=>a[73]||(a[73]=[s("已通过")]))),_:1,__:[73]})):"rejected"===e.row.status?(i(),u(f,{key:2,type:"danger"},{default:n((()=>a[74]||(a[74]=[s("已拒绝")]))),_:1,__:[74]})):"paid"===e.row.status?(i(),u(f,{key:3,type:"primary"},{default:n((()=>a[75]||(a[75]=[s("已支付")]))),_:1,__:[75]})):c("",!0)])),_:1}),r(y,{prop:"applicant",label:"申请人","min-width":"120"}),r(y,{prop:"department",label:"部门","min-width":"120"}),r(y,{prop:"applyTime",label:"申请时间","min-width":"150"}),r(y,{prop:"approver",label:"审批人","min-width":"120"}),r(y,{label:"操作","min-width":"200",fixed:"right"},{default:n((e=>[r(t,{size:"small",type:"primary",onClick:a=>Me(e.row)},{default:n((()=>a[76]||(a[76]=[s("查看")]))),_:2,__:[76]},1032,["onClick"]),"pending"===e.row.status?(i(),u(t,{key:0,size:"small",type:"success",onClick:a=>De(e.row)},{default:n((()=>a[77]||(a[77]=[s("审批")]))),_:2,__:[77]},1032,["onClick"])):c("",!0),"approved"===e.row.status?(i(),u(t,{key:1,size:"small",type:"warning",onClick:a=>He(e.row)},{default:n((()=>a[78]||(a[78]=[s("支付")]))),_:2,__:[78]},1032,["onClick"])):c("",!0),r(t,{size:"small",type:"danger",onClick:a=>Ge(e.row)},{default:n((()=>a[79]||(a[79]=[s("删除")]))),_:2,__:[79]},1032,["onClick"])])),_:1})])),_:1},8,["data"])])])),_:1}),r(_e,{label:"其他相关费用",name:"other"},{default:n((()=>[o("div",M,[a[89]||(a[89]=o("div",{class:"tab-description"},[o("h4",null,"与研发活动直接相关的其他费用，包括技术图书资料费、资料翻译费、会议费、差旅费、办公费、外事费、研发人员培训费、培养费、专家咨询费、高新科技研发保险费用等"),o("p",null,"包括研发相关的其他各项费用")],-1)),r(v,{data:Ue.value,style:{width:"100%"},fit:"true"},{default:n((()=>[r(y,{prop:"projectName",label:"项目名称","min-width":"150"},{default:n((e=>[o("span",{class:"clickable-title",onClick:a=>Me(e.row)},d(e.row.projectName),9,D)])),_:1}),r(y,{prop:"amount",label:"金额","min-width":"120"},{default:n((e=>[o("span",E,"¥"+d(e.row.amount.toLocaleString()),1)])),_:1}),r(y,{prop:"status",label:"状态","min-width":"100"},{default:n((e=>["pending"===e.row.status?(i(),u(f,{key:0,type:"warning"},{default:n((()=>a[81]||(a[81]=[s("待审批")]))),_:1,__:[81]})):"approved"===e.row.status?(i(),u(f,{key:1,type:"success"},{default:n((()=>a[82]||(a[82]=[s("已通过")]))),_:1,__:[82]})):"rejected"===e.row.status?(i(),u(f,{key:2,type:"danger"},{default:n((()=>a[83]||(a[83]=[s("已拒绝")]))),_:1,__:[83]})):"paid"===e.row.status?(i(),u(f,{key:3,type:"primary"},{default:n((()=>a[84]||(a[84]=[s("已支付")]))),_:1,__:[84]})):c("",!0)])),_:1}),r(y,{prop:"applicant",label:"申请人","min-width":"120"}),r(y,{prop:"department",label:"部门","min-width":"120"}),r(y,{prop:"applyTime",label:"申请时间","min-width":"150"}),r(y,{prop:"approver",label:"审批人","min-width":"120"}),r(y,{label:"操作","min-width":"200",fixed:"right"},{default:n((e=>[r(t,{size:"small",type:"primary",onClick:a=>Me(e.row)},{default:n((()=>a[85]||(a[85]=[s("查看")]))),_:2,__:[85]},1032,["onClick"]),"pending"===e.row.status?(i(),u(t,{key:0,size:"small",type:"success",onClick:a=>De(e.row)},{default:n((()=>a[86]||(a[86]=[s("审批")]))),_:2,__:[86]},1032,["onClick"])):c("",!0),"approved"===e.row.status?(i(),u(t,{key:1,size:"small",type:"warning",onClick:a=>He(e.row)},{default:n((()=>a[87]||(a[87]=[s("支付")]))),_:2,__:[87]},1032,["onClick"])):c("",!0),r(t,{size:"small",type:"danger",onClick:a=>Ge(e.row)},{default:n((()=>a[88]||(a[88]=[s("删除")]))),_:2,__:[88]},1032,["onClick"])])),_:1})])),_:1},8,["data"])])])),_:1})])),_:1},8,["modelValue"])])),_:1}),r(ta,{modelValue:ye.value,"onUpdate:modelValue":a[2]||(a[2]=e=>ye.value=e),title:"费用详情",width:"900px","before-close":Qe},{default:n((()=>[fe.value?(i(),p("div",H,[r(Ie,{class:"info-card",shadow:"never"},{header:n((()=>[o("div",J,[a[91]||(a[91]=o("span",null,"费用信息",-1)),r(t,{type:"primary",size:"small",onClick:a[1]||(a[1]=e=>{return a=fe.value,we.value="编辑费用",Ne.value={...a},void(ve.value=!0);var a})},{default:n((()=>a[90]||(a[90]=[s("编辑")]))),_:1,__:[90]})])])),default:n((()=>[r(Ze,{gutter:20},{default:n((()=>[r(Ke,{span:12},{default:n((()=>[o("div",K,[a[92]||(a[92]=o("label",null,"项目名称：",-1)),o("span",null,d(fe.value.projectName),1)])])),_:1}),r(Ke,{span:12},{default:n((()=>{return[o("div",O,[a[93]||(a[93]=o("label",null,"费用类型：",-1)),r(f,{type:(e=fe.value.type,{material:"primary",personnel:"success",depreciation:"warning",intangible:"info",testing:"danger",intellectual:"default",outsourcing:"primary",other:"default"}[e]||"default")},{default:n((()=>[s(d(Pe(fe.value.type)),1)])),_:1},8,["type"])])];var e})),_:1})])),_:1}),r(Ze,{gutter:20},{default:n((()=>[r(Ke,{span:12},{default:n((()=>[o("div",Q,[a[94]||(a[94]=o("label",null,"申请金额：",-1)),o("span",W,"¥"+d(fe.value.amount.toLocaleString()),1)])])),_:1}),r(Ke,{span:12},{default:n((()=>[o("div",X,[a[99]||(a[99]=o("label",null,"状态：",-1)),"pending"===fe.value.status?(i(),u(f,{key:0,type:"warning"},{default:n((()=>a[95]||(a[95]=[s("待审批")]))),_:1,__:[95]})):"approved"===fe.value.status?(i(),u(f,{key:1,type:"success"},{default:n((()=>a[96]||(a[96]=[s("已通过")]))),_:1,__:[96]})):"rejected"===fe.value.status?(i(),u(f,{key:2,type:"danger"},{default:n((()=>a[97]||(a[97]=[s("已拒绝")]))),_:1,__:[97]})):"paid"===fe.value.status?(i(),u(f,{key:3,type:"primary"},{default:n((()=>a[98]||(a[98]=[s("已支付")]))),_:1,__:[98]})):c("",!0)])])),_:1})])),_:1}),r(Ze,{gutter:20},{default:n((()=>[r(Ke,{span:12},{default:n((()=>[o("div",Y,[a[100]||(a[100]=o("label",null,"申请人：",-1)),o("span",null,d(fe.value.applicant),1)])])),_:1}),r(Ke,{span:12},{default:n((()=>[o("div",Z,[a[101]||(a[101]=o("label",null,"申请时间：",-1)),o("span",null,d(fe.value.applyTime),1)])])),_:1})])),_:1}),r(Ze,{gutter:20},{default:n((()=>[r(Ke,{span:24},{default:n((()=>[o("div",ee,[a[102]||(a[102]=o("label",null,"费用说明：",-1)),o("div",ae,d(fe.value.description),1)])])),_:1})])),_:1})])),_:1}),r(Ie,{class:"approval-card",shadow:"never"},{header:n((()=>a[103]||(a[103]=[o("div",{class:"card-header"},[o("span",null,"审批记录")],-1)]))),default:n((()=>[r(aa,null,{default:n((()=>[(i(!0),p(m,null,_(xe.value,((e,a)=>(i(),u(ea,{key:a,timestamp:e.time,type:"approve"===e.type?"success":"reject"===e.type?"danger":"primary"},{default:n((()=>[o("div",te,[o("div",le,d(e.action),1),o("div",ie,d(e.user)+" ("+d(e.department)+")",1),e.comment?(i(),p("div",pe,d(e.comment),1)):c("",!0)])])),_:2},1032,["timestamp","type"])))),128))])),_:1})])),_:1})])):c("",!0)])),_:1},8,["modelValue"]),r(ta,{modelValue:ve.value,"onUpdate:modelValue":a[8]||(a[8]=e=>ve.value=e),title:we.value,width:"800px","before-close":We},{footer:n((()=>[o("div",re,[r(t,{onClick:a[7]||(a[7]=e=>ve.value=!1)},{default:n((()=>a[106]||(a[106]=[s("取消")]))),_:1,__:[106]}),r(t,{type:"primary",onClick:$e},{default:n((()=>a[107]||(a[107]=[s("提交申请")]))),_:1,__:[107]})])])),default:n((()=>[r(sa,{model:Ne.value,rules:Te,ref_key:"expenseFormRef",ref:be,"label-width":"120px"},{default:n((()=>[r(ia,{label:"项目名称",prop:"projectName"},{default:n((()=>[r(la,{modelValue:Ne.value.projectName,"onUpdate:modelValue":a[3]||(a[3]=e=>Ne.value.projectName=e),placeholder:"请输入项目名称"},null,8,["modelValue"])])),_:1}),r(ia,{label:"费用类型",prop:"type"},{default:n((()=>[r(ra,{modelValue:Ne.value.type,"onUpdate:modelValue":a[4]||(a[4]=e=>Ne.value.type=e),placeholder:"请选择费用类型",style:{width:"100%"}},{default:n((()=>[r(pa,{label:"材料燃料动力费",value:"material"}),r(pa,{label:"人工费用",value:"personnel"}),r(pa,{label:"固定资产费用",value:"depreciation"}),r(pa,{label:"无形资产费用",value:"intangible"}),r(pa,{label:"试验费用",value:"testing"}),r(pa,{label:"研发成果费用",value:"intellectual"}),r(pa,{label:"外包合作费用",value:"outsourcing"}),r(pa,{label:"其他相关费用",value:"other"})])),_:1},8,["modelValue"])])),_:1}),r(ia,{label:"申请金额",prop:"amount"},{default:n((()=>[r(na,{modelValue:Ne.value.amount,"onUpdate:modelValue":a[5]||(a[5]=e=>Ne.value.amount=e),min:0,precision:2,step:100,style:{width:"100%"},placeholder:"请输入金额"},null,8,["modelValue"])])),_:1}),r(ia,{label:"费用说明",prop:"description"},{default:n((()=>[r(la,{modelValue:Ne.value.description,"onUpdate:modelValue":a[6]||(a[6]=e=>Ne.value.description=e),type:"textarea",rows:4,placeholder:"请详细说明费用用途和必要性"},null,8,["modelValue"])])),_:1}),r(ia,{label:"附件"},{default:n((()=>[r(oa,{class:"upload-demo",action:"#","auto-upload":!1,"on-change":Oe,"file-list":Ce.value,multiple:""},{tip:n((()=>a[105]||(a[105]=[o("div",{class:"el-upload__tip"}," 支持jpg/png/pdf/doc/docx文件，且不超过10MB ",-1)]))),default:n((()=>[r(t,{type:"primary"},{default:n((()=>a[104]||(a[104]=[s("选择文件")]))),_:1,__:[104]})])),_:1},8,["file-list"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"]),r(ta,{modelValue:ke.value,"onUpdate:modelValue":a[12]||(a[12]=e=>ke.value=e),title:"费用审批",width:"600px","before-close":Xe},{footer:n((()=>[o("div",ne,[r(t,{onClick:a[11]||(a[11]=e=>ke.value=!1)},{default:n((()=>a[110]||(a[110]=[s("取消")]))),_:1,__:[110]}),r(t,{type:"primary",onClick:Ee},{default:n((()=>a[111]||(a[111]=[s("确认审批")]))),_:1,__:[111]})])])),default:n((()=>[r(sa,{model:ze.value,rules:Ve,ref_key:"approvalFormRef",ref:ge,"label-width":"100px"},{default:n((()=>[r(ia,{label:"审批结果",prop:"result"},{default:n((()=>[r(ua,{modelValue:ze.value.result,"onUpdate:modelValue":a[9]||(a[9]=e=>ze.value.result=e)},{default:n((()=>[r(da,{label:"approve"},{default:n((()=>a[108]||(a[108]=[s("通过")]))),_:1,__:[108]}),r(da,{label:"reject"},{default:n((()=>a[109]||(a[109]=[s("拒绝")]))),_:1,__:[109]})])),_:1},8,["modelValue"])])),_:1}),r(ia,{label:"审批意见",prop:"comment"},{default:n((()=>[r(la,{modelValue:ze.value.comment,"onUpdate:modelValue":a[10]||(a[10]=e=>ze.value.comment=e),type:"textarea",rows:4,placeholder:"请输入审批意见"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),r(ta,{modelValue:he.value,"onUpdate:modelValue":a[13]||(a[13]=e=>he.value=e),title:"费用统计",width:"1000px","before-close":Ye},{default:n((()=>[o("div",oe,[r(Ze,{gutter:20,style:{"margin-bottom":"30px"}},{default:n((()=>[r(Ke,{span:6},{default:n((()=>[r(Ie,{class:"stat-card"},{default:n((()=>[o("div",se,"¥"+d(Le.value.toLocaleString()),1),a[112]||(a[112]=o("div",{class:"stat-label"},"总费用",-1))])),_:1,__:[112]})])),_:1}),r(Ke,{span:6},{default:n((()=>[r(Ie,{class:"stat-card"},{default:n((()=>[o("div",de,d(Se.value),1),a[113]||(a[113]=o("div",{class:"stat-label"},"待审批",-1))])),_:1,__:[113]})])),_:1}),r(Ke,{span:6},{default:n((()=>[r(Ie,{class:"stat-card"},{default:n((()=>[o("div",ue,d(qe.value),1),a[114]||(a[114]=o("div",{class:"stat-label"},"已通过",-1))])),_:1,__:[114]})])),_:1}),r(Ke,{span:6},{default:n((()=>[r(Ie,{class:"stat-card"},{default:n((()=>[o("div",ce,d(Be.value),1),a[115]||(a[115]=o("div",{class:"stat-label"},"已支付",-1))])),_:1,__:[115]})])),_:1})])),_:1}),r(Ze,{gutter:20},{default:n((()=>[r(Ke,{span:12},{default:n((()=>[r(Ie,null,{header:n((()=>a[116]||(a[116]=[s("费用类型分布")]))),default:n((()=>[a[117]||(a[117]=o("div",{id:"typeChart",style:{height:"300px"}},null,-1))])),_:1,__:[117]})])),_:1}),r(Ke,{span:12},{default:n((()=>[r(Ie,null,{header:n((()=>a[118]||(a[118]=[s("月度费用趋势")]))),default:n((()=>[a[119]||(a[119]=o("div",{id:"trendChart",style:{height:"300px"}},null,-1))])),_:1,__:[119]})])),_:1})])),_:1})])])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-4b996f6b"]]);export{me as default};
