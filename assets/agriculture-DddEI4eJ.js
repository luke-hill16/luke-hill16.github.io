import{_ as e,r as a,l,o as t,e as s,c as u,b as i,w as d,a as o,g as r,u as n,D as c,t as v,G as p,H as m,y as _,z as f,i as y,j as h,I as w,F as g,f as b,n as k,E as V,k as C,d as x}from"./index-C3v4GxiK.js";const U={class:"smart-agriculture-container"},z={class:"header"},T={class:"header-actions"},Y={class:"overview-content"},B={class:"overview-icon temperature"},M={class:"overview-info"},D={class:"overview-value"},R={class:"overview-content"},A={class:"overview-icon humidity"},F={class:"overview-info"},q={class:"overview-value"},L={class:"overview-content"},P={class:"overview-icon soil"},$={class:"overview-info"},j={class:"overview-value"},E={class:"overview-content"},H={class:"overview-icon light"},I={class:"overview-info"},G={class:"overview-value"},K={class:"search-section"},J=["onClick"],N={style:{"margin-left":"5px"}},O={key:0,class:"device-detail"},Q={class:"card-header"},S={class:"device-image-section"},W={class:"device-image-container"},X={class:"image-error"},Z={class:"image-overlay"},ee={class:"detail-item"},ae={class:"detail-item"},le={class:"detail-item"},te={class:"detail-item"},se={class:"detail-item"},ue={class:"detail-item"},ie={class:"detail-item"},de={class:"content-text"},oe={class:"data-item"},re={class:"data-label"},ne={class:"data-value"},ce={class:"card-header"},ve={class:"form-image-upload"},pe={key:1,class:"form-image-placeholder"},me={class:"dialog-footer"},_e={key:0,class:"control-panel"},fe={class:"control-item"},ye={key:0,class:"control-item"},he={class:"control-item"},we={class:"control-item"},ge={class:"dialog-footer"},be={class:"analytics-content"},ke={class:"stat-number"},Ve={class:"stat-number"},Ce={class:"stat-number"},xe={class:"stat-number"},Ue={class:"alerts-content"},ze={class:"alerts-header"},Te=e({__name:"agriculture",setup(e){const Te=a([]),Ye=a(!1),Be=a(null),Me=a(!1),De=a("添加设备"),Re=a(null),Ae=a(!1);a(null);const Fe=a(!1),qe=a(!1),Le=a("temperature"),Pe=a([]),$e=a([]),je=a({keyword:"",status:"",type:"",dateRange:[]}),Ee=[{id:"dev001",name:"温湿度传感器-01",type:"sensor",location:"大棚A区",status:"online",battery:85,lastUpdate:"2024-01-15 14:30:00",description:"监测大棚内温湿度变化，支持远程数据采集。",image:"https://picsum.photos/400/300?random=1"},{id:"dev002",name:"土壤传感器-01",type:"sensor",location:"大棚B区",status:"online",battery:92,lastUpdate:"2024-01-15 14:28:00",description:"监测土壤湿度和pH值，为灌溉提供数据支持。",image:"https://picsum.photos/400/300?random=2"},{id:"dev003",name:"智能灌溉控制器",type:"controller",location:"大棚A区",status:"online",battery:78,lastUpdate:"2024-01-15 14:25:00",description:"根据土壤湿度自动控制灌溉系统。",image:"https://picsum.photos/400/300?random=3"},{id:"dev004",name:"监控摄像头-01",type:"camera",location:"大棚C区",status:"offline",battery:45,lastUpdate:"2024-01-15 13:15:00",description:"24小时监控作物生长状况。",image:"https://picsum.photos/400/300?random=4"},{id:"dev005",name:"自动喷灌设备",type:"irrigation",location:"大棚B区",status:"maintenance",battery:60,lastUpdate:"2024-01-15 12:00:00",description:"自动喷灌系统，支持定时和条件触发。",image:"https://picsum.photos/400/300?random=5"}],He=a({name:"",type:"",location:"",description:"",image:"",parameters:{interval:30,threshold:80}}),Ie=a({power:!0,irrigation:!1,interval:30,threshold:80}),Ge={name:[{required:!0,message:"请输入设备名称",trigger:"blur"}],type:[{required:!0,message:"请选择设备类型",trigger:"change"}],location:[{required:!0,message:"请输入设备位置",trigger:"blur"}]},Ke=l((()=>25.6)),Je=l((()=>68.2)),Ne=l((()=>72.5)),Oe=l((()=>45e3)),Qe=l((()=>Te.value.length)),Se=l((()=>Te.value.filter((e=>"online"===e.status)).length)),We=l((()=>Te.value.filter((e=>"error"===e.status)).length)),Xe=l((()=>12580)),Ze=async()=>{try{await new Promise((e=>setTimeout(e,500))),Te.value=Ee,V.success("设备列表加载成功")}catch(e){V.error("获取设备列表失败")}},ea=()=>{Ze()},aa=()=>{De.value="添加设备",He.value={name:"",type:"",location:"",description:"",image:"",parameters:{interval:30,threshold:80}},Me.value=!0},la=async()=>{try{await Re.value.validate(),await new Promise((e=>setTimeout(e,1e3))),V.success("添加设备"===De.value?"设备添加成功":"设备信息更新成功"),Me.value=!1,Ze()}catch(e){V.error("表单验证失败")}},ta=e=>{Be.value=e,Ye.value=!0,ra(e.id)},sa=async()=>{try{await new Promise((e=>setTimeout(e,1e3))),V.success("控制指令发送成功"),Ae.value=!1,Ze()}catch(e){V.error("控制指令发送失败")}},ua=()=>{Fe.value=!0},ia=()=>{qe.value=!0,na()},da=()=>{let e=[...Ee];if(je.value.keyword){const a=je.value.keyword.toLowerCase();e=e.filter((e=>e.name.toLowerCase().includes(a)||e.location.toLowerCase().includes(a)))}je.value.status&&(e=e.filter((e=>e.status===je.value.status))),je.value.type&&(e=e.filter((e=>e.type===je.value.type))),Te.value=e,0===e.length?V.info("没有找到匹配的设备"):V.success(`找到 ${e.length} 台设备`)},oa=()=>{je.value={keyword:"",status:"",type:"",dateRange:[]},Te.value=[...Ee],V.success("搜索条件已重置")},ra=e=>{Pe.value=[{label:"温度",value:"25.6",unit:"°C",status:"normal",statusText:"正常"},{label:"湿度",value:"68.2",unit:"%",status:"normal",statusText:"正常"},{label:"土壤湿度",value:"72.5",unit:"%",status:"normal",statusText:"正常"},{label:"光照强度",value:"45000",unit:" lux",status:"normal",statusText:"正常"}]},na=()=>{$e.value=[{id:"alert001",device:"温湿度传感器-01",type:"temperature",message:"温度超过阈值：28.5°C",time:"2024-01-15 14:25:00",status:"active"},{id:"alert002",device:"监控摄像头-01",type:"device",message:"设备离线超过30分钟",time:"2024-01-15 13:15:00",status:"active"},{id:"alert003",device:"土壤传感器-01",type:"soil",message:"土壤湿度低于阈值：45%",time:"2024-01-15 12:30:00",status:"handled"}]},ca=()=>{V.info("添加告警规则功能开发中")},va=()=>{$e.value=[],V.success("所有告警已清空")},pa=e=>{},ma=e=>{},_a=()=>{Ye.value=!1,Be.value=null,Pe.value=[]},fa=()=>{var e;Me.value=!1,null==(e=Re.value)||e.resetFields()},ya=()=>{Ae.value=!1},ha=()=>{Fe.value=!1},wa=()=>{qe.value=!1},ga=e=>{const a={sensor:"https://picsum.photos/400/300?random=10",controller:"https://picsum.photos/400/300?random=11",camera:"https://picsum.photos/400/300?random=12",irrigation:"https://picsum.photos/400/300?random=13"};return a[e]||a.sensor},ba=()=>{V.info("图片上传功能开发中，当前使用默认图片")},ka=()=>{const e=["https://picsum.photos/400/300?random=20","https://picsum.photos/400/300?random=21","https://picsum.photos/400/300?random=22"];C.confirm("选择图片方式","选择图片",{confirmButtonText:"使用示例图片",cancelButtonText:"取消",type:"info"}).then((()=>{He.value.image=e[Math.floor(Math.random()*e.length)],V.success("图片已选择")})).catch((()=>{V.info("已取消选择")}))};return t(Ze),(e,a)=>{const l=x("el-button"),t=x("el-icon"),Ee=x("el-card"),Ze=x("el-col"),ra=x("el-row"),na=x("el-input"),Va=x("el-option"),Ca=x("el-select"),xa=x("el-date-picker"),Ua=x("el-table-column"),za=x("el-tag"),Ta=x("el-progress"),Ya=x("el-table"),Ba=x("el-image"),Ma=x("el-dialog"),Da=x("el-form-item"),Ra=x("el-form"),Aa=x("el-switch"),Fa=x("el-input-number");return s(),u("div",U,[i(Ee,null,{default:d((()=>[o("div",z,[a[27]||(a[27]=o("span",null,"智慧农业管理",-1)),o("div",T,[i(l,{type:"primary",onClick:aa,size:"small"},{default:d((()=>a[23]||(a[23]=[r("添加设备")]))),_:1,__:[23]}),i(l,{type:"success",onClick:ea,size:"small"},{default:d((()=>a[24]||(a[24]=[r("刷新数据")]))),_:1,__:[24]}),i(l,{type:"info",onClick:ua,size:"small"},{default:d((()=>a[25]||(a[25]=[r("数据分析")]))),_:1,__:[25]}),i(l,{type:"warning",onClick:ia,size:"small"},{default:d((()=>a[26]||(a[26]=[r("告警管理")]))),_:1,__:[26]})])]),i(ra,{gutter:20,style:{"margin-bottom":"20px"}},{default:d((()=>[i(Ze,{span:6},{default:d((()=>[i(Ee,{class:"overview-card"},{default:d((()=>[o("div",Y,[o("div",B,[i(t,null,{default:d((()=>[i(n(c))])),_:1})]),o("div",M,[o("div",D,v(Ke.value)+"°C",1),a[28]||(a[28]=o("div",{class:"overview-label"},"平均温度",-1))])])])),_:1})])),_:1}),i(Ze,{span:6},{default:d((()=>[i(Ee,{class:"overview-card"},{default:d((()=>[o("div",R,[o("div",A,[i(t,null,{default:d((()=>[i(n(p))])),_:1})]),o("div",F,[o("div",q,v(Je.value)+"%",1),a[29]||(a[29]=o("div",{class:"overview-label"},"平均湿度",-1))])])])),_:1})])),_:1}),i(Ze,{span:6},{default:d((()=>[i(Ee,{class:"overview-card"},{default:d((()=>[o("div",L,[o("div",P,[i(t,null,{default:d((()=>[i(n(p))])),_:1})]),o("div",$,[o("div",j,v(Ne.value)+"%",1),a[30]||(a[30]=o("div",{class:"overview-label"},"土壤湿度",-1))])])])),_:1})])),_:1}),i(Ze,{span:6},{default:d((()=>[i(Ee,{class:"overview-card"},{default:d((()=>[o("div",E,[o("div",H,[i(t,null,{default:d((()=>[i(n(m))])),_:1})]),o("div",I,[o("div",G,v(Oe.value)+" lux",1),a[31]||(a[31]=o("div",{class:"overview-label"},"光照强度",-1))])])])),_:1})])),_:1})])),_:1}),o("div",K,[i(ra,{gutter:20},{default:d((()=>[i(Ze,{span:6},{default:d((()=>[i(na,{modelValue:je.value.keyword,"onUpdate:modelValue":a[0]||(a[0]=e=>je.value.keyword=e),placeholder:"搜索设备名称或位置",clearable:"",onKeyup:_(da,["enter"])},{prefix:d((()=>[i(t,null,{default:d((()=>[i(n(f))])),_:1})])),_:1},8,["modelValue"])])),_:1}),i(Ze,{span:4},{default:d((()=>[i(Ca,{modelValue:je.value.status,"onUpdate:modelValue":a[1]||(a[1]=e=>je.value.status=e),placeholder:"设备状态",clearable:""},{default:d((()=>[i(Va,{label:"在线",value:"online"}),i(Va,{label:"离线",value:"offline"}),i(Va,{label:"故障",value:"error"}),i(Va,{label:"维护中",value:"maintenance"})])),_:1},8,["modelValue"])])),_:1}),i(Ze,{span:4},{default:d((()=>[i(Ca,{modelValue:je.value.type,"onUpdate:modelValue":a[2]||(a[2]=e=>je.value.type=e),placeholder:"设备类型",clearable:""},{default:d((()=>[i(Va,{label:"传感器",value:"sensor"}),i(Va,{label:"控制器",value:"controller"}),i(Va,{label:"摄像头",value:"camera"}),i(Va,{label:"灌溉设备",value:"irrigation"})])),_:1},8,["modelValue"])])),_:1}),i(Ze,{span:6},{default:d((()=>[i(xa,{modelValue:je.value.dateRange,"onUpdate:modelValue":a[3]||(a[3]=e=>je.value.dateRange=e),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1}),i(Ze,{span:4},{default:d((()=>[i(l,{type:"primary",onClick:da},{default:d((()=>a[32]||(a[32]=[r("搜索")]))),_:1,__:[32]}),i(l,{onClick:oa},{default:d((()=>a[33]||(a[33]=[r("重置")]))),_:1,__:[33]})])),_:1})])),_:1})]),i(Ya,{data:Te.value,style:{width:"100%","margin-top":"20px"},fit:"true"},{default:d((()=>[i(Ua,{prop:"name",label:"设备名称","min-width":"150"},{default:d((e=>[o("span",{class:"clickable-title",onClick:a=>ta(e.row)},v(e.row.name),9,J)])),_:1}),i(Ua,{prop:"type",label:"设备类型","min-width":"120"},{default:d((e=>["sensor"===e.row.type?(s(),y(za,{key:0,type:"primary"},{default:d((()=>a[34]||(a[34]=[r("传感器")]))),_:1,__:[34]})):"controller"===e.row.type?(s(),y(za,{key:1,type:"success"},{default:d((()=>a[35]||(a[35]=[r("控制器")]))),_:1,__:[35]})):"camera"===e.row.type?(s(),y(za,{key:2,type:"warning"},{default:d((()=>a[36]||(a[36]=[r("摄像头")]))),_:1,__:[36]})):"irrigation"===e.row.type?(s(),y(za,{key:3,type:"info"},{default:d((()=>a[37]||(a[37]=[r("灌溉设备")]))),_:1,__:[37]})):h("",!0)])),_:1}),i(Ua,{prop:"location",label:"位置","min-width":"120"}),i(Ua,{prop:"status",label:"状态","min-width":"100"},{default:d((e=>["online"===e.row.status?(s(),y(za,{key:0,type:"success"},{default:d((()=>a[38]||(a[38]=[r("在线")]))),_:1,__:[38]})):"offline"===e.row.status?(s(),y(za,{key:1,type:"danger"},{default:d((()=>a[39]||(a[39]=[r("离线")]))),_:1,__:[39]})):"error"===e.row.status?(s(),y(za,{key:2,type:"danger"},{default:d((()=>a[40]||(a[40]=[r("故障")]))),_:1,__:[40]})):"maintenance"===e.row.status?(s(),y(za,{key:3,type:"warning"},{default:d((()=>a[41]||(a[41]=[r("维护中")]))),_:1,__:[41]})):h("",!0)])),_:1}),i(Ua,{prop:"lastUpdate",label:"最后更新","min-width":"150"}),i(Ua,{prop:"battery",label:"电量","min-width":"100"},{default:d((e=>{return[i(Ta,{percentage:e.row.battery,color:(a=e.row.battery,a>80?"#67C23A":a>50?"#E6A23C":"#F56C6C"),"show-text":!1},null,8,["percentage","color"]),o("span",N,v(e.row.battery)+"%",1)];var a})),_:1}),i(Ua,{label:"操作","min-width":"200",fixed:"right"},{default:d((e=>[i(l,{size:"small",type:"primary",onClick:a=>ta(e.row)},{default:d((()=>a[42]||(a[42]=[r("查看")]))),_:2,__:[42]},1032,["onClick"]),i(l,{size:"small",type:"success",onClick:a=>{return l=e.row,Be.value=l,Ie.value={power:"online"===l.status,irrigation:!1,interval:30,threshold:80},void(Ae.value=!0);var l}},{default:d((()=>a[43]||(a[43]=[r("控制")]))),_:2,__:[43]},1032,["onClick"]),i(l,{size:"small",type:"warning",onClick:a=>{return l=e.row,void V.info(`设备 ${l.name} 已进入维护模式`);var l}},{default:d((()=>a[44]||(a[44]=[r("维护")]))),_:2,__:[44]},1032,["onClick"]),i(l,{size:"small",type:"danger",onClick:a=>(async e=>{try{await C.confirm(`确定要删除设备"${e.name}"吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),Te.value=Te.value.filter((a=>a.id!==e.id)),V.success("删除成功")}catch{V.info("已取消删除")}})(e.row)},{default:d((()=>a[45]||(a[45]=[r("删除")]))),_:2,__:[45]},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),i(Ma,{modelValue:Ye.value,"onUpdate:modelValue":a[6]||(a[6]=e=>Ye.value=e),title:"设备详情",width:"900px","before-close":_a},{default:d((()=>[Be.value?(s(),u("div",O,[i(Ee,{class:"info-card",shadow:"never"},{header:d((()=>[o("div",Q,[a[47]||(a[47]=o("span",null,"设备信息",-1)),i(l,{type:"primary",size:"small",onClick:a[4]||(a[4]=e=>{return a=Be.value,De.value="编辑设备",He.value={...a},void(Me.value=!0);var a})},{default:d((()=>a[46]||(a[46]=[r("编辑")]))),_:1,__:[46]})])])),default:d((()=>[o("div",S,[o("div",W,[i(Ba,{src:Be.value.image||ga(Be.value.type),fit:"cover",class:"device-image","preview-src-list":[Be.value.image||ga(Be.value.type)],"preview-teleported":""},{error:d((()=>[o("div",X,[i(t,null,{default:d((()=>[i(n(w))])),_:1}),a[48]||(a[48]=o("span",null,"图片加载失败",-1))])])),_:1},8,["src","preview-src-list"]),o("div",Z,[i(l,{type:"primary",size:"small",onClick:ba},{default:d((()=>a[49]||(a[49]=[r("更换图片")]))),_:1,__:[49]})])])]),i(ra,{gutter:20},{default:d((()=>[i(Ze,{span:12},{default:d((()=>[o("div",ee,[a[50]||(a[50]=o("label",null,"设备名称：",-1)),o("span",null,v(Be.value.name),1)])])),_:1}),i(Ze,{span:12},{default:d((()=>[o("div",ae,[a[55]||(a[55]=o("label",null,"设备类型：",-1)),"sensor"===Be.value.type?(s(),y(za,{key:0,type:"primary"},{default:d((()=>a[51]||(a[51]=[r("传感器")]))),_:1,__:[51]})):"controller"===Be.value.type?(s(),y(za,{key:1,type:"success"},{default:d((()=>a[52]||(a[52]=[r("控制器")]))),_:1,__:[52]})):"camera"===Be.value.type?(s(),y(za,{key:2,type:"warning"},{default:d((()=>a[53]||(a[53]=[r("摄像头")]))),_:1,__:[53]})):"irrigation"===Be.value.type?(s(),y(za,{key:3,type:"info"},{default:d((()=>a[54]||(a[54]=[r("灌溉设备")]))),_:1,__:[54]})):h("",!0)])])),_:1})])),_:1}),i(ra,{gutter:20},{default:d((()=>[i(Ze,{span:12},{default:d((()=>[o("div",le,[a[56]||(a[56]=o("label",null,"设备位置：",-1)),o("span",null,v(Be.value.location),1)])])),_:1}),i(Ze,{span:12},{default:d((()=>[o("div",te,[a[61]||(a[61]=o("label",null,"设备状态：",-1)),"online"===Be.value.status?(s(),y(za,{key:0,type:"success"},{default:d((()=>a[57]||(a[57]=[r("在线")]))),_:1,__:[57]})):"offline"===Be.value.status?(s(),y(za,{key:1,type:"danger"},{default:d((()=>a[58]||(a[58]=[r("离线")]))),_:1,__:[58]})):"error"===Be.value.status?(s(),y(za,{key:2,type:"danger"},{default:d((()=>a[59]||(a[59]=[r("故障")]))),_:1,__:[59]})):"maintenance"===Be.value.status?(s(),y(za,{key:3,type:"warning"},{default:d((()=>a[60]||(a[60]=[r("维护中")]))),_:1,__:[60]})):h("",!0)])])),_:1})])),_:1}),i(ra,{gutter:20},{default:d((()=>[i(Ze,{span:12},{default:d((()=>[o("div",se,[a[62]||(a[62]=o("label",null,"设备电量：",-1)),o("span",null,v(Be.value.battery)+"%",1)])])),_:1}),i(Ze,{span:12},{default:d((()=>[o("div",ue,[a[63]||(a[63]=o("label",null,"最后更新：",-1)),o("span",null,v(Be.value.lastUpdate),1)])])),_:1})])),_:1}),i(ra,{gutter:20},{default:d((()=>[i(Ze,{span:24},{default:d((()=>[o("div",ie,[a[64]||(a[64]=o("label",null,"设备描述：",-1)),o("div",de,v(Be.value.description),1)])])),_:1})])),_:1})])),_:1}),i(Ee,{class:"data-card",shadow:"never"},{header:d((()=>a[65]||(a[65]=[o("div",{class:"card-header"},[o("span",null,"实时数据")],-1)]))),default:d((()=>[i(ra,{gutter:20},{default:d((()=>[(s(!0),u(g,null,b(Pe.value,((e,a)=>(s(),y(Ze,{span:6,key:a},{default:d((()=>[o("div",oe,[o("div",re,v(e.label),1),o("div",ne,v(e.value)+v(e.unit),1),o("div",{class:k(["data-status",e.status])},v(e.statusText),3)])])),_:2},1024)))),128))])),_:1})])),_:1}),i(Ee,{class:"chart-card",shadow:"never"},{header:d((()=>[o("div",ce,[a[66]||(a[66]=o("span",null,"历史数据趋势",-1)),i(Ca,{modelValue:Le.value,"onUpdate:modelValue":a[5]||(a[5]=e=>Le.value=e),size:"small",style:{width:"120px"}},{default:d((()=>[i(Va,{label:"温度",value:"temperature"}),i(Va,{label:"湿度",value:"humidity"}),i(Va,{label:"土壤湿度",value:"soil"}),i(Va,{label:"光照",value:"light"})])),_:1},8,["modelValue"])])])),default:d((()=>[a[67]||(a[67]=o("div",{id:"historyChart",style:{height:"300px"}},null,-1))])),_:1,__:[67]})])):h("",!0)])),_:1},8,["modelValue"]),i(Ma,{modelValue:Me.value,"onUpdate:modelValue":a[14]||(a[14]=e=>Me.value=e),title:De.value,width:"800px","before-close":fa},{footer:d((()=>[o("div",me,[i(l,{onClick:a[13]||(a[13]=e=>Me.value=!1)},{default:d((()=>a[70]||(a[70]=[r("取消")]))),_:1,__:[70]}),i(l,{type:"primary",onClick:la},{default:d((()=>a[71]||(a[71]=[r("提交")]))),_:1,__:[71]})])])),default:d((()=>[i(Ra,{model:He.value,rules:Ge,ref_key:"deviceFormRef",ref:Re,"label-width":"120px"},{default:d((()=>[i(Da,{label:"设备名称",prop:"name"},{default:d((()=>[i(na,{modelValue:He.value.name,"onUpdate:modelValue":a[7]||(a[7]=e=>He.value.name=e),placeholder:"请输入设备名称"},null,8,["modelValue"])])),_:1}),i(Da,{label:"设备类型",prop:"type"},{default:d((()=>[i(Ca,{modelValue:He.value.type,"onUpdate:modelValue":a[8]||(a[8]=e=>He.value.type=e),placeholder:"请选择设备类型",style:{width:"100%"}},{default:d((()=>[i(Va,{label:"传感器",value:"sensor"}),i(Va,{label:"控制器",value:"controller"}),i(Va,{label:"摄像头",value:"camera"}),i(Va,{label:"灌溉设备",value:"irrigation"})])),_:1},8,["modelValue"])])),_:1}),i(Da,{label:"设备位置",prop:"location"},{default:d((()=>[i(na,{modelValue:He.value.location,"onUpdate:modelValue":a[9]||(a[9]=e=>He.value.location=e),placeholder:"请输入设备位置"},null,8,["modelValue"])])),_:1}),i(Da,{label:"设备描述",prop:"description"},{default:d((()=>[i(na,{modelValue:He.value.description,"onUpdate:modelValue":a[10]||(a[10]=e=>He.value.description=e),type:"textarea",rows:4,placeholder:"请输入设备描述"},null,8,["modelValue"])])),_:1}),i(Da,{label:"设备图片"},{default:d((()=>[o("div",ve,[He.value.image?(s(),y(Ba,{key:0,src:He.value.image,fit:"cover",class:"form-device-image","preview-src-list":[He.value.image],"preview-teleported":""},null,8,["src","preview-src-list"])):(s(),u("div",pe,[i(t,null,{default:d((()=>[i(n(w))])),_:1}),a[68]||(a[68]=o("span",null,"暂无图片",-1))])),i(l,{type:"primary",onClick:ka,style:{"margin-top":"10px"}},{default:d((()=>a[69]||(a[69]=[r(" 选择图片 ")]))),_:1,__:[69]})])])),_:1}),i(Da,{label:"设备参数"},{default:d((()=>[i(ra,{gutter:20},{default:d((()=>[i(Ze,{span:12},{default:d((()=>[i(na,{modelValue:He.value.parameters.interval,"onUpdate:modelValue":a[11]||(a[11]=e=>He.value.parameters.interval=e),placeholder:"数据采集间隔(秒)"},null,8,["modelValue"])])),_:1}),i(Ze,{span:12},{default:d((()=>[i(na,{modelValue:He.value.parameters.threshold,"onUpdate:modelValue":a[12]||(a[12]=e=>He.value.parameters.threshold=e),placeholder:"告警阈值"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"]),i(Ma,{modelValue:Ae.value,"onUpdate:modelValue":a[20]||(a[20]=e=>Ae.value=e),title:"设备控制",width:"600px","before-close":ya},{footer:d((()=>[o("div",ge,[i(l,{onClick:a[19]||(a[19]=e=>Ae.value=!1)},{default:d((()=>a[78]||(a[78]=[r("取消")]))),_:1,__:[78]}),i(l,{type:"primary",onClick:sa},{default:d((()=>a[79]||(a[79]=[r("确认控制")]))),_:1,__:[79]})])])),default:d((()=>[Be.value?(s(),u("div",_e,[i(ra,{gutter:20},{default:d((()=>[i(Ze,{span:12},{default:d((()=>[i(Ee,null,{header:d((()=>a[72]||(a[72]=[r("开关控制")]))),default:d((()=>[o("div",fe,[a[73]||(a[73]=o("span",null,"设备开关",-1)),i(Aa,{modelValue:Ie.value.power,"onUpdate:modelValue":a[15]||(a[15]=e=>Ie.value.power=e),onChange:pa},null,8,["modelValue"])]),"irrigation"===Be.value.type?(s(),u("div",ye,[a[74]||(a[74]=o("span",null,"灌溉开关",-1)),i(Aa,{modelValue:Ie.value.irrigation,"onUpdate:modelValue":a[16]||(a[16]=e=>Ie.value.irrigation=e),onChange:ma},null,8,["modelValue"])])):h("",!0)])),_:1})])),_:1}),i(Ze,{span:12},{default:d((()=>[i(Ee,null,{header:d((()=>a[75]||(a[75]=[r("参数设置")]))),default:d((()=>[o("div",he,[a[76]||(a[76]=o("span",null,"采集间隔",-1)),i(Fa,{modelValue:Ie.value.interval,"onUpdate:modelValue":a[17]||(a[17]=e=>Ie.value.interval=e),min:1,max:3600,size:"small"},null,8,["modelValue"])]),o("div",we,[a[77]||(a[77]=o("span",null,"告警阈值",-1)),i(Fa,{modelValue:Ie.value.threshold,"onUpdate:modelValue":a[18]||(a[18]=e=>Ie.value.threshold=e),min:0,max:100,size:"small"},null,8,["modelValue"])])])),_:1})])),_:1})])),_:1})])):h("",!0)])),_:1},8,["modelValue"]),i(Ma,{modelValue:Fe.value,"onUpdate:modelValue":a[21]||(a[21]=e=>Fe.value=e),title:"数据分析",width:"1200px","before-close":ha},{default:d((()=>[o("div",be,[i(ra,{gutter:20,style:{"margin-bottom":"30px"}},{default:d((()=>[i(Ze,{span:6},{default:d((()=>[i(Ee,{class:"stat-card"},{default:d((()=>[o("div",ke,v(Qe.value),1),a[80]||(a[80]=o("div",{class:"stat-label"},"设备总数",-1))])),_:1,__:[80]})])),_:1}),i(Ze,{span:6},{default:d((()=>[i(Ee,{class:"stat-card"},{default:d((()=>[o("div",Ve,v(Se.value),1),a[81]||(a[81]=o("div",{class:"stat-label"},"在线设备",-1))])),_:1,__:[81]})])),_:1}),i(Ze,{span:6},{default:d((()=>[i(Ee,{class:"stat-card"},{default:d((()=>[o("div",Ce,v(We.value),1),a[82]||(a[82]=o("div",{class:"stat-label"},"故障设备",-1))])),_:1,__:[82]})])),_:1}),i(Ze,{span:6},{default:d((()=>[i(Ee,{class:"stat-card"},{default:d((()=>[o("div",xe,v(Xe.value),1),a[83]||(a[83]=o("div",{class:"stat-label"},"数据点数",-1))])),_:1,__:[83]})])),_:1})])),_:1}),i(ra,{gutter:20},{default:d((()=>[i(Ze,{span:12},{default:d((()=>[i(Ee,null,{header:d((()=>a[84]||(a[84]=[r("设备状态分布")]))),default:d((()=>[a[85]||(a[85]=o("div",{id:"statusChart",style:{height:"300px"}},null,-1))])),_:1,__:[85]})])),_:1}),i(Ze,{span:12},{default:d((()=>[i(Ee,null,{header:d((()=>a[86]||(a[86]=[r("环境数据趋势")]))),default:d((()=>[a[87]||(a[87]=o("div",{id:"trendChart",style:{height:"300px"}},null,-1))])),_:1,__:[87]})])),_:1})])),_:1})])])),_:1},8,["modelValue"]),i(Ma,{modelValue:qe.value,"onUpdate:modelValue":a[22]||(a[22]=e=>qe.value=e),title:"告警管理",width:"1000px","before-close":wa},{default:d((()=>[o("div",Ue,[o("div",ze,[i(l,{type:"primary",onClick:ca},{default:d((()=>a[88]||(a[88]=[r("添加告警规则")]))),_:1,__:[88]}),i(l,{onClick:va},{default:d((()=>a[89]||(a[89]=[r("清空所有告警")]))),_:1,__:[89]})]),i(Ya,{data:$e.value,style:{width:"100%","margin-top":"20px"}},{default:d((()=>[i(Ua,{prop:"device",label:"设备","min-width":"120"}),i(Ua,{prop:"type",label:"告警类型","min-width":"120"},{default:d((e=>["temperature"===e.row.type?(s(),y(za,{key:0,type:"danger"},{default:d((()=>a[90]||(a[90]=[r("温度异常")]))),_:1,__:[90]})):"humidity"===e.row.type?(s(),y(za,{key:1,type:"warning"},{default:d((()=>a[91]||(a[91]=[r("湿度异常")]))),_:1,__:[91]})):"soil"===e.row.type?(s(),y(za,{key:2,type:"info"},{default:d((()=>a[92]||(a[92]=[r("土壤异常")]))),_:1,__:[92]})):"device"===e.row.type?(s(),y(za,{key:3,type:"danger"},{default:d((()=>a[93]||(a[93]=[r("设备故障")]))),_:1,__:[93]})):h("",!0)])),_:1}),i(Ua,{prop:"message",label:"告警信息","min-width":"200"}),i(Ua,{prop:"time",label:"告警时间","min-width":"150"}),i(Ua,{prop:"status",label:"状态","min-width":"100"},{default:d((e=>["active"===e.row.status?(s(),y(za,{key:0,type:"danger"},{default:d((()=>a[94]||(a[94]=[r("未处理")]))),_:1,__:[94]})):(s(),y(za,{key:1,type:"success"},{default:d((()=>a[95]||(a[95]=[r("已处理")]))),_:1,__:[95]}))])),_:1}),i(Ua,{label:"操作","min-width":"150"},{default:d((e=>[i(l,{size:"small",type:"success",onClick:a=>(e.row.status="handled",void V.success("告警已处理"))},{default:d((()=>a[96]||(a[96]=[r("处理")]))),_:2,__:[96]},1032,["onClick"]),i(l,{size:"small",type:"danger",onClick:a=>{return l=e.row,$e.value=$e.value.filter((e=>e.id!==l.id)),void V.success("告警已删除");var l}},{default:d((()=>a[97]||(a[97]=[r("删除")]))),_:2,__:[97]},1032,["onClick"])])),_:1})])),_:1},8,["data"])])])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-d51a2586"]]);export{Te as default};
