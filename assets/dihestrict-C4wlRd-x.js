import{r as C,X as L,c as fe,k as ge,z as J,A as s,P as e,H as l,I as be,G as ye,ag as d,aq as Ve,y as $,u as h,L as i,M as u,a5 as we,K as he}from"./vue-vendor-CnY5n9_A.js";import{z as F,M as De,L as Ce,l as ke,d as xe,P as Pe,r as Ue,H as Q,A as Me}from"./element-plus-B_exy3hO.js";import{_ as ze}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Se={class:"district-container"},Te={class:"page-header"},Le={class:"header-actions"},Fe={class:"overview-section"},Ge={class:"card-content"},Be={class:"card-icon primary"},qe={class:"card-info"},$e={class:"card-value"},Ie={class:"card-content"},Ne={class:"card-icon success"},je={class:"card-info"},Re={class:"card-value"},Ae={class:"card-content"},Ee={class:"card-icon warning"},Ke={class:"card-info"},Oe={class:"card-value"},He={class:"card-content"},Xe={class:"card-icon info"},Je={class:"card-info"},Qe={class:"card-value"},We={class:"search-section"},Ye={class:"district-list"},Ze={class:"pagination-container"},el={class:"dialog-footer"},ll={key:0,class:"district-detail"},tl={__name:"dihestrict",setup(al){const W=C(!1),G=C(!1),k=C(!1),B=C(!1),U=C(),p=C(null),V=L({name:"",level:"",region:""}),b=L({currentPage:1,pageSize:10,total:0}),n=L({id:null,name:"",level:"",region:"",postcode:"",population:0,area:0,gdp:0,companies:0,status:"normal",establishDate:"",location:"",description:""}),Y={name:[{required:!0,message:"请输入区县名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],level:[{required:!0,message:"请选择行政级别",trigger:"change"}],region:[{required:!0,message:"请选择所属区域",trigger:"change"}],postcode:[{pattern:/^\d{6}$/,message:"邮政编码格式不正确",trigger:"blur"}],population:[{required:!0,message:"请输入人口数量",trigger:"blur"}],area:[{required:!0,message:"请输入面积",trigger:"blur"}]},w=L({total:0,totalPopulation:0,totalGDP:0,totalCompanies:0}),v=C([{id:1,name:"朝阳区",level:"district",region:"urban",postcode:"100020",population:345.2,area:470.8,gdp:1250.5,companies:15680,status:"normal",establishDate:"1958-05-01",location:"北京市东部",description:"北京市中心城区之一，经济发达，文化繁荣",createTime:"2020-01-01 10:00:00"},{id:2,name:"海淀区",level:"district",region:"urban",postcode:"100080",population:332.1,area:431,gdp:1180.3,companies:14250,status:"normal",establishDate:"1952-09-01",location:"北京市西北部",description:"科技教育中心，中关村科技园区所在地",createTime:"2020-01-01 10:00:00"},{id:3,name:"昌平区",level:"district",region:"suburban",postcode:"102200",population:196.8,area:1343.5,gdp:680.2,companies:8560,status:"developing",establishDate:"1999-09-16",location:"北京市北部",description:"北京市重要的生态涵养区和科技创新基地",createTime:"2020-01-01 10:00:00"},{id:4,name:"密云区",level:"district",region:"rural",postcode:"101500",population:45.6,area:2229.5,gdp:180.5,companies:2340,status:"developing",establishDate:"2015-11-17",location:"北京市东北部",description:"生态涵养区，以旅游业和农业为主",createTime:"2020-01-01 10:00:00"}]),Z=fe(()=>n.id?"编辑区县":"添加区县"),I=o=>({district:"市辖区",county:"县级市","county-level":"县",autonomous:"自治县"})[o]||"未知",N=o=>({district:"primary",county:"success","county-level":"warning",autonomous:"info"})[o]||"",j=o=>({urban:"城区",suburban:"郊区",rural:"农村"})[o]||"未知",R=o=>({urban:"primary",suburban:"warning",rural:"success"})[o]||"",A=o=>({normal:"正常",developing:"发展中",pending:"待开发"})[o]||"未知",E=o=>({normal:"success",developing:"warning",pending:"info"})[o]||"",K=o=>o.toLocaleString(),ee=o=>(o/1e4).toFixed(1)+"万亿",le=()=>{n.id=null,k.value=!0},te=o=>{Object.assign(n,o),k.value=!0},ae=o=>{p.value=o,B.value=!0},oe=async o=>{try{await Me.confirm(`确定要删除区县"${o.name}"吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const t=v.value.findIndex(f=>f.id===o.id);t>-1&&(v.value.splice(t,1),q(),F.success("删除成功"))}catch{}},ne=async()=>{if(U.value)try{if(await U.value.validate(),G.value=!0,await new Promise(o=>setTimeout(o,1e3)),n.id){const o=v.value.findIndex(t=>t.id===n.id);o>-1&&(v.value[o]={...n}),F.success("编辑成功")}else{const o={...n,id:Date.now(),createTime:new Date().toLocaleString()};v.value.unshift(o),F.success("添加成功")}q(),k.value=!1,O()}catch(o){console.error("表单验证失败:",o)}finally{G.value=!1}},O=()=>{U.value&&U.value.resetFields(),Object.assign(n,{id:null,name:"",level:"",region:"",postcode:"",population:0,area:0,gdp:0,companies:0,status:"normal",establishDate:"",location:"",description:""})},x=()=>{b.currentPage=1,console.log("搜索条件:",V)},se=()=>{Object.assign(V,{name:"",level:"",region:""}),x()},ie=o=>{b.pageSize=o},de=o=>{b.currentPage=o},ue=()=>{F.success("区县数据导出成功")},q=()=>{w.total=v.value.length,w.totalPopulation=v.value.reduce((o,t)=>o+t.population,0),w.totalGDP=v.value.reduce((o,t)=>o+t.gdp,0),w.totalCompanies=v.value.reduce((o,t)=>o+t.companies,0)};return ge(()=>{q(),b.total=v.value.length}),(o,t)=>{const f=d("el-icon"),y=d("el-button"),S=d("el-card"),r=d("el-col"),D=d("el-row"),M=d("el-input"),c=d("el-option"),z=d("el-select"),g=d("el-table-column"),P=d("el-tag"),re=d("el-table"),pe=d("el-pagination"),m=d("el-form-item"),T=d("el-input-number"),ce=d("el-date-picker"),me=d("el-form"),H=d("el-dialog"),_=d("el-descriptions-item"),_e=d("el-descriptions"),ve=Ve("loading");return $(),J("div",Se,[s("div",Te,[t[22]||(t[22]=s("h2",null,"区县管理系统",-1)),s("div",Le,[e(y,{type:"success",onClick:ue},{default:l(()=>[e(f,null,{default:l(()=>[e(h(De))]),_:1}),t[20]||(t[20]=i(" 导出数据 "))]),_:1,__:[20]}),e(y,{type:"primary",onClick:le},{default:l(()=>[e(f,null,{default:l(()=>[e(h(Ce))]),_:1}),t[21]||(t[21]=i(" 添加区县 "))]),_:1,__:[21]})])]),s("div",Fe,[e(D,{gutter:20},{default:l(()=>[e(r,{span:6},{default:l(()=>[e(S,{class:"overview-card"},{default:l(()=>[s("div",Ge,[s("div",Be,[e(f,null,{default:l(()=>[e(h(ke))]),_:1})]),s("div",qe,[t[23]||(t[23]=s("div",{class:"card-title"},"区县总数",-1)),s("div",$e,u(w.total),1)])])]),_:1})]),_:1}),e(r,{span:6},{default:l(()=>[e(S,{class:"overview-card"},{default:l(()=>[s("div",Ie,[s("div",Ne,[e(f,null,{default:l(()=>[e(h(xe))]),_:1})]),s("div",je,[t[24]||(t[24]=s("div",{class:"card-title"},"总人口",-1)),s("div",Re,u(K(w.totalPopulation)),1)])])]),_:1})]),_:1}),e(r,{span:6},{default:l(()=>[e(S,{class:"overview-card"},{default:l(()=>[s("div",Ae,[s("div",Ee,[e(f,null,{default:l(()=>[e(h(Pe))]),_:1})]),s("div",Ke,[t[25]||(t[25]=s("div",{class:"card-title"},"GDP总量",-1)),s("div",Oe,u(ee(w.totalGDP)),1)])])]),_:1})]),_:1}),e(r,{span:6},{default:l(()=>[e(S,{class:"overview-card"},{default:l(()=>[s("div",He,[s("div",Xe,[e(f,null,{default:l(()=>[e(h(Ue))]),_:1})]),s("div",Je,[t[26]||(t[26]=s("div",{class:"card-title"},"企业数量",-1)),s("div",Qe,u(K(w.totalCompanies)),1)])])]),_:1})]),_:1})]),_:1})]),s("div",We,[e(D,{gutter:20},{default:l(()=>[e(r,{span:6},{default:l(()=>[e(M,{modelValue:V.name,"onUpdate:modelValue":t[0]||(t[0]=a=>V.name=a),placeholder:"区县名称",clearable:"",onClear:x,onKeyup:we(x,["enter"])},{prefix:l(()=>[e(f,null,{default:l(()=>[e(h(Q))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(r,{span:6},{default:l(()=>[e(z,{modelValue:V.level,"onUpdate:modelValue":t[1]||(t[1]=a=>V.level=a),placeholder:"行政级别",clearable:"",onChange:x},{default:l(()=>[e(c,{label:"市辖区",value:"district"}),e(c,{label:"县级市",value:"county"}),e(c,{label:"县",value:"county-level"}),e(c,{label:"自治县",value:"autonomous"})]),_:1},8,["modelValue"])]),_:1}),e(r,{span:6},{default:l(()=>[e(z,{modelValue:V.region,"onUpdate:modelValue":t[2]||(t[2]=a=>V.region=a),placeholder:"所属区域",clearable:"",onChange:x},{default:l(()=>[e(c,{label:"城区",value:"urban"}),e(c,{label:"郊区",value:"suburban"}),e(c,{label:"农村",value:"rural"})]),_:1},8,["modelValue"])]),_:1}),e(r,{span:6},{default:l(()=>[e(y,{type:"primary",onClick:x},{default:l(()=>[e(f,null,{default:l(()=>[e(h(Q))]),_:1}),t[27]||(t[27]=i(" 搜索 "))]),_:1,__:[27]}),e(y,{onClick:se},{default:l(()=>t[28]||(t[28]=[i("重置")])),_:1,__:[28]})]),_:1})]),_:1})]),s("div",Ye,[be(($(),ye(re,{data:v.value,stripe:""},{default:l(()=>[e(g,{prop:"id",label:"ID",width:"80"}),e(g,{prop:"name",label:"区县名称"}),e(g,{prop:"level",label:"行政级别",width:"120"},{default:l(a=>[e(P,{type:N(a.row.level)},{default:l(()=>[i(u(I(a.row.level)),1)]),_:2},1032,["type"])]),_:1}),e(g,{prop:"region",label:"所属区域",width:"100"},{default:l(a=>[e(P,{type:R(a.row.region)},{default:l(()=>[i(u(j(a.row.region)),1)]),_:2},1032,["type"])]),_:1}),e(g,{prop:"population",label:"人口(万)",width:"100"}),e(g,{prop:"area",label:"面积(km²)",width:"120"}),e(g,{prop:"gdp",label:"GDP(亿元)",width:"120"}),e(g,{prop:"companies",label:"企业数量",width:"100"}),e(g,{prop:"status",label:"状态",width:"100"},{default:l(a=>[e(P,{type:E(a.row.status)},{default:l(()=>[i(u(A(a.row.status)),1)]),_:2},1032,["type"])]),_:1}),e(g,{label:"操作",width:"200",fixed:"right"},{default:l(a=>[e(y,{size:"small",onClick:X=>ae(a.row)},{default:l(()=>t[29]||(t[29]=[i("查看")])),_:2,__:[29]},1032,["onClick"]),e(y,{size:"small",type:"primary",onClick:X=>te(a.row)},{default:l(()=>t[30]||(t[30]=[i("编辑")])),_:2,__:[30]},1032,["onClick"]),e(y,{size:"small",type:"danger",onClick:X=>oe(a.row)},{default:l(()=>t[31]||(t[31]=[i("删除")])),_:2,__:[31]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[ve,W.value]]),s("div",Ze,[e(pe,{"current-page":b.currentPage,"onUpdate:currentPage":t[3]||(t[3]=a=>b.currentPage=a),"page-size":b.pageSize,"onUpdate:pageSize":t[4]||(t[4]=a=>b.pageSize=a),"page-sizes":[10,20,50,100],total:b.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:ie,onCurrentChange:de},null,8,["current-page","page-size","total"])])]),e(H,{modelValue:k.value,"onUpdate:modelValue":t[18]||(t[18]=a=>k.value=a),title:Z.value,width:"700px",onClose:O},{footer:l(()=>[s("div",el,[e(y,{onClick:t[17]||(t[17]=a=>k.value=!1)},{default:l(()=>t[32]||(t[32]=[i("取消")])),_:1,__:[32]}),e(y,{type:"primary",onClick:ne,loading:G.value},{default:l(()=>t[33]||(t[33]=[i("确定")])),_:1,__:[33]},8,["loading"])])]),default:l(()=>[e(me,{model:n,rules:Y,ref_key:"districtFormRef",ref:U,"label-width":"120px"},{default:l(()=>[e(D,{gutter:20},{default:l(()=>[e(r,{span:12},{default:l(()=>[e(m,{label:"区县名称",prop:"name"},{default:l(()=>[e(M,{modelValue:n.name,"onUpdate:modelValue":t[5]||(t[5]=a=>n.name=a),placeholder:"请输入区县名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{label:"行政级别",prop:"level"},{default:l(()=>[e(z,{modelValue:n.level,"onUpdate:modelValue":t[6]||(t[6]=a=>n.level=a),placeholder:"请选择行政级别",style:{width:"100%"}},{default:l(()=>[e(c,{label:"市辖区",value:"district"}),e(c,{label:"县级市",value:"county"}),e(c,{label:"县",value:"county-level"}),e(c,{label:"自治县",value:"autonomous"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(D,{gutter:20},{default:l(()=>[e(r,{span:12},{default:l(()=>[e(m,{label:"所属区域",prop:"region"},{default:l(()=>[e(z,{modelValue:n.region,"onUpdate:modelValue":t[7]||(t[7]=a=>n.region=a),placeholder:"请选择所属区域",style:{width:"100%"}},{default:l(()=>[e(c,{label:"城区",value:"urban"}),e(c,{label:"郊区",value:"suburban"}),e(c,{label:"农村",value:"rural"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{label:"邮政编码",prop:"postcode"},{default:l(()=>[e(M,{modelValue:n.postcode,"onUpdate:modelValue":t[8]||(t[8]=a=>n.postcode=a),placeholder:"请输入邮政编码"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(D,{gutter:20},{default:l(()=>[e(r,{span:12},{default:l(()=>[e(m,{label:"人口(万)",prop:"population"},{default:l(()=>[e(T,{modelValue:n.population,"onUpdate:modelValue":t[9]||(t[9]=a=>n.population=a),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{label:"面积(km²)",prop:"area"},{default:l(()=>[e(T,{modelValue:n.area,"onUpdate:modelValue":t[10]||(t[10]=a=>n.area=a),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(D,{gutter:20},{default:l(()=>[e(r,{span:12},{default:l(()=>[e(m,{label:"GDP(亿元)",prop:"gdp"},{default:l(()=>[e(T,{modelValue:n.gdp,"onUpdate:modelValue":t[11]||(t[11]=a=>n.gdp=a),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{label:"企业数量",prop:"companies"},{default:l(()=>[e(T,{modelValue:n.companies,"onUpdate:modelValue":t[12]||(t[12]=a=>n.companies=a),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(D,{gutter:20},{default:l(()=>[e(r,{span:12},{default:l(()=>[e(m,{label:"区县状态",prop:"status"},{default:l(()=>[e(z,{modelValue:n.status,"onUpdate:modelValue":t[13]||(t[13]=a=>n.status=a),placeholder:"请选择区县状态",style:{width:"100%"}},{default:l(()=>[e(c,{label:"正常",value:"normal"}),e(c,{label:"发展中",value:"developing"}),e(c,{label:"待开发",value:"pending"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{label:"成立时间",prop:"establishDate"},{default:l(()=>[e(ce,{modelValue:n.establishDate,"onUpdate:modelValue":t[14]||(t[14]=a=>n.establishDate=a),type:"date",placeholder:"选择成立时间",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,{label:"地理位置",prop:"location"},{default:l(()=>[e(M,{modelValue:n.location,"onUpdate:modelValue":t[15]||(t[15]=a=>n.location=a),placeholder:"请输入地理位置描述"},null,8,["modelValue"])]),_:1}),e(m,{label:"区县描述",prop:"description"},{default:l(()=>[e(M,{modelValue:n.description,"onUpdate:modelValue":t[16]||(t[16]=a=>n.description=a),type:"textarea",rows:3,placeholder:"请输入区县描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),e(H,{modelValue:B.value,"onUpdate:modelValue":t[19]||(t[19]=a=>B.value=a),title:"区县详情",width:"800px"},{default:l(()=>[p.value?($(),J("div",ll,[e(_e,{column:2,border:""},{default:l(()=>[e(_,{label:"区县名称"},{default:l(()=>[i(u(p.value.name),1)]),_:1}),e(_,{label:"行政级别"},{default:l(()=>[e(P,{type:N(p.value.level)},{default:l(()=>[i(u(I(p.value.level)),1)]),_:1},8,["type"])]),_:1}),e(_,{label:"所属区域"},{default:l(()=>[e(P,{type:R(p.value.region)},{default:l(()=>[i(u(j(p.value.region)),1)]),_:1},8,["type"])]),_:1}),e(_,{label:"邮政编码"},{default:l(()=>[i(u(p.value.postcode),1)]),_:1}),e(_,{label:"人口"},{default:l(()=>[i(u(p.value.population)+"万人",1)]),_:1}),e(_,{label:"面积"},{default:l(()=>[i(u(p.value.area)+" km²",1)]),_:1}),e(_,{label:"GDP"},{default:l(()=>[i(u(p.value.gdp)+"亿元",1)]),_:1}),e(_,{label:"企业数量"},{default:l(()=>[i(u(p.value.companies)+"家",1)]),_:1}),e(_,{label:"区县状态"},{default:l(()=>[e(P,{type:E(p.value.status)},{default:l(()=>[i(u(A(p.value.status)),1)]),_:1},8,["type"])]),_:1}),e(_,{label:"成立时间"},{default:l(()=>[i(u(p.value.establishDate),1)]),_:1}),e(_,{label:"地理位置",span:2},{default:l(()=>[i(u(p.value.location),1)]),_:1}),e(_,{label:"区县描述",span:2},{default:l(()=>[i(u(p.value.description||"暂无描述"),1)]),_:1})]),_:1})])):he("",!0)]),_:1},8,["modelValue"])])}}},il=ze(tl,[["__scopeId","data-v-b9520e4d"]]);export{il as default};
