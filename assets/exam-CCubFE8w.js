import{ref as e,onMounted as l,resolveComponent as a,openBlock as t,createElementBlock as i,createVNode as r,withCtx as u,createElementVNode as d,createTextVNode as s,toDisplayString as o,createBlock as n,createCommentVNode as p}from"vue";import{ElMessage as c,ElMessageBox as m}from"element-plus";import{_ as f}from"./_plugin-vue_export-helper-BCo6x5W8.js";const _={class:"exam-container"},y={class:"header"},v={class:"header-actions"},w=["onClick"],h={key:0,class:"exam-detail"},b={class:"card-header"},g={class:"detail-item"},k={class:"detail-item"},T={class:"detail-item"},V={class:"detail-item"},x={class:"detail-item"},C={class:"detail-item"},S={class:"detail-item"},z={class:"detail-item"},q={class:"detail-item"},U={class:"card-header"},$={class:"header-actions"},B={class:"card-header"},F={class:"header-actions"},P={class:"dialog-footer"},j=f({__name:"exam",setup(f){const j=e([]),I=e(!1),R=e(null),A=e(!1),D=e("创建考试"),E=e(null),G=[{id:"exam001",title:"安全生产知识考试",category:"安全培训",duration:60,totalScore:100,passScore:60,status:"进行中",startTime:"2024-01-15 09:00:00",endTime:"2024-01-20 18:00:00",description:"本次考试主要考察员工对安全生产知识的掌握程度，包括安全操作规程、应急处理等内容。"},{id:"exam002",title:"公司制度学习考试",category:"制度学习",duration:45,totalScore:100,passScore:70,status:"已结束",startTime:"2024-01-10 09:00:00",endTime:"2024-01-12 18:00:00",description:"考察员工对公司各项制度的了解程度，包括人事制度、财务制度、行政制度等。"},{id:"exam003",title:"专业技能考核",category:"技能考核",duration:90,totalScore:100,passScore:80,status:"未开始",startTime:"2024-01-25 09:00:00",endTime:"2024-01-30 18:00:00",description:"针对技术部门员工的专业技能考核，包括编程能力、系统设计等。"}],H=e([{id:"q001",order:1,type:"单选题",content:"在发生火灾时，以下哪种做法是正确的？",score:10,difficulty:"简单"},{id:"q002",order:2,type:"多选题",content:"以下哪些是安全生产的基本原则？",score:15,difficulty:"中等"},{id:"q003",order:3,type:"判断题",content:"员工在工作时必须佩戴安全帽。",score:5,difficulty:"简单"}]),J=e([{id:"p001",realname:"张三",department:"技术部",status:"已完成",score:85,startTime:"2024-01-15 10:30:00",endTime:"2024-01-15 11:25:00"},{id:"p002",realname:"李四",department:"人事部",status:"进行中",score:null,startTime:"2024-01-15 14:20:00",endTime:null},{id:"p003",realname:"王五",department:"财务部",status:"未开始",score:null,startTime:null,endTime:null}]),K=e({title:"",category:"",duration:60,totalScore:100,passScore:60,startTime:"",endTime:"",description:""}),L={title:[{required:!0,message:"请输入考试标题",trigger:"blur"}],category:[{required:!0,message:"请选择考试类别",trigger:"change"}],duration:[{required:!0,message:"请输入考试时长",trigger:"blur"}],totalScore:[{required:!0,message:"请输入总分",trigger:"blur"}],passScore:[{required:!0,message:"请输入及格分",trigger:"blur"}],startTime:[{required:!0,message:"请选择开始时间",trigger:"change"}],endTime:[{required:!0,message:"请选择结束时间",trigger:"change"}]},M=async()=>{try{await new Promise((e=>setTimeout(e,500))),j.value=G,c.success("考试列表加载成功")}catch(e){c.error("获取考试列表失败")}},N=()=>{M()},O=()=>{D.value="创建考试",K.value={title:"",category:"",duration:60,totalScore:100,passScore:60,startTime:"",endTime:"",description:""},A.value=!0},Q=e=>{D.value="编辑考试",K.value={...e},A.value=!0},W=async()=>{try{await E.value.validate(),await new Promise((e=>setTimeout(e,1e3))),c.success("创建考试"===D.value?"考试创建成功":"考试更新成功"),A.value=!1,M()}catch(e){c.error("表单验证失败")}},X=()=>{c.info("添加题目功能")},Y=()=>{c.info("添加参与人员功能")},Z=()=>{c.success("题目列表已刷新")},ee=()=>{c.success("参与人员列表已刷新")},le=()=>{I.value=!1,R.value=null},ae=()=>{var e;A.value=!1,null==(e=E.value)||e.resetFields()};return l(M),(e,l)=>{const f=a("el-button"),G=a("el-table-column"),M=a("el-tag"),te=a("el-table"),ie=a("el-card"),re=a("el-col"),ue=a("el-row"),de=a("el-dialog"),se=a("el-input"),oe=a("el-form-item"),ne=a("el-option"),pe=a("el-select"),ce=a("el-input-number"),me=a("el-date-picker"),fe=a("el-form");return t(),i("div",_,[r(ie,null,{default:u((()=>[d("div",y,[l[14]||(l[14]=d("span",null,"员工考试管理",-1)),d("div",v,[r(f,{type:"primary",onClick:O,size:"small"},{default:u((()=>l[12]||(l[12]=[s("创建考试")]))),_:1,__:[12]}),r(f,{type:"success",onClick:N,size:"small"},{default:u((()=>l[13]||(l[13]=[s("刷新")]))),_:1,__:[13]})])]),r(te,{data:j.value,style:{width:"100%","margin-top":"20px"},fit:"true"},{default:u((()=>[r(G,{prop:"title",label:"考试标题","min-width":"200"},{default:u((e=>[d("span",{class:"clickable-title",onClick:l=>{return a=e.row,R.value=a,void(I.value=!0);var a}},o(e.row.title),9,w)])),_:1}),r(G,{prop:"category",label:"考试类别","min-width":"120"}),r(G,{prop:"duration",label:"考试时长","min-width":"100"},{default:u((e=>[d("span",null,o(e.row.duration)+"分钟",1)])),_:1}),r(G,{prop:"totalScore",label:"总分","min-width":"80"}),r(G,{prop:"passScore",label:"及格分","min-width":"80"}),r(G,{prop:"status",label:"状态","min-width":"100"},{default:u((e=>["进行中"===e.row.status?(t(),n(M,{key:0,type:"success"},{default:u((()=>[s(o(e.row.status),1)])),_:2},1024)):"已结束"===e.row.status?(t(),n(M,{key:1,type:"info"},{default:u((()=>[s(o(e.row.status),1)])),_:2},1024)):(t(),n(M,{key:2,type:"warning"},{default:u((()=>[s(o(e.row.status),1)])),_:2},1024))])),_:1}),r(G,{prop:"startTime",label:"开始时间","min-width":"150"}),r(G,{prop:"endTime",label:"结束时间","min-width":"150"}),r(G,{label:"操作","min-width":"200",fixed:"right"},{default:u((e=>[r(f,{size:"small",type:"primary",onClick:l=>Q(e.row)},{default:u((()=>l[15]||(l[15]=[s("编辑")]))),_:2,__:[15]},1032,["onClick"]),r(f,{size:"small",type:"success",onClick:l=>{return a=e.row,void c.info(`查看考试"${a.title}"的成绩`);var a}},{default:u((()=>l[16]||(l[16]=[s("查看成绩")]))),_:2,__:[16]},1032,["onClick"]),r(f,{size:"small",type:"danger",onClick:l=>(async e=>{try{await m.confirm(`确定要删除考试"${e.title}"吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),j.value=j.value.filter((l=>l.id!==e.id)),c.success("删除成功")}catch{c.info("已取消删除")}})(e.row)},{default:u((()=>l[17]||(l[17]=[s("删除")]))),_:2,__:[17]},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),r(de,{modelValue:I.value,"onUpdate:modelValue":l[1]||(l[1]=e=>I.value=e),title:"考试详情",width:"1000px","before-close":le},{default:u((()=>[R.value?(t(),i("div",h,[r(ie,{class:"info-card",shadow:"never"},{header:u((()=>[d("div",b,[l[19]||(l[19]=d("span",null,"考试信息",-1)),r(f,{type:"primary",size:"small",onClick:l[0]||(l[0]=e=>Q(R.value))},{default:u((()=>l[18]||(l[18]=[s("编辑考试")]))),_:1,__:[18]})])])),default:u((()=>[r(ue,{gutter:20},{default:u((()=>[r(re,{span:8},{default:u((()=>[d("div",g,[l[20]||(l[20]=d("label",null,"考试标题：",-1)),d("span",null,o(R.value.title),1)])])),_:1}),r(re,{span:8},{default:u((()=>[d("div",k,[l[21]||(l[21]=d("label",null,"考试类别：",-1)),d("span",null,o(R.value.category),1)])])),_:1}),r(re,{span:8},{default:u((()=>[d("div",T,[l[22]||(l[22]=d("label",null,"考试时长：",-1)),d("span",null,o(R.value.duration)+"分钟",1)])])),_:1})])),_:1}),r(ue,{gutter:20},{default:u((()=>[r(re,{span:8},{default:u((()=>[d("div",V,[l[23]||(l[23]=d("label",null,"总分：",-1)),d("span",null,o(R.value.totalScore)+"分",1)])])),_:1}),r(re,{span:8},{default:u((()=>[d("div",x,[l[24]||(l[24]=d("label",null,"及格分：",-1)),d("span",null,o(R.value.passScore)+"分",1)])])),_:1}),r(re,{span:8},{default:u((()=>[d("div",C,[l[25]||(l[25]=d("label",null,"状态：",-1)),"进行中"===R.value.status?(t(),n(M,{key:0,type:"success"},{default:u((()=>[s(o(R.value.status),1)])),_:1})):"已结束"===R.value.status?(t(),n(M,{key:1,type:"info"},{default:u((()=>[s(o(R.value.status),1)])),_:1})):(t(),n(M,{key:2,type:"warning"},{default:u((()=>[s(o(R.value.status),1)])),_:1}))])])),_:1})])),_:1}),r(ue,{gutter:20},{default:u((()=>[r(re,{span:12},{default:u((()=>[d("div",S,[l[26]||(l[26]=d("label",null,"开始时间：",-1)),d("span",null,o(R.value.startTime),1)])])),_:1}),r(re,{span:12},{default:u((()=>[d("div",z,[l[27]||(l[27]=d("label",null,"结束时间：",-1)),d("span",null,o(R.value.endTime),1)])])),_:1})])),_:1}),r(ue,{gutter:20},{default:u((()=>[r(re,{span:24},{default:u((()=>[d("div",q,[l[28]||(l[28]=d("label",null,"考试说明：",-1)),d("span",null,o(R.value.description),1)])])),_:1})])),_:1})])),_:1}),r(ie,{class:"questions-card",shadow:"never"},{header:u((()=>[d("div",U,[l[31]||(l[31]=d("span",null,"题目列表",-1)),d("div",$,[r(f,{type:"success",size:"small",onClick:X},{default:u((()=>l[29]||(l[29]=[s("添加题目")]))),_:1,__:[29]}),r(f,{type:"primary",size:"small",onClick:Z},{default:u((()=>l[30]||(l[30]=[s("刷新")]))),_:1,__:[30]})])])])),default:u((()=>[r(te,{data:H.value,style:{width:"100%"},stripe:""},{default:u((()=>[r(G,{prop:"order",label:"序号",width:"80"}),r(G,{prop:"type",label:"题型",width:"100"},{default:u((e=>["单选题"===e.row.type?(t(),n(M,{key:0,type:"primary"},{default:u((()=>[s(o(e.row.type),1)])),_:2},1024)):"多选题"===e.row.type?(t(),n(M,{key:1,type:"success"},{default:u((()=>[s(o(e.row.type),1)])),_:2},1024)):"判断题"===e.row.type?(t(),n(M,{key:2,type:"warning"},{default:u((()=>[s(o(e.row.type),1)])),_:2},1024)):(t(),n(M,{key:3,type:"info"},{default:u((()=>[s(o(e.row.type),1)])),_:2},1024))])),_:1}),r(G,{prop:"content",label:"题目内容","min-width":"300"}),r(G,{prop:"score",label:"分值",width:"80"}),r(G,{prop:"difficulty",label:"难度",width:"100"},{default:u((e=>["简单"===e.row.difficulty?(t(),n(M,{key:0,type:"success"},{default:u((()=>[s(o(e.row.difficulty),1)])),_:2},1024)):"中等"===e.row.difficulty?(t(),n(M,{key:1,type:"warning"},{default:u((()=>[s(o(e.row.difficulty),1)])),_:2},1024)):(t(),n(M,{key:2,type:"danger"},{default:u((()=>[s(o(e.row.difficulty),1)])),_:2},1024))])),_:1}),r(G,{label:"操作",width:"150",fixed:"right"},{default:u((e=>[r(f,{size:"small",type:"primary",onClick:l=>{return a=e.row,void c.info(`编辑题目: ${a.content}`);var a}},{default:u((()=>l[32]||(l[32]=[s("编辑")]))),_:2,__:[32]},1032,["onClick"]),r(f,{size:"small",type:"danger",onClick:l=>(async e=>{try{await m.confirm(`确定要删除题目"${e.content}"吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),H.value=H.value.filter((l=>l.id!==e.id)),c.success("删除成功")}catch{c.info("已取消删除")}})(e.row)},{default:u((()=>l[33]||(l[33]=[s("删除")]))),_:2,__:[33]},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),r(ie,{class:"participants-card",shadow:"never"},{header:u((()=>[d("div",B,[l[36]||(l[36]=d("span",null,"参与人员",-1)),d("div",F,[r(f,{type:"success",size:"small",onClick:Y},{default:u((()=>l[34]||(l[34]=[s("添加人员")]))),_:1,__:[34]}),r(f,{type:"primary",size:"small",onClick:ee},{default:u((()=>l[35]||(l[35]=[s("刷新")]))),_:1,__:[35]})])])])),default:u((()=>[r(te,{data:J.value,style:{width:"100%"},stripe:""},{default:u((()=>[r(G,{prop:"realname",label:"姓名",width:"120"}),r(G,{prop:"department",label:"部门",width:"120"}),r(G,{prop:"status",label:"状态",width:"100"},{default:u((e=>["已完成"===e.row.status?(t(),n(M,{key:0,type:"success"},{default:u((()=>[s(o(e.row.status),1)])),_:2},1024)):"进行中"===e.row.status?(t(),n(M,{key:1,type:"warning"},{default:u((()=>[s(o(e.row.status),1)])),_:2},1024)):(t(),n(M,{key:2,type:"info"},{default:u((()=>[s(o(e.row.status),1)])),_:2},1024))])),_:1}),r(G,{prop:"score",label:"得分",width:"100"}),r(G,{prop:"startTime",label:"开始时间","min-width":"150"}),r(G,{prop:"endTime",label:"结束时间","min-width":"150"}),r(G,{label:"操作",width:"120",fixed:"right"},{default:u((e=>[r(f,{size:"small",type:"primary",onClick:l=>{return a=e.row,void c.info(`查看${a.realname}的考试详情`);var a}},{default:u((()=>l[37]||(l[37]=[s("查看")]))),_:2,__:[37]},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1})])):p("",!0)])),_:1},8,["modelValue"]),r(de,{modelValue:A.value,"onUpdate:modelValue":l[11]||(l[11]=e=>A.value=e),title:D.value,width:"800px","before-close":ae},{footer:u((()=>[d("div",P,[r(f,{onClick:l[10]||(l[10]=e=>A.value=!1)},{default:u((()=>l[38]||(l[38]=[s("取消")]))),_:1,__:[38]}),r(f,{type:"primary",onClick:W},{default:u((()=>l[39]||(l[39]=[s("确定")]))),_:1,__:[39]})])])),default:u((()=>[r(fe,{model:K.value,rules:L,ref_key:"examFormRef",ref:E,"label-width":"120px"},{default:u((()=>[r(oe,{label:"考试标题",prop:"title"},{default:u((()=>[r(se,{modelValue:K.value.title,"onUpdate:modelValue":l[2]||(l[2]=e=>K.value.title=e),placeholder:"请输入考试标题"},null,8,["modelValue"])])),_:1}),r(oe,{label:"考试类别",prop:"category"},{default:u((()=>[r(pe,{modelValue:K.value.category,"onUpdate:modelValue":l[3]||(l[3]=e=>K.value.category=e),placeholder:"请选择考试类别",style:{width:"100%"}},{default:u((()=>[r(ne,{label:"安全培训",value:"安全培训"}),r(ne,{label:"技能考核",value:"技能考核"}),r(ne,{label:"制度学习",value:"制度学习"}),r(ne,{label:"岗位培训",value:"岗位培训"}),r(ne,{label:"其他",value:"其他"})])),_:1},8,["modelValue"])])),_:1}),r(oe,{label:"考试时长",prop:"duration"},{default:u((()=>[r(ce,{modelValue:K.value.duration,"onUpdate:modelValue":l[4]||(l[4]=e=>K.value.duration=e),min:1,max:300,placeholder:"分钟"},null,8,["modelValue"])])),_:1}),r(oe,{label:"总分",prop:"totalScore"},{default:u((()=>[r(ce,{modelValue:K.value.totalScore,"onUpdate:modelValue":l[5]||(l[5]=e=>K.value.totalScore=e),min:1,max:100,placeholder:"分"},null,8,["modelValue"])])),_:1}),r(oe,{label:"及格分",prop:"passScore"},{default:u((()=>[r(ce,{modelValue:K.value.passScore,"onUpdate:modelValue":l[6]||(l[6]=e=>K.value.passScore=e),min:1,max:K.value.totalScore,placeholder:"分"},null,8,["modelValue","max"])])),_:1}),r(oe,{label:"开始时间",prop:"startTime"},{default:u((()=>[r(me,{modelValue:K.value.startTime,"onUpdate:modelValue":l[7]||(l[7]=e=>K.value.startTime=e),type:"datetime",placeholder:"选择开始时间",style:{width:"100%"}},null,8,["modelValue"])])),_:1}),r(oe,{label:"结束时间",prop:"endTime"},{default:u((()=>[r(me,{modelValue:K.value.endTime,"onUpdate:modelValue":l[8]||(l[8]=e=>K.value.endTime=e),type:"datetime",placeholder:"选择结束时间",style:{width:"100%"}},null,8,["modelValue"])])),_:1}),r(oe,{label:"考试说明",prop:"description"},{default:u((()=>[r(se,{modelValue:K.value.description,"onUpdate:modelValue":l[9]||(l[9]=e=>K.value.description=e),type:"textarea",rows:4,placeholder:"请输入考试说明"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"])])}}},[["__scopeId","data-v-921b8b48"]]);export{j as default};
