import{r as w,c as U,k as Ke,z as M,P as t,H as l,ag as f,y as i,A as a,L as n,u as T,M as _,a5 as Ne,G as v,K as z,O as Se,a4 as qe,C as je}from"./chunk-CnY5n9_A.js";import{z as y,j as Ge,I as ee,J as Je,H as Oe,K as te,A as le}from"./chunk-K-HGTUH1.js";/* empty css              */import{_ as Qe}from"./chunk-DlAUqK2U.js";const We={class:"smart-agriculture-container"},Xe={class:"header"},Ze={class:"header-actions"},et={class:"overview-content"},tt={class:"overview-icon temperature"},lt={class:"overview-info"},at={class:"overview-value"},st={class:"overview-content"},ot={class:"overview-icon humidity"},nt={class:"overview-info"},it={class:"overview-value"},rt={class:"overview-content"},ut={class:"overview-icon soil"},dt={class:"overview-info"},vt={class:"overview-value"},pt={class:"overview-content"},mt={class:"overview-icon light"},ft={class:"overview-info"},_t={class:"overview-value"},yt={class:"search-section"},gt=["onClick"],ct={style:{"margin-left":"5px"}},wt={key:0,class:"device-detail"},bt={class:"card-header"},kt={class:"device-image-section"},Vt={class:"device-image-container"},Ct={class:"image-error"},xt={class:"image-overlay"},Dt={class:"detail-item"},Ut={class:"detail-item"},zt={class:"detail-item"},ht={class:"detail-item"},At={class:"detail-item"},Tt={class:"detail-item"},$t={class:"detail-item"},Bt={class:"content-text"},Ft={class:"data-item"},Mt={class:"data-label"},It={class:"data-value"},Yt={class:"card-header"},Rt={class:"form-image-upload"},Lt={key:1,class:"form-image-placeholder"},Pt={class:"dialog-footer"},Et={key:0,class:"control-panel"},Ht={class:"control-item"},Kt={key:0,class:"control-item"},Nt={class:"control-item"},St={class:"control-item"},qt={class:"dialog-footer"},jt={class:"analytics-content"},Gt={class:"stat-number"},Jt={class:"stat-number"},Ot={class:"stat-number"},Qt={class:"stat-number"},Wt={class:"alerts-content"},Xt={class:"alerts-header"},Zt={__name:"agriculture",setup(el){const C=w([]),R=w(!1),u=w(null),h=w(!1),L=w("添加设备"),N=w(null),$=w(!1);w(null);const P=w(!1),E=w(!1),j=w("temperature"),S=w([]),I=w([]),b=w({keyword:"",status:"",type:"",dateRange:[]}),q=[{id:"dev001",name:"温湿度传感器-01",type:"sensor",location:"大棚A区",status:"online",battery:85,lastUpdate:"2024-01-15 14:30:00",description:"监测大棚内温湿度变化，支持远程数据采集。",image:"https://picsum.photos/400/300?random=1"},{id:"dev002",name:"土壤传感器-01",type:"sensor",location:"大棚B区",status:"online",battery:92,lastUpdate:"2024-01-15 14:28:00",description:"监测土壤湿度和pH值，为灌溉提供数据支持。",image:"https://picsum.photos/400/300?random=2"},{id:"dev003",name:"智能灌溉控制器",type:"controller",location:"大棚A区",status:"online",battery:78,lastUpdate:"2024-01-15 14:25:00",description:"根据土壤湿度自动控制灌溉系统。",image:"https://picsum.photos/400/300?random=3"},{id:"dev004",name:"监控摄像头-01",type:"camera",location:"大棚C区",status:"offline",battery:45,lastUpdate:"2024-01-15 13:15:00",description:"24小时监控作物生长状况。",image:"https://picsum.photos/400/300?random=4"},{id:"dev005",name:"自动喷灌设备",type:"irrigation",location:"大棚B区",status:"maintenance",battery:60,lastUpdate:"2024-01-15 12:00:00",description:"自动喷灌系统，支持定时和条件触发。",image:"https://picsum.photos/400/300?random=5"}],m=w({name:"",type:"",location:"",description:"",image:"",parameters:{interval:30,threshold:80}}),x=w({power:!0,irrigation:!1,interval:30,threshold:80}),ae={name:[{required:!0,message:"请输入设备名称",trigger:"blur"}],type:[{required:!0,message:"请选择设备类型",trigger:"change"}],location:[{required:!0,message:"请输入设备位置",trigger:"blur"}]},se=U(()=>25.6),oe=U(()=>68.2),ne=U(()=>72.5),ie=U(()=>45e3),re=U(()=>C.value.length),ue=U(()=>C.value.filter(o=>o.status==="online").length),de=U(()=>C.value.filter(o=>o.status==="error").length),ve=U(()=>12580),H=async()=>{try{await new Promise(o=>setTimeout(o,500)),C.value=q,y.success("设备列表加载成功")}catch{y.error("获取设备列表失败")}},pe=()=>{H()},me=()=>{L.value="添加设备",m.value={name:"",type:"",location:"",description:"",image:"",parameters:{interval:30,threshold:80}},h.value=!0},fe=o=>{L.value="编辑设备",m.value={...o},h.value=!0},_e=async()=>{try{await N.value.validate(),await new Promise(o=>setTimeout(o,1e3)),y.success(L.value==="添加设备"?"设备添加成功":"设备信息更新成功"),h.value=!1,H()}catch{y.error("表单验证失败")}},ye=async o=>{try{await le.confirm(`确定要删除设备"${o.name}"吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),C.value=C.value.filter(e=>e.id!==o.id),y.success("删除成功")}catch{y.info("已取消删除")}},G=o=>{u.value=o,R.value=!0,Ce(o.id)},ge=o=>{u.value=o,x.value={power:o.status==="online",irrigation:!1,interval:30,threshold:80},$.value=!0},ce=o=>{y.info(`设备 ${o.name} 已进入维护模式`)},we=async()=>{try{await new Promise(o=>setTimeout(o,1e3)),y.success("控制指令发送成功"),$.value=!1,H()}catch{y.error("控制指令发送失败")}},be=()=>{P.value=!0},ke=()=>{E.value=!0,xe()},J=()=>{let o=[...q];if(b.value.keyword){const e=b.value.keyword.toLowerCase();o=o.filter(d=>d.name.toLowerCase().includes(e)||d.location.toLowerCase().includes(e))}b.value.status&&(o=o.filter(e=>e.status===b.value.status)),b.value.type&&(o=o.filter(e=>e.type===b.value.type)),C.value=o,o.length===0?y.info("没有找到匹配的设备"):y.success(`找到 ${o.length} 台设备`)},Ve=()=>{b.value={keyword:"",status:"",type:"",dateRange:[]},C.value=[...q],y.success("搜索条件已重置")},Ce=o=>{S.value=[{label:"温度",value:"25.6",unit:"°C",status:"normal",statusText:"正常"},{label:"湿度",value:"68.2",unit:"%",status:"normal",statusText:"正常"},{label:"土壤湿度",value:"72.5",unit:"%",status:"normal",statusText:"正常"},{label:"光照强度",value:"45000",unit:" lux",status:"normal",statusText:"正常"}]},xe=()=>{I.value=[{id:"alert001",device:"温湿度传感器-01",type:"temperature",message:"温度超过阈值：28.5°C",time:"2024-01-15 14:25:00",status:"active"},{id:"alert002",device:"监控摄像头-01",type:"device",message:"设备离线超过30分钟",time:"2024-01-15 13:15:00",status:"active"},{id:"alert003",device:"土壤传感器-01",type:"soil",message:"土壤湿度低于阈值：45%",time:"2024-01-15 12:30:00",status:"handled"}]},De=()=>{y.info("添加告警规则功能开发中")},Ue=o=>{o.status="handled",y.success("告警已处理")},ze=o=>{I.value=I.value.filter(e=>e.id!==o.id),y.success("告警已删除")},he=()=>{I.value=[],y.success("所有告警已清空")},Ae=o=>o>80?"#67C23A":o>50?"#E6A23C":"#F56C6C",Te=o=>{console.log("电源状态:",o)},$e=o=>{console.log("灌溉状态:",o)},Be=()=>{R.value=!1,u.value=null,S.value=[]},Fe=()=>{var o;h.value=!1,(o=N.value)==null||o.resetFields()},Me=()=>{$.value=!1},Ie=()=>{P.value=!1},Ye=()=>{E.value=!1},O=o=>{const e={sensor:"https://picsum.photos/400/300?random=10",controller:"https://picsum.photos/400/300?random=11",camera:"https://picsum.photos/400/300?random=12",irrigation:"https://picsum.photos/400/300?random=13"};return e[o]||e.sensor},Re=()=>{y.info("图片上传功能开发中，当前使用默认图片")},Le=()=>{const o=["https://picsum.photos/400/300?random=20","https://picsum.photos/400/300?random=21","https://picsum.photos/400/300?random=22"];le.confirm("选择图片方式","选择图片",{confirmButtonText:"使用示例图片",cancelButtonText:"取消",type:"info"}).then(()=>{m.value.image=o[Math.floor(Math.random()*o.length)],y.success("图片已选择")}).catch(()=>{y.info("已取消选择")})};return Ke(H),(o,e)=>{const d=f("el-button"),A=f("el-icon"),g=f("el-card"),r=f("el-col"),V=f("el-row"),B=f("el-input"),c=f("el-option"),K=f("el-select"),Pe=f("el-date-picker"),k=f("el-table-column"),p=f("el-tag"),Ee=f("el-progress"),Q=f("el-table"),W=f("el-image"),Y=f("el-dialog"),F=f("el-form-item"),He=f("el-form"),X=f("el-switch"),Z=f("el-input-number");return i(),M("div",We,[t(g,null,{default:l(()=>[a("div",Xe,[e[27]||(e[27]=a("span",null,"智慧农业管理",-1)),a("div",Ze,[t(d,{type:"primary",onClick:me,size:"small"},{default:l(()=>e[23]||(e[23]=[n("添加设备")])),_:1,__:[23]}),t(d,{type:"success",onClick:pe,size:"small"},{default:l(()=>e[24]||(e[24]=[n("刷新数据")])),_:1,__:[24]}),t(d,{type:"info",onClick:be,size:"small"},{default:l(()=>e[25]||(e[25]=[n("数据分析")])),_:1,__:[25]}),t(d,{type:"warning",onClick:ke,size:"small"},{default:l(()=>e[26]||(e[26]=[n("告警管理")])),_:1,__:[26]})])]),t(V,{gutter:20,style:{"margin-bottom":"20px"}},{default:l(()=>[t(r,{span:6},{default:l(()=>[t(g,{class:"overview-card"},{default:l(()=>[a("div",et,[a("div",tt,[t(A,null,{default:l(()=>[t(T(Ge))]),_:1})]),a("div",lt,[a("div",at,_(se.value)+"°C",1),e[28]||(e[28]=a("div",{class:"overview-label"},"平均温度",-1))])])]),_:1})]),_:1}),t(r,{span:6},{default:l(()=>[t(g,{class:"overview-card"},{default:l(()=>[a("div",st,[a("div",ot,[t(A,null,{default:l(()=>[t(T(ee))]),_:1})]),a("div",nt,[a("div",it,_(oe.value)+"%",1),e[29]||(e[29]=a("div",{class:"overview-label"},"平均湿度",-1))])])]),_:1})]),_:1}),t(r,{span:6},{default:l(()=>[t(g,{class:"overview-card"},{default:l(()=>[a("div",rt,[a("div",ut,[t(A,null,{default:l(()=>[t(T(ee))]),_:1})]),a("div",dt,[a("div",vt,_(ne.value)+"%",1),e[30]||(e[30]=a("div",{class:"overview-label"},"土壤湿度",-1))])])]),_:1})]),_:1}),t(r,{span:6},{default:l(()=>[t(g,{class:"overview-card"},{default:l(()=>[a("div",pt,[a("div",mt,[t(A,null,{default:l(()=>[t(T(Je))]),_:1})]),a("div",ft,[a("div",_t,_(ie.value)+" lux",1),e[31]||(e[31]=a("div",{class:"overview-label"},"光照强度",-1))])])]),_:1})]),_:1})]),_:1}),a("div",yt,[t(V,{gutter:20},{default:l(()=>[t(r,{span:6},{default:l(()=>[t(B,{modelValue:b.value.keyword,"onUpdate:modelValue":e[0]||(e[0]=s=>b.value.keyword=s),placeholder:"搜索设备名称或位置",clearable:"",onKeyup:Ne(J,["enter"])},{prefix:l(()=>[t(A,null,{default:l(()=>[t(T(Oe))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(r,{span:4},{default:l(()=>[t(K,{modelValue:b.value.status,"onUpdate:modelValue":e[1]||(e[1]=s=>b.value.status=s),placeholder:"设备状态",clearable:""},{default:l(()=>[t(c,{label:"在线",value:"online"}),t(c,{label:"离线",value:"offline"}),t(c,{label:"故障",value:"error"}),t(c,{label:"维护中",value:"maintenance"})]),_:1},8,["modelValue"])]),_:1}),t(r,{span:4},{default:l(()=>[t(K,{modelValue:b.value.type,"onUpdate:modelValue":e[2]||(e[2]=s=>b.value.type=s),placeholder:"设备类型",clearable:""},{default:l(()=>[t(c,{label:"传感器",value:"sensor"}),t(c,{label:"控制器",value:"controller"}),t(c,{label:"摄像头",value:"camera"}),t(c,{label:"灌溉设备",value:"irrigation"})]),_:1},8,["modelValue"])]),_:1}),t(r,{span:6},{default:l(()=>[t(Pe,{modelValue:b.value.dateRange,"onUpdate:modelValue":e[3]||(e[3]=s=>b.value.dateRange=s),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),t(r,{span:4},{default:l(()=>[t(d,{type:"primary",onClick:J},{default:l(()=>e[32]||(e[32]=[n("搜索")])),_:1,__:[32]}),t(d,{onClick:Ve},{default:l(()=>e[33]||(e[33]=[n("重置")])),_:1,__:[33]})]),_:1})]),_:1})]),t(Q,{data:C.value,style:{width:"100%","margin-top":"20px"},fit:"true"},{default:l(()=>[t(k,{prop:"name",label:"设备名称","min-width":"150"},{default:l(s=>[a("span",{class:"clickable-title",onClick:D=>G(s.row)},_(s.row.name),9,gt)]),_:1}),t(k,{prop:"type",label:"设备类型","min-width":"120"},{default:l(s=>[s.row.type==="sensor"?(i(),v(p,{key:0,type:"primary"},{default:l(()=>e[34]||(e[34]=[n("传感器")])),_:1,__:[34]})):s.row.type==="controller"?(i(),v(p,{key:1,type:"success"},{default:l(()=>e[35]||(e[35]=[n("控制器")])),_:1,__:[35]})):s.row.type==="camera"?(i(),v(p,{key:2,type:"warning"},{default:l(()=>e[36]||(e[36]=[n("摄像头")])),_:1,__:[36]})):s.row.type==="irrigation"?(i(),v(p,{key:3,type:"info"},{default:l(()=>e[37]||(e[37]=[n("灌溉设备")])),_:1,__:[37]})):z("",!0)]),_:1}),t(k,{prop:"location",label:"位置","min-width":"120"}),t(k,{prop:"status",label:"状态","min-width":"100"},{default:l(s=>[s.row.status==="online"?(i(),v(p,{key:0,type:"success"},{default:l(()=>e[38]||(e[38]=[n("在线")])),_:1,__:[38]})):s.row.status==="offline"?(i(),v(p,{key:1,type:"danger"},{default:l(()=>e[39]||(e[39]=[n("离线")])),_:1,__:[39]})):s.row.status==="error"?(i(),v(p,{key:2,type:"danger"},{default:l(()=>e[40]||(e[40]=[n("故障")])),_:1,__:[40]})):s.row.status==="maintenance"?(i(),v(p,{key:3,type:"warning"},{default:l(()=>e[41]||(e[41]=[n("维护中")])),_:1,__:[41]})):z("",!0)]),_:1}),t(k,{prop:"lastUpdate",label:"最后更新","min-width":"150"}),t(k,{prop:"battery",label:"电量","min-width":"100"},{default:l(s=>[t(Ee,{percentage:s.row.battery,color:Ae(s.row.battery),"show-text":!1},null,8,["percentage","color"]),a("span",ct,_(s.row.battery)+"%",1)]),_:1}),t(k,{label:"操作","min-width":"200",fixed:"right"},{default:l(s=>[t(d,{size:"small",type:"primary",onClick:D=>G(s.row)},{default:l(()=>e[42]||(e[42]=[n("查看")])),_:2,__:[42]},1032,["onClick"]),t(d,{size:"small",type:"success",onClick:D=>ge(s.row)},{default:l(()=>e[43]||(e[43]=[n("控制")])),_:2,__:[43]},1032,["onClick"]),t(d,{size:"small",type:"warning",onClick:D=>ce(s.row)},{default:l(()=>e[44]||(e[44]=[n("维护")])),_:2,__:[44]},1032,["onClick"]),t(d,{size:"small",type:"danger",onClick:D=>ye(s.row)},{default:l(()=>e[45]||(e[45]=[n("删除")])),_:2,__:[45]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),t(Y,{modelValue:R.value,"onUpdate:modelValue":e[6]||(e[6]=s=>R.value=s),title:"设备详情",width:"900px","before-close":Be},{default:l(()=>[u.value?(i(),M("div",wt,[t(g,{class:"info-card",shadow:"never"},{header:l(()=>[a("div",bt,[e[47]||(e[47]=a("span",null,"设备信息",-1)),t(d,{type:"primary",size:"small",onClick:e[4]||(e[4]=s=>fe(u.value))},{default:l(()=>e[46]||(e[46]=[n("编辑")])),_:1,__:[46]})])]),default:l(()=>[a("div",kt,[a("div",Vt,[t(W,{src:u.value.image||O(u.value.type),fit:"cover",class:"device-image","preview-src-list":[u.value.image||O(u.value.type)],"preview-teleported":""},{error:l(()=>[a("div",Ct,[t(A,null,{default:l(()=>[t(T(te))]),_:1}),e[48]||(e[48]=a("span",null,"图片加载失败",-1))])]),_:1},8,["src","preview-src-list"]),a("div",xt,[t(d,{type:"primary",size:"small",onClick:Re},{default:l(()=>e[49]||(e[49]=[n("更换图片")])),_:1,__:[49]})])])]),t(V,{gutter:20},{default:l(()=>[t(r,{span:12},{default:l(()=>[a("div",Dt,[e[50]||(e[50]=a("label",null,"设备名称：",-1)),a("span",null,_(u.value.name),1)])]),_:1}),t(r,{span:12},{default:l(()=>[a("div",Ut,[e[55]||(e[55]=a("label",null,"设备类型：",-1)),u.value.type==="sensor"?(i(),v(p,{key:0,type:"primary"},{default:l(()=>e[51]||(e[51]=[n("传感器")])),_:1,__:[51]})):u.value.type==="controller"?(i(),v(p,{key:1,type:"success"},{default:l(()=>e[52]||(e[52]=[n("控制器")])),_:1,__:[52]})):u.value.type==="camera"?(i(),v(p,{key:2,type:"warning"},{default:l(()=>e[53]||(e[53]=[n("摄像头")])),_:1,__:[53]})):u.value.type==="irrigation"?(i(),v(p,{key:3,type:"info"},{default:l(()=>e[54]||(e[54]=[n("灌溉设备")])),_:1,__:[54]})):z("",!0)])]),_:1})]),_:1}),t(V,{gutter:20},{default:l(()=>[t(r,{span:12},{default:l(()=>[a("div",zt,[e[56]||(e[56]=a("label",null,"设备位置：",-1)),a("span",null,_(u.value.location),1)])]),_:1}),t(r,{span:12},{default:l(()=>[a("div",ht,[e[61]||(e[61]=a("label",null,"设备状态：",-1)),u.value.status==="online"?(i(),v(p,{key:0,type:"success"},{default:l(()=>e[57]||(e[57]=[n("在线")])),_:1,__:[57]})):u.value.status==="offline"?(i(),v(p,{key:1,type:"danger"},{default:l(()=>e[58]||(e[58]=[n("离线")])),_:1,__:[58]})):u.value.status==="error"?(i(),v(p,{key:2,type:"danger"},{default:l(()=>e[59]||(e[59]=[n("故障")])),_:1,__:[59]})):u.value.status==="maintenance"?(i(),v(p,{key:3,type:"warning"},{default:l(()=>e[60]||(e[60]=[n("维护中")])),_:1,__:[60]})):z("",!0)])]),_:1})]),_:1}),t(V,{gutter:20},{default:l(()=>[t(r,{span:12},{default:l(()=>[a("div",At,[e[62]||(e[62]=a("label",null,"设备电量：",-1)),a("span",null,_(u.value.battery)+"%",1)])]),_:1}),t(r,{span:12},{default:l(()=>[a("div",Tt,[e[63]||(e[63]=a("label",null,"最后更新：",-1)),a("span",null,_(u.value.lastUpdate),1)])]),_:1})]),_:1}),t(V,{gutter:20},{default:l(()=>[t(r,{span:24},{default:l(()=>[a("div",$t,[e[64]||(e[64]=a("label",null,"设备描述：",-1)),a("div",Bt,_(u.value.description),1)])]),_:1})]),_:1})]),_:1}),t(g,{class:"data-card",shadow:"never"},{header:l(()=>e[65]||(e[65]=[a("div",{class:"card-header"},[a("span",null,"实时数据")],-1)])),default:l(()=>[t(V,{gutter:20},{default:l(()=>[(i(!0),M(Se,null,qe(S.value,(s,D)=>(i(),v(r,{span:6,key:D},{default:l(()=>[a("div",Ft,[a("div",Mt,_(s.label),1),a("div",It,_(s.value)+_(s.unit),1),a("div",{class:je(["data-status",s.status])},_(s.statusText),3)])]),_:2},1024))),128))]),_:1})]),_:1}),t(g,{class:"chart-card",shadow:"never"},{header:l(()=>[a("div",Yt,[e[66]||(e[66]=a("span",null,"历史数据趋势",-1)),t(K,{modelValue:j.value,"onUpdate:modelValue":e[5]||(e[5]=s=>j.value=s),size:"small",style:{width:"120px"}},{default:l(()=>[t(c,{label:"温度",value:"temperature"}),t(c,{label:"湿度",value:"humidity"}),t(c,{label:"土壤湿度",value:"soil"}),t(c,{label:"光照",value:"light"})]),_:1},8,["modelValue"])])]),default:l(()=>[e[67]||(e[67]=a("div",{id:"historyChart",style:{height:"300px"}},null,-1))]),_:1,__:[67]})])):z("",!0)]),_:1},8,["modelValue"]),t(Y,{modelValue:h.value,"onUpdate:modelValue":e[14]||(e[14]=s=>h.value=s),title:L.value,width:"800px","before-close":Fe},{footer:l(()=>[a("div",Pt,[t(d,{onClick:e[13]||(e[13]=s=>h.value=!1)},{default:l(()=>e[70]||(e[70]=[n("取消")])),_:1,__:[70]}),t(d,{type:"primary",onClick:_e},{default:l(()=>e[71]||(e[71]=[n("提交")])),_:1,__:[71]})])]),default:l(()=>[t(He,{model:m.value,rules:ae,ref_key:"deviceFormRef",ref:N,"label-width":"120px"},{default:l(()=>[t(F,{label:"设备名称",prop:"name"},{default:l(()=>[t(B,{modelValue:m.value.name,"onUpdate:modelValue":e[7]||(e[7]=s=>m.value.name=s),placeholder:"请输入设备名称"},null,8,["modelValue"])]),_:1}),t(F,{label:"设备类型",prop:"type"},{default:l(()=>[t(K,{modelValue:m.value.type,"onUpdate:modelValue":e[8]||(e[8]=s=>m.value.type=s),placeholder:"请选择设备类型",style:{width:"100%"}},{default:l(()=>[t(c,{label:"传感器",value:"sensor"}),t(c,{label:"控制器",value:"controller"}),t(c,{label:"摄像头",value:"camera"}),t(c,{label:"灌溉设备",value:"irrigation"})]),_:1},8,["modelValue"])]),_:1}),t(F,{label:"设备位置",prop:"location"},{default:l(()=>[t(B,{modelValue:m.value.location,"onUpdate:modelValue":e[9]||(e[9]=s=>m.value.location=s),placeholder:"请输入设备位置"},null,8,["modelValue"])]),_:1}),t(F,{label:"设备描述",prop:"description"},{default:l(()=>[t(B,{modelValue:m.value.description,"onUpdate:modelValue":e[10]||(e[10]=s=>m.value.description=s),type:"textarea",rows:4,placeholder:"请输入设备描述"},null,8,["modelValue"])]),_:1}),t(F,{label:"设备图片"},{default:l(()=>[a("div",Rt,[m.value.image?(i(),v(W,{key:0,src:m.value.image,fit:"cover",class:"form-device-image","preview-src-list":[m.value.image],"preview-teleported":""},null,8,["src","preview-src-list"])):(i(),M("div",Lt,[t(A,null,{default:l(()=>[t(T(te))]),_:1}),e[68]||(e[68]=a("span",null,"暂无图片",-1))])),t(d,{type:"primary",onClick:Le,style:{"margin-top":"10px"}},{default:l(()=>e[69]||(e[69]=[n(" 选择图片 ")])),_:1,__:[69]})])]),_:1}),t(F,{label:"设备参数"},{default:l(()=>[t(V,{gutter:20},{default:l(()=>[t(r,{span:12},{default:l(()=>[t(B,{modelValue:m.value.parameters.interval,"onUpdate:modelValue":e[11]||(e[11]=s=>m.value.parameters.interval=s),placeholder:"数据采集间隔(秒)"},null,8,["modelValue"])]),_:1}),t(r,{span:12},{default:l(()=>[t(B,{modelValue:m.value.parameters.threshold,"onUpdate:modelValue":e[12]||(e[12]=s=>m.value.parameters.threshold=s),placeholder:"告警阈值"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),t(Y,{modelValue:$.value,"onUpdate:modelValue":e[20]||(e[20]=s=>$.value=s),title:"设备控制",width:"600px","before-close":Me},{footer:l(()=>[a("div",qt,[t(d,{onClick:e[19]||(e[19]=s=>$.value=!1)},{default:l(()=>e[78]||(e[78]=[n("取消")])),_:1,__:[78]}),t(d,{type:"primary",onClick:we},{default:l(()=>e[79]||(e[79]=[n("确认控制")])),_:1,__:[79]})])]),default:l(()=>[u.value?(i(),M("div",Et,[t(V,{gutter:20},{default:l(()=>[t(r,{span:12},{default:l(()=>[t(g,null,{header:l(()=>e[72]||(e[72]=[n("开关控制")])),default:l(()=>[a("div",Ht,[e[73]||(e[73]=a("span",null,"设备开关",-1)),t(X,{modelValue:x.value.power,"onUpdate:modelValue":e[15]||(e[15]=s=>x.value.power=s),onChange:Te},null,8,["modelValue"])]),u.value.type==="irrigation"?(i(),M("div",Kt,[e[74]||(e[74]=a("span",null,"灌溉开关",-1)),t(X,{modelValue:x.value.irrigation,"onUpdate:modelValue":e[16]||(e[16]=s=>x.value.irrigation=s),onChange:$e},null,8,["modelValue"])])):z("",!0)]),_:1})]),_:1}),t(r,{span:12},{default:l(()=>[t(g,null,{header:l(()=>e[75]||(e[75]=[n("参数设置")])),default:l(()=>[a("div",Nt,[e[76]||(e[76]=a("span",null,"采集间隔",-1)),t(Z,{modelValue:x.value.interval,"onUpdate:modelValue":e[17]||(e[17]=s=>x.value.interval=s),min:1,max:3600,size:"small"},null,8,["modelValue"])]),a("div",St,[e[77]||(e[77]=a("span",null,"告警阈值",-1)),t(Z,{modelValue:x.value.threshold,"onUpdate:modelValue":e[18]||(e[18]=s=>x.value.threshold=s),min:0,max:100,size:"small"},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1})])):z("",!0)]),_:1},8,["modelValue"]),t(Y,{modelValue:P.value,"onUpdate:modelValue":e[21]||(e[21]=s=>P.value=s),title:"数据分析",width:"1200px","before-close":Ie},{default:l(()=>[a("div",jt,[t(V,{gutter:20,style:{"margin-bottom":"30px"}},{default:l(()=>[t(r,{span:6},{default:l(()=>[t(g,{class:"stat-card"},{default:l(()=>[a("div",Gt,_(re.value),1),e[80]||(e[80]=a("div",{class:"stat-label"},"设备总数",-1))]),_:1,__:[80]})]),_:1}),t(r,{span:6},{default:l(()=>[t(g,{class:"stat-card"},{default:l(()=>[a("div",Jt,_(ue.value),1),e[81]||(e[81]=a("div",{class:"stat-label"},"在线设备",-1))]),_:1,__:[81]})]),_:1}),t(r,{span:6},{default:l(()=>[t(g,{class:"stat-card"},{default:l(()=>[a("div",Ot,_(de.value),1),e[82]||(e[82]=a("div",{class:"stat-label"},"故障设备",-1))]),_:1,__:[82]})]),_:1}),t(r,{span:6},{default:l(()=>[t(g,{class:"stat-card"},{default:l(()=>[a("div",Qt,_(ve.value),1),e[83]||(e[83]=a("div",{class:"stat-label"},"数据点数",-1))]),_:1,__:[83]})]),_:1})]),_:1}),t(V,{gutter:20},{default:l(()=>[t(r,{span:12},{default:l(()=>[t(g,null,{header:l(()=>e[84]||(e[84]=[n("设备状态分布")])),default:l(()=>[e[85]||(e[85]=a("div",{id:"statusChart",style:{height:"300px"}},null,-1))]),_:1,__:[85]})]),_:1}),t(r,{span:12},{default:l(()=>[t(g,null,{header:l(()=>e[86]||(e[86]=[n("环境数据趋势")])),default:l(()=>[e[87]||(e[87]=a("div",{id:"trendChart",style:{height:"300px"}},null,-1))]),_:1,__:[87]})]),_:1})]),_:1})])]),_:1},8,["modelValue"]),t(Y,{modelValue:E.value,"onUpdate:modelValue":e[22]||(e[22]=s=>E.value=s),title:"告警管理",width:"1000px","before-close":Ye},{default:l(()=>[a("div",Wt,[a("div",Xt,[t(d,{type:"primary",onClick:De},{default:l(()=>e[88]||(e[88]=[n("添加告警规则")])),_:1,__:[88]}),t(d,{onClick:he},{default:l(()=>e[89]||(e[89]=[n("清空所有告警")])),_:1,__:[89]})]),t(Q,{data:I.value,style:{width:"100%","margin-top":"20px"}},{default:l(()=>[t(k,{prop:"device",label:"设备","min-width":"120"}),t(k,{prop:"type",label:"告警类型","min-width":"120"},{default:l(s=>[s.row.type==="temperature"?(i(),v(p,{key:0,type:"danger"},{default:l(()=>e[90]||(e[90]=[n("温度异常")])),_:1,__:[90]})):s.row.type==="humidity"?(i(),v(p,{key:1,type:"warning"},{default:l(()=>e[91]||(e[91]=[n("湿度异常")])),_:1,__:[91]})):s.row.type==="soil"?(i(),v(p,{key:2,type:"info"},{default:l(()=>e[92]||(e[92]=[n("土壤异常")])),_:1,__:[92]})):s.row.type==="device"?(i(),v(p,{key:3,type:"danger"},{default:l(()=>e[93]||(e[93]=[n("设备故障")])),_:1,__:[93]})):z("",!0)]),_:1}),t(k,{prop:"message",label:"告警信息","min-width":"200"}),t(k,{prop:"time",label:"告警时间","min-width":"150"}),t(k,{prop:"status",label:"状态","min-width":"100"},{default:l(s=>[s.row.status==="active"?(i(),v(p,{key:0,type:"danger"},{default:l(()=>e[94]||(e[94]=[n("未处理")])),_:1,__:[94]})):(i(),v(p,{key:1,type:"success"},{default:l(()=>e[95]||(e[95]=[n("已处理")])),_:1,__:[95]}))]),_:1}),t(k,{label:"操作","min-width":"150"},{default:l(s=>[t(d,{size:"small",type:"success",onClick:D=>Ue(s.row)},{default:l(()=>e[96]||(e[96]=[n("处理")])),_:2,__:[96]},1032,["onClick"]),t(d,{size:"small",type:"danger",onClick:D=>ze(s.row)},{default:l(()=>e[97]||(e[97]=[n("删除")])),_:2,__:[97]},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),_:1},8,["modelValue"])])}}},ol=Qe(Zt,[["__scopeId","data-v-d51a2586"]]);export{ol as default};
