import{T as Je,B as w,S as U,o as We,a as m,b as o,O as q,$ as a,K as l,_ as t,H as i,f as B,q as Ge,k as _,r as ee,G as Ke,i as Oe,W as Ee,s as c,d as z,v as ae,c as Qe,p as Se,V as Ze,J as f,e as le}from"./index-2YECzvFn.js";const je={class:"smart-agriculture-container"},Ne={class:"header"},Xe={class:"header-actions"},ea={class:"overview-content"},aa={class:"overview-icon temperature"},la={class:"overview-info"},ta={class:"overview-value"},sa={class:"overview-content"},ua={class:"overview-icon humidity"},ia={class:"overview-info"},oa={class:"overview-value"},da={class:"overview-content"},ra={class:"overview-icon soil"},na={class:"overview-info"},ca={class:"overview-value"},pa={class:"overview-content"},va={class:"overview-icon light"},ma={class:"overview-info"},_a={class:"overview-value"},fa={class:"search-section"},ya=["onClick"],ha={style:{"margin-left":"5px"}},wa={key:0,class:"device-detail"},ga={class:"card-header"},ba={class:"device-image-section"},ka={class:"device-image-container"},Va={class:"image-error"},Ca={class:"image-overlay"},xa={class:"detail-item"},Ua={class:"detail-item"},za={class:"detail-item"},Ta={class:"detail-item"},$a={class:"detail-item"},Ba={class:"detail-item"},Ya={class:"detail-item"},Ma={class:"content-text"},Ra={class:"data-item"},qa={class:"data-label"},Aa={class:"data-value"},Da={class:"card-header"},Fa={class:"form-image-upload"},La={key:1,class:"form-image-placeholder"},Pa={class:"dialog-footer"},Ha={key:0,class:"control-panel"},Ia={class:"control-item"},Ja={key:0,class:"control-item"},Wa={class:"control-item"},Ga={class:"control-item"},Ka={class:"dialog-footer"},Oa={class:"analytics-content"},Ea={class:"stat-number"},Qa={class:"stat-number"},Sa={class:"stat-number"},Za={class:"stat-number"},ja={class:"alerts-content"},Na={class:"alerts-header"},Xa={__name:"agriculture",setup(el){const V=w([]),F=w(!1),r=w(null),T=w(!1),L=w("添加设备"),W=w(null),Y=w(!1);w(null);const P=w(!1),H=w(!1),O=w("temperature"),G=w([]),A=w([]),g=w({keyword:"",status:"",type:"",dateRange:[]}),K=[{id:"dev001",name:"温湿度传感器-01",type:"sensor",location:"大棚A区",status:"online",battery:85,lastUpdate:"2024-01-15 14:30:00",description:"监测大棚内温湿度变化，支持远程数据采集。",image:"https://picsum.photos/400/300?random=1"},{id:"dev002",name:"土壤传感器-01",type:"sensor",location:"大棚B区",status:"online",battery:92,lastUpdate:"2024-01-15 14:28:00",description:"监测土壤湿度和pH值，为灌溉提供数据支持。",image:"https://picsum.photos/400/300?random=2"},{id:"dev003",name:"智能灌溉控制器",type:"controller",location:"大棚A区",status:"online",battery:78,lastUpdate:"2024-01-15 14:25:00",description:"根据土壤湿度自动控制灌溉系统。",image:"https://picsum.photos/400/300?random=3"},{id:"dev004",name:"监控摄像头-01",type:"camera",location:"大棚C区",status:"offline",battery:45,lastUpdate:"2024-01-15 13:15:00",description:"24小时监控作物生长状况。",image:"https://picsum.photos/400/300?random=4"},{id:"dev005",name:"自动喷灌设备",type:"irrigation",location:"大棚B区",status:"maintenance",battery:60,lastUpdate:"2024-01-15 12:00:00",description:"自动喷灌系统，支持定时和条件触发。",image:"https://picsum.photos/400/300?random=5"}],v=w({name:"",type:"",location:"",description:"",image:"",parameters:{interval:30,threshold:80}}),C=w({power:!0,irrigation:!1,interval:30,threshold:80}),te={name:[{required:!0,message:"请输入设备名称",trigger:"blur"}],type:[{required:!0,message:"请选择设备类型",trigger:"change"}],location:[{required:!0,message:"请输入设备位置",trigger:"blur"}]},se=U(()=>25.6),ue=U(()=>68.2),ie=U(()=>72.5),oe=U(()=>45e3),de=U(()=>V.value.length),re=U(()=>V.value.filter(u=>u.status==="online").length),ne=U(()=>V.value.filter(u=>u.status==="error").length),ce=U(()=>12580),I=async()=>{try{await new Promise(u=>setTimeout(u,500)),V.value=K,f.success("设备列表加载成功")}catch{f.error("获取设备列表失败")}},pe=()=>{I()},ve=()=>{L.value="添加设备",v.value={name:"",type:"",location:"",description:"",image:"",parameters:{interval:30,threshold:80}},T.value=!0},me=u=>{L.value="编辑设备",v.value={...u},T.value=!0},_e=async()=>{try{await W.value.validate(),await new Promise(u=>setTimeout(u,1e3)),f.success(L.value==="添加设备"?"设备添加成功":"设备信息更新成功"),T.value=!1,I()}catch{f.error("表单验证失败")}},fe=async u=>{try{await le.confirm(`确定要删除设备"${u.name}"吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),V.value=V.value.filter(e=>e.id!==u.id),f.success("删除成功")}catch{f.info("已取消删除")}},E=u=>{r.value=u,F.value=!0,Ve(u.id)},ye=u=>{r.value=u,C.value={power:u.status==="online",irrigation:!1,interval:30,threshold:80},Y.value=!0},he=u=>{f.info(`设备 ${u.name} 已进入维护模式`)},we=async()=>{try{await new Promise(u=>setTimeout(u,1e3)),f.success("控制指令发送成功"),Y.value=!1,I()}catch{f.error("控制指令发送失败")}},ge=()=>{P.value=!0},be=()=>{H.value=!0,Ce()},Q=()=>{let u=[...K];if(g.value.keyword){const e=g.value.keyword.toLowerCase();u=u.filter(n=>n.name.toLowerCase().includes(e)||n.location.toLowerCase().includes(e))}g.value.status&&(u=u.filter(e=>e.status===g.value.status)),g.value.type&&(u=u.filter(e=>e.type===g.value.type)),V.value=u,u.length===0?f.info("没有找到匹配的设备"):f.success(`找到 ${u.length} 台设备`)},ke=()=>{g.value={keyword:"",status:"",type:"",dateRange:[]},V.value=[...K],f.success("搜索条件已重置")},Ve=u=>{G.value=[{label:"温度",value:"25.6",unit:"°C",status:"normal",statusText:"正常"},{label:"湿度",value:"68.2",unit:"%",status:"normal",statusText:"正常"},{label:"土壤湿度",value:"72.5",unit:"%",status:"normal",statusText:"正常"},{label:"光照强度",value:"45000",unit:" lux",status:"normal",statusText:"正常"}]},Ce=()=>{A.value=[{id:"alert001",device:"温湿度传感器-01",type:"temperature",message:"温度超过阈值：28.5°C",time:"2024-01-15 14:25:00",status:"active"},{id:"alert002",device:"监控摄像头-01",type:"device",message:"设备离线超过30分钟",time:"2024-01-15 13:15:00",status:"active"},{id:"alert003",device:"土壤传感器-01",type:"soil",message:"土壤湿度低于阈值：45%",time:"2024-01-15 12:30:00",status:"handled"}]},xe=()=>{f.info("添加告警规则功能开发中")},Ue=u=>{u.status="handled",f.success("告警已处理")},ze=u=>{A.value=A.value.filter(e=>e.id!==u.id),f.success("告警已删除")},Te=()=>{A.value=[],f.success("所有告警已清空")},$e=u=>u>80?"#67C23A":u>50?"#E6A23C":"#F56C6C",Be=u=>{console.log("电源状态:",u)},Ye=u=>{console.log("灌溉状态:",u)},Me=()=>{F.value=!1,r.value=null,G.value=[]},Re=()=>{var u;T.value=!1,(u=W.value)==null||u.resetFields()},qe=()=>{Y.value=!1},Ae=()=>{P.value=!1},De=()=>{H.value=!1},S=u=>{const e={sensor:"https://picsum.photos/400/300?random=10",controller:"https://picsum.photos/400/300?random=11",camera:"https://picsum.photos/400/300?random=12",irrigation:"https://picsum.photos/400/300?random=13"};return e[u]||e.sensor},Fe=()=>{f.info("图片上传功能开发中，当前使用默认图片")},Le=()=>{const u=["https://picsum.photos/400/300?random=20","https://picsum.photos/400/300?random=21","https://picsum.photos/400/300?random=22"];le.confirm("选择图片方式","选择图片",{confirmButtonText:"使用示例图片",cancelButtonText:"取消",type:"info"}).then(()=>{v.value.image=u[Math.floor(Math.random()*u.length)],f.success("图片已选择")}).catch(()=>{f.info("已取消选择")})};return We(I),(u,e)=>{const n=m("el-button"),$=m("el-icon"),y=m("el-card"),d=m("el-col"),k=m("el-row"),M=m("el-input"),h=m("el-option"),J=m("el-select"),Pe=m("el-date-picker"),b=m("el-table-column"),p=m("el-tag"),He=m("el-progress"),Z=m("el-table"),j=m("el-image"),D=m("el-dialog"),R=m("el-form-item"),Ie=m("el-form"),N=m("el-switch"),X=m("el-input-number");return o(),q("div",je,[a(y,null,{default:l(()=>[t("div",Ne,[e[27]||(e[27]=t("span",null,"智慧农业管理",-1)),t("div",Xe,[a(n,{type:"primary",onClick:ve,size:"small"},{default:l(()=>e[23]||(e[23]=[i("添加设备")])),_:1,__:[23]}),a(n,{type:"success",onClick:pe,size:"small"},{default:l(()=>e[24]||(e[24]=[i("刷新数据")])),_:1,__:[24]}),a(n,{type:"info",onClick:ge,size:"small"},{default:l(()=>e[25]||(e[25]=[i("数据分析")])),_:1,__:[25]}),a(n,{type:"warning",onClick:be,size:"small"},{default:l(()=>e[26]||(e[26]=[i("告警管理")])),_:1,__:[26]})])]),a(k,{gutter:20,style:{"margin-bottom":"20px"}},{default:l(()=>[a(d,{span:6},{default:l(()=>[a(y,{class:"overview-card"},{default:l(()=>[t("div",ea,[t("div",aa,[a($,null,{default:l(()=>[a(B(Ge))]),_:1})]),t("div",la,[t("div",ta,_(se.value)+"°C",1),e[28]||(e[28]=t("div",{class:"overview-label"},"平均温度",-1))])])]),_:1})]),_:1}),a(d,{span:6},{default:l(()=>[a(y,{class:"overview-card"},{default:l(()=>[t("div",sa,[t("div",ua,[a($,null,{default:l(()=>[a(B(ee))]),_:1})]),t("div",ia,[t("div",oa,_(ue.value)+"%",1),e[29]||(e[29]=t("div",{class:"overview-label"},"平均湿度",-1))])])]),_:1})]),_:1}),a(d,{span:6},{default:l(()=>[a(y,{class:"overview-card"},{default:l(()=>[t("div",da,[t("div",ra,[a($,null,{default:l(()=>[a(B(ee))]),_:1})]),t("div",na,[t("div",ca,_(ie.value)+"%",1),e[30]||(e[30]=t("div",{class:"overview-label"},"土壤湿度",-1))])])]),_:1})]),_:1}),a(d,{span:6},{default:l(()=>[a(y,{class:"overview-card"},{default:l(()=>[t("div",pa,[t("div",va,[a($,null,{default:l(()=>[a(B(Ke))]),_:1})]),t("div",ma,[t("div",_a,_(oe.value)+" lux",1),e[31]||(e[31]=t("div",{class:"overview-label"},"光照强度",-1))])])]),_:1})]),_:1})]),_:1}),t("div",fa,[a(k,{gutter:20},{default:l(()=>[a(d,{span:6},{default:l(()=>[a(M,{modelValue:g.value.keyword,"onUpdate:modelValue":e[0]||(e[0]=s=>g.value.keyword=s),placeholder:"搜索设备名称或位置",clearable:"",onKeyup:Oe(Q,["enter"])},{prefix:l(()=>[a($,null,{default:l(()=>[a(B(Ee))]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(d,{span:4},{default:l(()=>[a(J,{modelValue:g.value.status,"onUpdate:modelValue":e[1]||(e[1]=s=>g.value.status=s),placeholder:"设备状态",clearable:""},{default:l(()=>[a(h,{label:"在线",value:"online"}),a(h,{label:"离线",value:"offline"}),a(h,{label:"故障",value:"error"}),a(h,{label:"维护中",value:"maintenance"})]),_:1},8,["modelValue"])]),_:1}),a(d,{span:4},{default:l(()=>[a(J,{modelValue:g.value.type,"onUpdate:modelValue":e[2]||(e[2]=s=>g.value.type=s),placeholder:"设备类型",clearable:""},{default:l(()=>[a(h,{label:"传感器",value:"sensor"}),a(h,{label:"控制器",value:"controller"}),a(h,{label:"摄像头",value:"camera"}),a(h,{label:"灌溉设备",value:"irrigation"})]),_:1},8,["modelValue"])]),_:1}),a(d,{span:6},{default:l(()=>[a(Pe,{modelValue:g.value.dateRange,"onUpdate:modelValue":e[3]||(e[3]=s=>g.value.dateRange=s),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),a(d,{span:4},{default:l(()=>[a(n,{type:"primary",onClick:Q},{default:l(()=>e[32]||(e[32]=[i("搜索")])),_:1,__:[32]}),a(n,{onClick:ke},{default:l(()=>e[33]||(e[33]=[i("重置")])),_:1,__:[33]})]),_:1})]),_:1})]),a(Z,{data:V.value,style:{width:"100%","margin-top":"20px"},fit:"true"},{default:l(()=>[a(b,{prop:"name",label:"设备名称","min-width":"150"},{default:l(s=>[t("span",{class:"clickable-title",onClick:x=>E(s.row)},_(s.row.name),9,ya)]),_:1}),a(b,{prop:"type",label:"设备类型","min-width":"120"},{default:l(s=>[s.row.type==="sensor"?(o(),c(p,{key:0,type:"primary"},{default:l(()=>e[34]||(e[34]=[i("传感器")])),_:1,__:[34]})):s.row.type==="controller"?(o(),c(p,{key:1,type:"success"},{default:l(()=>e[35]||(e[35]=[i("控制器")])),_:1,__:[35]})):s.row.type==="camera"?(o(),c(p,{key:2,type:"warning"},{default:l(()=>e[36]||(e[36]=[i("摄像头")])),_:1,__:[36]})):s.row.type==="irrigation"?(o(),c(p,{key:3,type:"info"},{default:l(()=>e[37]||(e[37]=[i("灌溉设备")])),_:1,__:[37]})):z("",!0)]),_:1}),a(b,{prop:"location",label:"位置","min-width":"120"}),a(b,{prop:"status",label:"状态","min-width":"100"},{default:l(s=>[s.row.status==="online"?(o(),c(p,{key:0,type:"success"},{default:l(()=>e[38]||(e[38]=[i("在线")])),_:1,__:[38]})):s.row.status==="offline"?(o(),c(p,{key:1,type:"danger"},{default:l(()=>e[39]||(e[39]=[i("离线")])),_:1,__:[39]})):s.row.status==="error"?(o(),c(p,{key:2,type:"danger"},{default:l(()=>e[40]||(e[40]=[i("故障")])),_:1,__:[40]})):s.row.status==="maintenance"?(o(),c(p,{key:3,type:"warning"},{default:l(()=>e[41]||(e[41]=[i("维护中")])),_:1,__:[41]})):z("",!0)]),_:1}),a(b,{prop:"lastUpdate",label:"最后更新","min-width":"150"}),a(b,{prop:"battery",label:"电量","min-width":"100"},{default:l(s=>[a(He,{percentage:s.row.battery,color:$e(s.row.battery),"show-text":!1},null,8,["percentage","color"]),t("span",ha,_(s.row.battery)+"%",1)]),_:1}),a(b,{label:"操作","min-width":"200",fixed:"right"},{default:l(s=>[a(n,{size:"small",type:"primary",onClick:x=>E(s.row)},{default:l(()=>e[42]||(e[42]=[i("查看")])),_:2,__:[42]},1032,["onClick"]),a(n,{size:"small",type:"success",onClick:x=>ye(s.row)},{default:l(()=>e[43]||(e[43]=[i("控制")])),_:2,__:[43]},1032,["onClick"]),a(n,{size:"small",type:"warning",onClick:x=>he(s.row)},{default:l(()=>e[44]||(e[44]=[i("维护")])),_:2,__:[44]},1032,["onClick"]),a(n,{size:"small",type:"danger",onClick:x=>fe(s.row)},{default:l(()=>e[45]||(e[45]=[i("删除")])),_:2,__:[45]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),a(D,{modelValue:F.value,"onUpdate:modelValue":e[6]||(e[6]=s=>F.value=s),title:"设备详情",width:"900px","before-close":Me},{default:l(()=>[r.value?(o(),q("div",wa,[a(y,{class:"info-card",shadow:"never"},{header:l(()=>[t("div",ga,[e[47]||(e[47]=t("span",null,"设备信息",-1)),a(n,{type:"primary",size:"small",onClick:e[4]||(e[4]=s=>me(r.value))},{default:l(()=>e[46]||(e[46]=[i("编辑")])),_:1,__:[46]})])]),default:l(()=>[t("div",ba,[t("div",ka,[a(j,{src:r.value.image||S(r.value.type),fit:"cover",class:"device-image","preview-src-list":[r.value.image||S(r.value.type)],"preview-teleported":""},{error:l(()=>[t("div",Va,[a($,null,{default:l(()=>[a(B(ae))]),_:1}),e[48]||(e[48]=t("span",null,"图片加载失败",-1))])]),_:1},8,["src","preview-src-list"]),t("div",Ca,[a(n,{type:"primary",size:"small",onClick:Fe},{default:l(()=>e[49]||(e[49]=[i("更换图片")])),_:1,__:[49]})])])]),a(k,{gutter:20},{default:l(()=>[a(d,{span:12},{default:l(()=>[t("div",xa,[e[50]||(e[50]=t("label",null,"设备名称：",-1)),t("span",null,_(r.value.name),1)])]),_:1}),a(d,{span:12},{default:l(()=>[t("div",Ua,[e[55]||(e[55]=t("label",null,"设备类型：",-1)),r.value.type==="sensor"?(o(),c(p,{key:0,type:"primary"},{default:l(()=>e[51]||(e[51]=[i("传感器")])),_:1,__:[51]})):r.value.type==="controller"?(o(),c(p,{key:1,type:"success"},{default:l(()=>e[52]||(e[52]=[i("控制器")])),_:1,__:[52]})):r.value.type==="camera"?(o(),c(p,{key:2,type:"warning"},{default:l(()=>e[53]||(e[53]=[i("摄像头")])),_:1,__:[53]})):r.value.type==="irrigation"?(o(),c(p,{key:3,type:"info"},{default:l(()=>e[54]||(e[54]=[i("灌溉设备")])),_:1,__:[54]})):z("",!0)])]),_:1})]),_:1}),a(k,{gutter:20},{default:l(()=>[a(d,{span:12},{default:l(()=>[t("div",za,[e[56]||(e[56]=t("label",null,"设备位置：",-1)),t("span",null,_(r.value.location),1)])]),_:1}),a(d,{span:12},{default:l(()=>[t("div",Ta,[e[61]||(e[61]=t("label",null,"设备状态：",-1)),r.value.status==="online"?(o(),c(p,{key:0,type:"success"},{default:l(()=>e[57]||(e[57]=[i("在线")])),_:1,__:[57]})):r.value.status==="offline"?(o(),c(p,{key:1,type:"danger"},{default:l(()=>e[58]||(e[58]=[i("离线")])),_:1,__:[58]})):r.value.status==="error"?(o(),c(p,{key:2,type:"danger"},{default:l(()=>e[59]||(e[59]=[i("故障")])),_:1,__:[59]})):r.value.status==="maintenance"?(o(),c(p,{key:3,type:"warning"},{default:l(()=>e[60]||(e[60]=[i("维护中")])),_:1,__:[60]})):z("",!0)])]),_:1})]),_:1}),a(k,{gutter:20},{default:l(()=>[a(d,{span:12},{default:l(()=>[t("div",$a,[e[62]||(e[62]=t("label",null,"设备电量：",-1)),t("span",null,_(r.value.battery)+"%",1)])]),_:1}),a(d,{span:12},{default:l(()=>[t("div",Ba,[e[63]||(e[63]=t("label",null,"最后更新：",-1)),t("span",null,_(r.value.lastUpdate),1)])]),_:1})]),_:1}),a(k,{gutter:20},{default:l(()=>[a(d,{span:24},{default:l(()=>[t("div",Ya,[e[64]||(e[64]=t("label",null,"设备描述：",-1)),t("div",Ma,_(r.value.description),1)])]),_:1})]),_:1})]),_:1}),a(y,{class:"data-card",shadow:"never"},{header:l(()=>e[65]||(e[65]=[t("div",{class:"card-header"},[t("span",null,"实时数据")],-1)])),default:l(()=>[a(k,{gutter:20},{default:l(()=>[(o(!0),q(Qe,null,Se(G.value,(s,x)=>(o(),c(d,{span:6,key:x},{default:l(()=>[t("div",Ra,[t("div",qa,_(s.label),1),t("div",Aa,_(s.value)+_(s.unit),1),t("div",{class:Ze(["data-status",s.status])},_(s.statusText),3)])]),_:2},1024))),128))]),_:1})]),_:1}),a(y,{class:"chart-card",shadow:"never"},{header:l(()=>[t("div",Da,[e[66]||(e[66]=t("span",null,"历史数据趋势",-1)),a(J,{modelValue:O.value,"onUpdate:modelValue":e[5]||(e[5]=s=>O.value=s),size:"small",style:{width:"120px"}},{default:l(()=>[a(h,{label:"温度",value:"temperature"}),a(h,{label:"湿度",value:"humidity"}),a(h,{label:"土壤湿度",value:"soil"}),a(h,{label:"光照",value:"light"})]),_:1},8,["modelValue"])])]),default:l(()=>[e[67]||(e[67]=t("div",{id:"historyChart",style:{height:"300px"}},null,-1))]),_:1,__:[67]})])):z("",!0)]),_:1},8,["modelValue"]),a(D,{modelValue:T.value,"onUpdate:modelValue":e[14]||(e[14]=s=>T.value=s),title:L.value,width:"800px","before-close":Re},{footer:l(()=>[t("div",Pa,[a(n,{onClick:e[13]||(e[13]=s=>T.value=!1)},{default:l(()=>e[70]||(e[70]=[i("取消")])),_:1,__:[70]}),a(n,{type:"primary",onClick:_e},{default:l(()=>e[71]||(e[71]=[i("提交")])),_:1,__:[71]})])]),default:l(()=>[a(Ie,{model:v.value,rules:te,ref_key:"deviceFormRef",ref:W,"label-width":"120px"},{default:l(()=>[a(R,{label:"设备名称",prop:"name"},{default:l(()=>[a(M,{modelValue:v.value.name,"onUpdate:modelValue":e[7]||(e[7]=s=>v.value.name=s),placeholder:"请输入设备名称"},null,8,["modelValue"])]),_:1}),a(R,{label:"设备类型",prop:"type"},{default:l(()=>[a(J,{modelValue:v.value.type,"onUpdate:modelValue":e[8]||(e[8]=s=>v.value.type=s),placeholder:"请选择设备类型",style:{width:"100%"}},{default:l(()=>[a(h,{label:"传感器",value:"sensor"}),a(h,{label:"控制器",value:"controller"}),a(h,{label:"摄像头",value:"camera"}),a(h,{label:"灌溉设备",value:"irrigation"})]),_:1},8,["modelValue"])]),_:1}),a(R,{label:"设备位置",prop:"location"},{default:l(()=>[a(M,{modelValue:v.value.location,"onUpdate:modelValue":e[9]||(e[9]=s=>v.value.location=s),placeholder:"请输入设备位置"},null,8,["modelValue"])]),_:1}),a(R,{label:"设备描述",prop:"description"},{default:l(()=>[a(M,{modelValue:v.value.description,"onUpdate:modelValue":e[10]||(e[10]=s=>v.value.description=s),type:"textarea",rows:4,placeholder:"请输入设备描述"},null,8,["modelValue"])]),_:1}),a(R,{label:"设备图片"},{default:l(()=>[t("div",Fa,[v.value.image?(o(),c(j,{key:0,src:v.value.image,fit:"cover",class:"form-device-image","preview-src-list":[v.value.image],"preview-teleported":""},null,8,["src","preview-src-list"])):(o(),q("div",La,[a($,null,{default:l(()=>[a(B(ae))]),_:1}),e[68]||(e[68]=t("span",null,"暂无图片",-1))])),a(n,{type:"primary",onClick:Le,style:{"margin-top":"10px"}},{default:l(()=>e[69]||(e[69]=[i(" 选择图片 ")])),_:1,__:[69]})])]),_:1}),a(R,{label:"设备参数"},{default:l(()=>[a(k,{gutter:20},{default:l(()=>[a(d,{span:12},{default:l(()=>[a(M,{modelValue:v.value.parameters.interval,"onUpdate:modelValue":e[11]||(e[11]=s=>v.value.parameters.interval=s),placeholder:"数据采集间隔(秒)"},null,8,["modelValue"])]),_:1}),a(d,{span:12},{default:l(()=>[a(M,{modelValue:v.value.parameters.threshold,"onUpdate:modelValue":e[12]||(e[12]=s=>v.value.parameters.threshold=s),placeholder:"告警阈值"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),a(D,{modelValue:Y.value,"onUpdate:modelValue":e[20]||(e[20]=s=>Y.value=s),title:"设备控制",width:"600px","before-close":qe},{footer:l(()=>[t("div",Ka,[a(n,{onClick:e[19]||(e[19]=s=>Y.value=!1)},{default:l(()=>e[78]||(e[78]=[i("取消")])),_:1,__:[78]}),a(n,{type:"primary",onClick:we},{default:l(()=>e[79]||(e[79]=[i("确认控制")])),_:1,__:[79]})])]),default:l(()=>[r.value?(o(),q("div",Ha,[a(k,{gutter:20},{default:l(()=>[a(d,{span:12},{default:l(()=>[a(y,null,{header:l(()=>e[72]||(e[72]=[i("开关控制")])),default:l(()=>[t("div",Ia,[e[73]||(e[73]=t("span",null,"设备开关",-1)),a(N,{modelValue:C.value.power,"onUpdate:modelValue":e[15]||(e[15]=s=>C.value.power=s),onChange:Be},null,8,["modelValue"])]),r.value.type==="irrigation"?(o(),q("div",Ja,[e[74]||(e[74]=t("span",null,"灌溉开关",-1)),a(N,{modelValue:C.value.irrigation,"onUpdate:modelValue":e[16]||(e[16]=s=>C.value.irrigation=s),onChange:Ye},null,8,["modelValue"])])):z("",!0)]),_:1})]),_:1}),a(d,{span:12},{default:l(()=>[a(y,null,{header:l(()=>e[75]||(e[75]=[i("参数设置")])),default:l(()=>[t("div",Wa,[e[76]||(e[76]=t("span",null,"采集间隔",-1)),a(X,{modelValue:C.value.interval,"onUpdate:modelValue":e[17]||(e[17]=s=>C.value.interval=s),min:1,max:3600,size:"small"},null,8,["modelValue"])]),t("div",Ga,[e[77]||(e[77]=t("span",null,"告警阈值",-1)),a(X,{modelValue:C.value.threshold,"onUpdate:modelValue":e[18]||(e[18]=s=>C.value.threshold=s),min:0,max:100,size:"small"},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1})])):z("",!0)]),_:1},8,["modelValue"]),a(D,{modelValue:P.value,"onUpdate:modelValue":e[21]||(e[21]=s=>P.value=s),title:"数据分析",width:"1200px","before-close":Ae},{default:l(()=>[t("div",Oa,[a(k,{gutter:20,style:{"margin-bottom":"30px"}},{default:l(()=>[a(d,{span:6},{default:l(()=>[a(y,{class:"stat-card"},{default:l(()=>[t("div",Ea,_(de.value),1),e[80]||(e[80]=t("div",{class:"stat-label"},"设备总数",-1))]),_:1,__:[80]})]),_:1}),a(d,{span:6},{default:l(()=>[a(y,{class:"stat-card"},{default:l(()=>[t("div",Qa,_(re.value),1),e[81]||(e[81]=t("div",{class:"stat-label"},"在线设备",-1))]),_:1,__:[81]})]),_:1}),a(d,{span:6},{default:l(()=>[a(y,{class:"stat-card"},{default:l(()=>[t("div",Sa,_(ne.value),1),e[82]||(e[82]=t("div",{class:"stat-label"},"故障设备",-1))]),_:1,__:[82]})]),_:1}),a(d,{span:6},{default:l(()=>[a(y,{class:"stat-card"},{default:l(()=>[t("div",Za,_(ce.value),1),e[83]||(e[83]=t("div",{class:"stat-label"},"数据点数",-1))]),_:1,__:[83]})]),_:1})]),_:1}),a(k,{gutter:20},{default:l(()=>[a(d,{span:12},{default:l(()=>[a(y,null,{header:l(()=>e[84]||(e[84]=[i("设备状态分布")])),default:l(()=>[e[85]||(e[85]=t("div",{id:"statusChart",style:{height:"300px"}},null,-1))]),_:1,__:[85]})]),_:1}),a(d,{span:12},{default:l(()=>[a(y,null,{header:l(()=>e[86]||(e[86]=[i("环境数据趋势")])),default:l(()=>[e[87]||(e[87]=t("div",{id:"trendChart",style:{height:"300px"}},null,-1))]),_:1,__:[87]})]),_:1})]),_:1})])]),_:1},8,["modelValue"]),a(D,{modelValue:H.value,"onUpdate:modelValue":e[22]||(e[22]=s=>H.value=s),title:"告警管理",width:"1000px","before-close":De},{default:l(()=>[t("div",ja,[t("div",Na,[a(n,{type:"primary",onClick:xe},{default:l(()=>e[88]||(e[88]=[i("添加告警规则")])),_:1,__:[88]}),a(n,{onClick:Te},{default:l(()=>e[89]||(e[89]=[i("清空所有告警")])),_:1,__:[89]})]),a(Z,{data:A.value,style:{width:"100%","margin-top":"20px"}},{default:l(()=>[a(b,{prop:"device",label:"设备","min-width":"120"}),a(b,{prop:"type",label:"告警类型","min-width":"120"},{default:l(s=>[s.row.type==="temperature"?(o(),c(p,{key:0,type:"danger"},{default:l(()=>e[90]||(e[90]=[i("温度异常")])),_:1,__:[90]})):s.row.type==="humidity"?(o(),c(p,{key:1,type:"warning"},{default:l(()=>e[91]||(e[91]=[i("湿度异常")])),_:1,__:[91]})):s.row.type==="soil"?(o(),c(p,{key:2,type:"info"},{default:l(()=>e[92]||(e[92]=[i("土壤异常")])),_:1,__:[92]})):s.row.type==="device"?(o(),c(p,{key:3,type:"danger"},{default:l(()=>e[93]||(e[93]=[i("设备故障")])),_:1,__:[93]})):z("",!0)]),_:1}),a(b,{prop:"message",label:"告警信息","min-width":"200"}),a(b,{prop:"time",label:"告警时间","min-width":"150"}),a(b,{prop:"status",label:"状态","min-width":"100"},{default:l(s=>[s.row.status==="active"?(o(),c(p,{key:0,type:"danger"},{default:l(()=>e[94]||(e[94]=[i("未处理")])),_:1,__:[94]})):(o(),c(p,{key:1,type:"success"},{default:l(()=>e[95]||(e[95]=[i("已处理")])),_:1,__:[95]}))]),_:1}),a(b,{label:"操作","min-width":"150"},{default:l(s=>[a(n,{size:"small",type:"success",onClick:x=>Ue(s.row)},{default:l(()=>e[96]||(e[96]=[i("处理")])),_:2,__:[96]},1032,["onClick"]),a(n,{size:"small",type:"danger",onClick:x=>ze(s.row)},{default:l(()=>e[97]||(e[97]=[i("删除")])),_:2,__:[97]},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),_:1},8,["modelValue"])])}}},ll=Je(Xa,[["__scopeId","data-v-d51a2586"]]);export{ll as default};
