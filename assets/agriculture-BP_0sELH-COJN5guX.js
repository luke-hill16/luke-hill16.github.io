import{C as e,V as a,S as l,o as t,B as s,b as u,M as i,c as d,W as o,k as r,e as n,h as c,L as p,a as v,t as m,r as _,l as f,m as y,i as h,f as w,s as g,z as b,d as k,R as V,J as C,g as x}from"./index-DyjvvSaJ.js";const U={class:"smart-agriculture-container"},z={class:"header"},T={class:"header-actions"},Y={class:"overview-content"},B={class:"overview-icon temperature"},M={class:"overview-info"},R={class:"overview-value"},A={class:"overview-content"},D={class:"overview-icon humidity"},L={class:"overview-info"},q={class:"overview-value"},F={class:"overview-content"},P={class:"overview-icon soil"},$={class:"overview-info"},j={class:"overview-value"},E={class:"overview-content"},H={class:"overview-icon light"},I={class:"overview-info"},J={class:"overview-value"},K={class:"search-section"},G=["onClick"],N={style:{"margin-left":"5px"}},O={key:0,class:"device-detail"},Q={class:"card-header"},S={class:"device-image-section"},W={class:"device-image-container"},X={class:"image-error"},Z={class:"image-overlay"},ee={class:"detail-item"},ae={class:"detail-item"},le={class:"detail-item"},te={class:"detail-item"},se={class:"detail-item"},ue={class:"detail-item"},ie={class:"detail-item"},de={class:"content-text"},oe={class:"data-item"},re={class:"data-label"},ne={class:"data-value"},ce={class:"card-header"},pe={class:"form-image-upload"},ve={key:1,class:"form-image-placeholder"},me={class:"dialog-footer"},_e={key:0,class:"control-panel"},fe={class:"control-item"},ye={key:0,class:"control-item"},he={class:"control-item"},we={class:"control-item"},ge={class:"dialog-footer"},be={class:"analytics-content"},ke={class:"stat-number"},Ve={class:"stat-number"},Ce={class:"stat-number"},xe={class:"stat-number"},Ue={class:"alerts-content"},ze={class:"alerts-header"},Te=e({__name:"agriculture",setup(e){const Te=a([]),Ye=a(!1),Be=a(null),Me=a(!1),Re=a("添加设备"),Ae=a(null),De=a(!1);a(null);const Le=a(!1),qe=a(!1),Fe=a("temperature"),Pe=a([]),$e=a([]),je=a({keyword:"",status:"",type:"",dateRange:[]}),Ee=[{id:"dev001",name:"温湿度传感器-01",type:"sensor",location:"大棚A区",status:"online",battery:85,lastUpdate:"2024-01-15 14:30:00",description:"监测大棚内温湿度变化，支持远程数据采集。",image:"https://picsum.photos/400/300?random=1"},{id:"dev002",name:"土壤传感器-01",type:"sensor",location:"大棚B区",status:"online",battery:92,lastUpdate:"2024-01-15 14:28:00",description:"监测土壤湿度和pH值，为灌溉提供数据支持。",image:"https://picsum.photos/400/300?random=2"},{id:"dev003",name:"智能灌溉控制器",type:"controller",location:"大棚A区",status:"online",battery:78,lastUpdate:"2024-01-15 14:25:00",description:"根据土壤湿度自动控制灌溉系统。",image:"https://picsum.photos/400/300?random=3"},{id:"dev004",name:"监控摄像头-01",type:"camera",location:"大棚C区",status:"offline",battery:45,lastUpdate:"2024-01-15 13:15:00",description:"24小时监控作物生长状况。",image:"https://picsum.photos/400/300?random=4"},{id:"dev005",name:"自动喷灌设备",type:"irrigation",location:"大棚B区",status:"maintenance",battery:60,lastUpdate:"2024-01-15 12:00:00",description:"自动喷灌系统，支持定时和条件触发。",image:"https://picsum.photos/400/300?random=5"}],He=a({name:"",type:"",location:"",description:"",image:"",parameters:{interval:30,threshold:80}}),Ie=a({power:!0,irrigation:!1,interval:30,threshold:80}),Je={name:[{required:!0,message:"请输入设备名称",trigger:"blur"}],type:[{required:!0,message:"请选择设备类型",trigger:"change"}],location:[{required:!0,message:"请输入设备位置",trigger:"blur"}]},Ke=l((()=>25.6)),Ge=l((()=>68.2)),Ne=l((()=>72.5)),Oe=l((()=>45e3)),Qe=l((()=>Te.value.length)),Se=l((()=>Te.value.filter((e=>"online"===e.status)).length)),We=l((()=>Te.value.filter((e=>"error"===e.status)).length)),Xe=l((()=>12580)),Ze=async()=>{try{await new Promise((e=>setTimeout(e,500))),Te.value=Ee,C.success("设备列表加载成功")}catch{C.error("获取设备列表失败")}},ea=()=>{Ze()},aa=()=>{Re.value="添加设备",He.value={name:"",type:"",location:"",description:"",image:"",parameters:{interval:30,threshold:80}},Me.value=!0},la=async()=>{try{await Ae.value.validate(),await new Promise((e=>setTimeout(e,1e3))),C.success("添加设备"===Re.value?"设备添加成功":"设备信息更新成功"),Me.value=!1,Ze()}catch{C.error("表单验证失败")}},ta=e=>{Be.value=e,Ye.value=!0,ra(e.id)},sa=async()=>{try{await new Promise((e=>setTimeout(e,1e3))),C.success("控制指令发送成功"),De.value=!1,Ze()}catch{C.error("控制指令发送失败")}},ua=()=>{Le.value=!0},ia=()=>{qe.value=!0,na()},da=()=>{let e=[...Ee];if(je.value.keyword){const a=je.value.keyword.toLowerCase();e=e.filter((e=>e.name.toLowerCase().includes(a)||e.location.toLowerCase().includes(a)))}je.value.status&&(e=e.filter((e=>e.status===je.value.status))),je.value.type&&(e=e.filter((e=>e.type===je.value.type))),Te.value=e,0===e.length?C.info("没有找到匹配的设备"):C.success(`找到 ${e.length} 台设备`)},oa=()=>{je.value={keyword:"",status:"",type:"",dateRange:[]},Te.value=[...Ee],C.success("搜索条件已重置")},ra=e=>{Pe.value=[{label:"温度",value:"25.6",unit:"°C",status:"normal",statusText:"正常"},{label:"湿度",value:"68.2",unit:"%",status:"normal",statusText:"正常"},{label:"土壤湿度",value:"72.5",unit:"%",status:"normal",statusText:"正常"},{label:"光照强度",value:"45000",unit:" lux",status:"normal",statusText:"正常"}]},na=()=>{$e.value=[{id:"alert001",device:"温湿度传感器-01",type:"temperature",message:"温度超过阈值：28.5°C",time:"2024-01-15 14:25:00",status:"active"},{id:"alert002",device:"监控摄像头-01",type:"device",message:"设备离线超过30分钟",time:"2024-01-15 13:15:00",status:"active"},{id:"alert003",device:"土壤传感器-01",type:"soil",message:"土壤湿度低于阈值：45%",time:"2024-01-15 12:30:00",status:"handled"}]},ca=()=>{C.info("添加告警规则功能开发中")},pa=()=>{$e.value=[],C.success("所有告警已清空")},va=e=>e>80?"#67C23A":e>50?"#E6A23C":"#F56C6C",ma=e=>{},_a=e=>{},fa=()=>{Ye.value=!1,Be.value=null,Pe.value=[]},ya=()=>{var e;Me.value=!1,null==(e=Ae.value)||e.resetFields()},ha=()=>{De.value=!1},wa=()=>{Le.value=!1},ga=()=>{qe.value=!1},ba=e=>{const a={sensor:"https://picsum.photos/400/300?random=10",controller:"https://picsum.photos/400/300?random=11",camera:"https://picsum.photos/400/300?random=12",irrigation:"https://picsum.photos/400/300?random=13"};return a[e]||a.sensor},ka=()=>{C.info("图片上传功能开发中，当前使用默认图片")},Va=()=>{const e=["https://picsum.photos/400/300?random=20","https://picsum.photos/400/300?random=21","https://picsum.photos/400/300?random=22"];x.confirm("选择图片方式","选择图片",{confirmButtonText:"使用示例图片",cancelButtonText:"取消",type:"info"}).then((()=>{He.value.image=e[Math.floor(Math.random()*e.length)],C.success("图片已选择")})).catch((()=>{C.info("已取消选择")}))};return t(Ze),(e,a)=>{const l=s("el-button"),t=s("el-icon"),Ee=s("el-card"),Ze=s("el-col"),ra=s("el-row"),na=s("el-input"),Ca=s("el-option"),xa=s("el-select"),Ua=s("el-date-picker"),za=s("el-table-column"),Ta=s("el-tag"),Ya=s("el-progress"),Ba=s("el-table"),Ma=s("el-image"),Ra=s("el-dialog"),Aa=s("el-form-item"),Da=s("el-form"),La=s("el-switch"),qa=s("el-input-number");return u(),i("div",U,[d(Ee,null,{default:o((()=>[r("div",z,[a[27]||(a[27]=r("span",null,"智慧农业管理",-1)),r("div",T,[d(l,{type:"primary",onClick:aa,size:"small"},{default:o((()=>a[23]||(a[23]=[n("添加设备")]))),_:1,__:[23]}),d(l,{type:"success",onClick:ea,size:"small"},{default:o((()=>a[24]||(a[24]=[n("刷新数据")]))),_:1,__:[24]}),d(l,{type:"info",onClick:ua,size:"small"},{default:o((()=>a[25]||(a[25]=[n("数据分析")]))),_:1,__:[25]}),d(l,{type:"warning",onClick:ia,size:"small"},{default:o((()=>a[26]||(a[26]=[n("告警管理")]))),_:1,__:[26]})])]),d(ra,{gutter:20,style:{"margin-bottom":"20px"}},{default:o((()=>[d(Ze,{span:6},{default:o((()=>[d(Ee,{class:"overview-card"},{default:o((()=>[r("div",Y,[r("div",B,[d(t,null,{default:o((()=>[d(c(p))])),_:1})]),r("div",M,[r("div",R,v(Ke.value)+"°C",1),a[28]||(a[28]=r("div",{class:"overview-label"},"平均温度",-1))])])])),_:1})])),_:1}),d(Ze,{span:6},{default:o((()=>[d(Ee,{class:"overview-card"},{default:o((()=>[r("div",A,[r("div",D,[d(t,null,{default:o((()=>[d(c(m))])),_:1})]),r("div",L,[r("div",q,v(Ge.value)+"%",1),a[29]||(a[29]=r("div",{class:"overview-label"},"平均湿度",-1))])])])),_:1})])),_:1}),d(Ze,{span:6},{default:o((()=>[d(Ee,{class:"overview-card"},{default:o((()=>[r("div",F,[r("div",P,[d(t,null,{default:o((()=>[d(c(m))])),_:1})]),r("div",$,[r("div",j,v(Ne.value)+"%",1),a[30]||(a[30]=r("div",{class:"overview-label"},"土壤湿度",-1))])])])),_:1})])),_:1}),d(Ze,{span:6},{default:o((()=>[d(Ee,{class:"overview-card"},{default:o((()=>[r("div",E,[r("div",H,[d(t,null,{default:o((()=>[d(c(_))])),_:1})]),r("div",I,[r("div",J,v(Oe.value)+" lux",1),a[31]||(a[31]=r("div",{class:"overview-label"},"光照强度",-1))])])])),_:1})])),_:1})])),_:1}),r("div",K,[d(ra,{gutter:20},{default:o((()=>[d(Ze,{span:6},{default:o((()=>[d(na,{modelValue:je.value.keyword,"onUpdate:modelValue":a[0]||(a[0]=e=>je.value.keyword=e),placeholder:"搜索设备名称或位置",clearable:"",onKeyup:f(da,["enter"])},{prefix:o((()=>[d(t,null,{default:o((()=>[d(c(y))])),_:1})])),_:1},8,["modelValue"])])),_:1}),d(Ze,{span:4},{default:o((()=>[d(xa,{modelValue:je.value.status,"onUpdate:modelValue":a[1]||(a[1]=e=>je.value.status=e),placeholder:"设备状态",clearable:""},{default:o((()=>[d(Ca,{label:"在线",value:"online"}),d(Ca,{label:"离线",value:"offline"}),d(Ca,{label:"故障",value:"error"}),d(Ca,{label:"维护中",value:"maintenance"})])),_:1},8,["modelValue"])])),_:1}),d(Ze,{span:4},{default:o((()=>[d(xa,{modelValue:je.value.type,"onUpdate:modelValue":a[2]||(a[2]=e=>je.value.type=e),placeholder:"设备类型",clearable:""},{default:o((()=>[d(Ca,{label:"传感器",value:"sensor"}),d(Ca,{label:"控制器",value:"controller"}),d(Ca,{label:"摄像头",value:"camera"}),d(Ca,{label:"灌溉设备",value:"irrigation"})])),_:1},8,["modelValue"])])),_:1}),d(Ze,{span:6},{default:o((()=>[d(Ua,{modelValue:je.value.dateRange,"onUpdate:modelValue":a[3]||(a[3]=e=>je.value.dateRange=e),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1}),d(Ze,{span:4},{default:o((()=>[d(l,{type:"primary",onClick:da},{default:o((()=>a[32]||(a[32]=[n("搜索")]))),_:1,__:[32]}),d(l,{onClick:oa},{default:o((()=>a[33]||(a[33]=[n("重置")]))),_:1,__:[33]})])),_:1})])),_:1})]),d(Ba,{data:Te.value,style:{width:"100%","margin-top":"20px"},fit:"true"},{default:o((()=>[d(za,{prop:"name",label:"设备名称","min-width":"150"},{default:o((e=>[r("span",{class:"clickable-title",onClick:a=>ta(e.row)},v(e.row.name),9,G)])),_:1}),d(za,{prop:"type",label:"设备类型","min-width":"120"},{default:o((e=>["sensor"===e.row.type?(u(),h(Ta,{key:0,type:"primary"},{default:o((()=>a[34]||(a[34]=[n("传感器")]))),_:1,__:[34]})):"controller"===e.row.type?(u(),h(Ta,{key:1,type:"success"},{default:o((()=>a[35]||(a[35]=[n("控制器")]))),_:1,__:[35]})):"camera"===e.row.type?(u(),h(Ta,{key:2,type:"warning"},{default:o((()=>a[36]||(a[36]=[n("摄像头")]))),_:1,__:[36]})):"irrigation"===e.row.type?(u(),h(Ta,{key:3,type:"info"},{default:o((()=>a[37]||(a[37]=[n("灌溉设备")]))),_:1,__:[37]})):w("",!0)])),_:1}),d(za,{prop:"location",label:"位置","min-width":"120"}),d(za,{prop:"status",label:"状态","min-width":"100"},{default:o((e=>["online"===e.row.status?(u(),h(Ta,{key:0,type:"success"},{default:o((()=>a[38]||(a[38]=[n("在线")]))),_:1,__:[38]})):"offline"===e.row.status?(u(),h(Ta,{key:1,type:"danger"},{default:o((()=>a[39]||(a[39]=[n("离线")]))),_:1,__:[39]})):"error"===e.row.status?(u(),h(Ta,{key:2,type:"danger"},{default:o((()=>a[40]||(a[40]=[n("故障")]))),_:1,__:[40]})):"maintenance"===e.row.status?(u(),h(Ta,{key:3,type:"warning"},{default:o((()=>a[41]||(a[41]=[n("维护中")]))),_:1,__:[41]})):w("",!0)])),_:1}),d(za,{prop:"lastUpdate",label:"最后更新","min-width":"150"}),d(za,{prop:"battery",label:"电量","min-width":"100"},{default:o((e=>[d(Ya,{percentage:e.row.battery,color:va(e.row.battery),"show-text":!1},null,8,["percentage","color"]),r("span",N,v(e.row.battery)+"%",1)])),_:1}),d(za,{label:"操作","min-width":"200",fixed:"right"},{default:o((e=>[d(l,{size:"small",type:"primary",onClick:a=>ta(e.row)},{default:o((()=>a[42]||(a[42]=[n("查看")]))),_:2,__:[42]},1032,["onClick"]),d(l,{size:"small",type:"success",onClick:a=>(e=>{Be.value=e,Ie.value={power:"online"===e.status,irrigation:!1,interval:30,threshold:80},De.value=!0})(e.row)},{default:o((()=>a[43]||(a[43]=[n("控制")]))),_:2,__:[43]},1032,["onClick"]),d(l,{size:"small",type:"warning",onClick:a=>(e=>{C.info(`设备 ${e.name} 已进入维护模式`)})(e.row)},{default:o((()=>a[44]||(a[44]=[n("维护")]))),_:2,__:[44]},1032,["onClick"]),d(l,{size:"small",type:"danger",onClick:a=>(async e=>{try{await x.confirm(`确定要删除设备"${e.name}"吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),Te.value=Te.value.filter((a=>a.id!==e.id)),C.success("删除成功")}catch{C.info("已取消删除")}})(e.row)},{default:o((()=>a[45]||(a[45]=[n("删除")]))),_:2,__:[45]},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),d(Ra,{modelValue:Ye.value,"onUpdate:modelValue":a[6]||(a[6]=e=>Ye.value=e),title:"设备详情",width:"900px","before-close":fa},{default:o((()=>[Be.value?(u(),i("div",O,[d(Ee,{class:"info-card",shadow:"never"},{header:o((()=>[r("div",Q,[a[47]||(a[47]=r("span",null,"设备信息",-1)),d(l,{type:"primary",size:"small",onClick:a[4]||(a[4]=e=>(e=>{Re.value="编辑设备",He.value={...e},Me.value=!0})(Be.value))},{default:o((()=>a[46]||(a[46]=[n("编辑")]))),_:1,__:[46]})])])),default:o((()=>[r("div",S,[r("div",W,[d(Ma,{src:Be.value.image||ba(Be.value.type),fit:"cover",class:"device-image","preview-src-list":[Be.value.image||ba(Be.value.type)],"preview-teleported":""},{error:o((()=>[r("div",X,[d(t,null,{default:o((()=>[d(c(g))])),_:1}),a[48]||(a[48]=r("span",null,"图片加载失败",-1))])])),_:1},8,["src","preview-src-list"]),r("div",Z,[d(l,{type:"primary",size:"small",onClick:ka},{default:o((()=>a[49]||(a[49]=[n("更换图片")]))),_:1,__:[49]})])])]),d(ra,{gutter:20},{default:o((()=>[d(Ze,{span:12},{default:o((()=>[r("div",ee,[a[50]||(a[50]=r("label",null,"设备名称：",-1)),r("span",null,v(Be.value.name),1)])])),_:1}),d(Ze,{span:12},{default:o((()=>[r("div",ae,[a[55]||(a[55]=r("label",null,"设备类型：",-1)),"sensor"===Be.value.type?(u(),h(Ta,{key:0,type:"primary"},{default:o((()=>a[51]||(a[51]=[n("传感器")]))),_:1,__:[51]})):"controller"===Be.value.type?(u(),h(Ta,{key:1,type:"success"},{default:o((()=>a[52]||(a[52]=[n("控制器")]))),_:1,__:[52]})):"camera"===Be.value.type?(u(),h(Ta,{key:2,type:"warning"},{default:o((()=>a[53]||(a[53]=[n("摄像头")]))),_:1,__:[53]})):"irrigation"===Be.value.type?(u(),h(Ta,{key:3,type:"info"},{default:o((()=>a[54]||(a[54]=[n("灌溉设备")]))),_:1,__:[54]})):w("",!0)])])),_:1})])),_:1}),d(ra,{gutter:20},{default:o((()=>[d(Ze,{span:12},{default:o((()=>[r("div",le,[a[56]||(a[56]=r("label",null,"设备位置：",-1)),r("span",null,v(Be.value.location),1)])])),_:1}),d(Ze,{span:12},{default:o((()=>[r("div",te,[a[61]||(a[61]=r("label",null,"设备状态：",-1)),"online"===Be.value.status?(u(),h(Ta,{key:0,type:"success"},{default:o((()=>a[57]||(a[57]=[n("在线")]))),_:1,__:[57]})):"offline"===Be.value.status?(u(),h(Ta,{key:1,type:"danger"},{default:o((()=>a[58]||(a[58]=[n("离线")]))),_:1,__:[58]})):"error"===Be.value.status?(u(),h(Ta,{key:2,type:"danger"},{default:o((()=>a[59]||(a[59]=[n("故障")]))),_:1,__:[59]})):"maintenance"===Be.value.status?(u(),h(Ta,{key:3,type:"warning"},{default:o((()=>a[60]||(a[60]=[n("维护中")]))),_:1,__:[60]})):w("",!0)])])),_:1})])),_:1}),d(ra,{gutter:20},{default:o((()=>[d(Ze,{span:12},{default:o((()=>[r("div",se,[a[62]||(a[62]=r("label",null,"设备电量：",-1)),r("span",null,v(Be.value.battery)+"%",1)])])),_:1}),d(Ze,{span:12},{default:o((()=>[r("div",ue,[a[63]||(a[63]=r("label",null,"最后更新：",-1)),r("span",null,v(Be.value.lastUpdate),1)])])),_:1})])),_:1}),d(ra,{gutter:20},{default:o((()=>[d(Ze,{span:24},{default:o((()=>[r("div",ie,[a[64]||(a[64]=r("label",null,"设备描述：",-1)),r("div",de,v(Be.value.description),1)])])),_:1})])),_:1})])),_:1}),d(Ee,{class:"data-card",shadow:"never"},{header:o((()=>a[65]||(a[65]=[r("div",{class:"card-header"},[r("span",null,"实时数据")],-1)]))),default:o((()=>[d(ra,{gutter:20},{default:o((()=>[(u(!0),i(b,null,k(Pe.value,((e,a)=>(u(),h(Ze,{span:6,key:a},{default:o((()=>[r("div",oe,[r("div",re,v(e.label),1),r("div",ne,v(e.value)+v(e.unit),1),r("div",{class:V(["data-status",e.status])},v(e.statusText),3)])])),_:2},1024)))),128))])),_:1})])),_:1}),d(Ee,{class:"chart-card",shadow:"never"},{header:o((()=>[r("div",ce,[a[66]||(a[66]=r("span",null,"历史数据趋势",-1)),d(xa,{modelValue:Fe.value,"onUpdate:modelValue":a[5]||(a[5]=e=>Fe.value=e),size:"small",style:{width:"120px"}},{default:o((()=>[d(Ca,{label:"温度",value:"temperature"}),d(Ca,{label:"湿度",value:"humidity"}),d(Ca,{label:"土壤湿度",value:"soil"}),d(Ca,{label:"光照",value:"light"})])),_:1},8,["modelValue"])])])),default:o((()=>[a[67]||(a[67]=r("div",{id:"historyChart",style:{height:"300px"}},null,-1))])),_:1,__:[67]})])):w("",!0)])),_:1},8,["modelValue"]),d(Ra,{modelValue:Me.value,"onUpdate:modelValue":a[14]||(a[14]=e=>Me.value=e),title:Re.value,width:"800px","before-close":ya},{footer:o((()=>[r("div",me,[d(l,{onClick:a[13]||(a[13]=e=>Me.value=!1)},{default:o((()=>a[70]||(a[70]=[n("取消")]))),_:1,__:[70]}),d(l,{type:"primary",onClick:la},{default:o((()=>a[71]||(a[71]=[n("提交")]))),_:1,__:[71]})])])),default:o((()=>[d(Da,{model:He.value,rules:Je,ref_key:"deviceFormRef",ref:Ae,"label-width":"120px"},{default:o((()=>[d(Aa,{label:"设备名称",prop:"name"},{default:o((()=>[d(na,{modelValue:He.value.name,"onUpdate:modelValue":a[7]||(a[7]=e=>He.value.name=e),placeholder:"请输入设备名称"},null,8,["modelValue"])])),_:1}),d(Aa,{label:"设备类型",prop:"type"},{default:o((()=>[d(xa,{modelValue:He.value.type,"onUpdate:modelValue":a[8]||(a[8]=e=>He.value.type=e),placeholder:"请选择设备类型",style:{width:"100%"}},{default:o((()=>[d(Ca,{label:"传感器",value:"sensor"}),d(Ca,{label:"控制器",value:"controller"}),d(Ca,{label:"摄像头",value:"camera"}),d(Ca,{label:"灌溉设备",value:"irrigation"})])),_:1},8,["modelValue"])])),_:1}),d(Aa,{label:"设备位置",prop:"location"},{default:o((()=>[d(na,{modelValue:He.value.location,"onUpdate:modelValue":a[9]||(a[9]=e=>He.value.location=e),placeholder:"请输入设备位置"},null,8,["modelValue"])])),_:1}),d(Aa,{label:"设备描述",prop:"description"},{default:o((()=>[d(na,{modelValue:He.value.description,"onUpdate:modelValue":a[10]||(a[10]=e=>He.value.description=e),type:"textarea",rows:4,placeholder:"请输入设备描述"},null,8,["modelValue"])])),_:1}),d(Aa,{label:"设备图片"},{default:o((()=>[r("div",pe,[He.value.image?(u(),h(Ma,{key:0,src:He.value.image,fit:"cover",class:"form-device-image","preview-src-list":[He.value.image],"preview-teleported":""},null,8,["src","preview-src-list"])):(u(),i("div",ve,[d(t,null,{default:o((()=>[d(c(g))])),_:1}),a[68]||(a[68]=r("span",null,"暂无图片",-1))])),d(l,{type:"primary",onClick:Va,style:{"margin-top":"10px"}},{default:o((()=>a[69]||(a[69]=[n(" 选择图片 ")]))),_:1,__:[69]})])])),_:1}),d(Aa,{label:"设备参数"},{default:o((()=>[d(ra,{gutter:20},{default:o((()=>[d(Ze,{span:12},{default:o((()=>[d(na,{modelValue:He.value.parameters.interval,"onUpdate:modelValue":a[11]||(a[11]=e=>He.value.parameters.interval=e),placeholder:"数据采集间隔(秒)"},null,8,["modelValue"])])),_:1}),d(Ze,{span:12},{default:o((()=>[d(na,{modelValue:He.value.parameters.threshold,"onUpdate:modelValue":a[12]||(a[12]=e=>He.value.parameters.threshold=e),placeholder:"告警阈值"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"]),d(Ra,{modelValue:De.value,"onUpdate:modelValue":a[20]||(a[20]=e=>De.value=e),title:"设备控制",width:"600px","before-close":ha},{footer:o((()=>[r("div",ge,[d(l,{onClick:a[19]||(a[19]=e=>De.value=!1)},{default:o((()=>a[78]||(a[78]=[n("取消")]))),_:1,__:[78]}),d(l,{type:"primary",onClick:sa},{default:o((()=>a[79]||(a[79]=[n("确认控制")]))),_:1,__:[79]})])])),default:o((()=>[Be.value?(u(),i("div",_e,[d(ra,{gutter:20},{default:o((()=>[d(Ze,{span:12},{default:o((()=>[d(Ee,null,{header:o((()=>a[72]||(a[72]=[n("开关控制")]))),default:o((()=>[r("div",fe,[a[73]||(a[73]=r("span",null,"设备开关",-1)),d(La,{modelValue:Ie.value.power,"onUpdate:modelValue":a[15]||(a[15]=e=>Ie.value.power=e),onChange:ma},null,8,["modelValue"])]),"irrigation"===Be.value.type?(u(),i("div",ye,[a[74]||(a[74]=r("span",null,"灌溉开关",-1)),d(La,{modelValue:Ie.value.irrigation,"onUpdate:modelValue":a[16]||(a[16]=e=>Ie.value.irrigation=e),onChange:_a},null,8,["modelValue"])])):w("",!0)])),_:1})])),_:1}),d(Ze,{span:12},{default:o((()=>[d(Ee,null,{header:o((()=>a[75]||(a[75]=[n("参数设置")]))),default:o((()=>[r("div",he,[a[76]||(a[76]=r("span",null,"采集间隔",-1)),d(qa,{modelValue:Ie.value.interval,"onUpdate:modelValue":a[17]||(a[17]=e=>Ie.value.interval=e),min:1,max:3600,size:"small"},null,8,["modelValue"])]),r("div",we,[a[77]||(a[77]=r("span",null,"告警阈值",-1)),d(qa,{modelValue:Ie.value.threshold,"onUpdate:modelValue":a[18]||(a[18]=e=>Ie.value.threshold=e),min:0,max:100,size:"small"},null,8,["modelValue"])])])),_:1})])),_:1})])),_:1})])):w("",!0)])),_:1},8,["modelValue"]),d(Ra,{modelValue:Le.value,"onUpdate:modelValue":a[21]||(a[21]=e=>Le.value=e),title:"数据分析",width:"1200px","before-close":wa},{default:o((()=>[r("div",be,[d(ra,{gutter:20,style:{"margin-bottom":"30px"}},{default:o((()=>[d(Ze,{span:6},{default:o((()=>[d(Ee,{class:"stat-card"},{default:o((()=>[r("div",ke,v(Qe.value),1),a[80]||(a[80]=r("div",{class:"stat-label"},"设备总数",-1))])),_:1,__:[80]})])),_:1}),d(Ze,{span:6},{default:o((()=>[d(Ee,{class:"stat-card"},{default:o((()=>[r("div",Ve,v(Se.value),1),a[81]||(a[81]=r("div",{class:"stat-label"},"在线设备",-1))])),_:1,__:[81]})])),_:1}),d(Ze,{span:6},{default:o((()=>[d(Ee,{class:"stat-card"},{default:o((()=>[r("div",Ce,v(We.value),1),a[82]||(a[82]=r("div",{class:"stat-label"},"故障设备",-1))])),_:1,__:[82]})])),_:1}),d(Ze,{span:6},{default:o((()=>[d(Ee,{class:"stat-card"},{default:o((()=>[r("div",xe,v(Xe.value),1),a[83]||(a[83]=r("div",{class:"stat-label"},"数据点数",-1))])),_:1,__:[83]})])),_:1})])),_:1}),d(ra,{gutter:20},{default:o((()=>[d(Ze,{span:12},{default:o((()=>[d(Ee,null,{header:o((()=>a[84]||(a[84]=[n("设备状态分布")]))),default:o((()=>[a[85]||(a[85]=r("div",{id:"statusChart",style:{height:"300px"}},null,-1))])),_:1,__:[85]})])),_:1}),d(Ze,{span:12},{default:o((()=>[d(Ee,null,{header:o((()=>a[86]||(a[86]=[n("环境数据趋势")]))),default:o((()=>[a[87]||(a[87]=r("div",{id:"trendChart",style:{height:"300px"}},null,-1))])),_:1,__:[87]})])),_:1})])),_:1})])])),_:1},8,["modelValue"]),d(Ra,{modelValue:qe.value,"onUpdate:modelValue":a[22]||(a[22]=e=>qe.value=e),title:"告警管理",width:"1000px","before-close":ga},{default:o((()=>[r("div",Ue,[r("div",ze,[d(l,{type:"primary",onClick:ca},{default:o((()=>a[88]||(a[88]=[n("添加告警规则")]))),_:1,__:[88]}),d(l,{onClick:pa},{default:o((()=>a[89]||(a[89]=[n("清空所有告警")]))),_:1,__:[89]})]),d(Ba,{data:$e.value,style:{width:"100%","margin-top":"20px"}},{default:o((()=>[d(za,{prop:"device",label:"设备","min-width":"120"}),d(za,{prop:"type",label:"告警类型","min-width":"120"},{default:o((e=>["temperature"===e.row.type?(u(),h(Ta,{key:0,type:"danger"},{default:o((()=>a[90]||(a[90]=[n("温度异常")]))),_:1,__:[90]})):"humidity"===e.row.type?(u(),h(Ta,{key:1,type:"warning"},{default:o((()=>a[91]||(a[91]=[n("湿度异常")]))),_:1,__:[91]})):"soil"===e.row.type?(u(),h(Ta,{key:2,type:"info"},{default:o((()=>a[92]||(a[92]=[n("土壤异常")]))),_:1,__:[92]})):"device"===e.row.type?(u(),h(Ta,{key:3,type:"danger"},{default:o((()=>a[93]||(a[93]=[n("设备故障")]))),_:1,__:[93]})):w("",!0)])),_:1}),d(za,{prop:"message",label:"告警信息","min-width":"200"}),d(za,{prop:"time",label:"告警时间","min-width":"150"}),d(za,{prop:"status",label:"状态","min-width":"100"},{default:o((e=>["active"===e.row.status?(u(),h(Ta,{key:0,type:"danger"},{default:o((()=>a[94]||(a[94]=[n("未处理")]))),_:1,__:[94]})):(u(),h(Ta,{key:1,type:"success"},{default:o((()=>a[95]||(a[95]=[n("已处理")]))),_:1,__:[95]}))])),_:1}),d(za,{label:"操作","min-width":"150"},{default:o((e=>[d(l,{size:"small",type:"success",onClick:a=>(e=>{e.status="handled",C.success("告警已处理")})(e.row)},{default:o((()=>a[96]||(a[96]=[n("处理")]))),_:2,__:[96]},1032,["onClick"]),d(l,{size:"small",type:"danger",onClick:a=>(e=>{$e.value=$e.value.filter((a=>a.id!==e.id)),C.success("告警已删除")})(e.row)},{default:o((()=>a[97]||(a[97]=[n("删除")]))),_:2,__:[97]},1032,["onClick"])])),_:1})])),_:1},8,["data"])])])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-d51a2586"]]);export{Te as default};
