import{ref as e,onMounted as a,resolveComponent as l,openBlock as t,createElementBlock as n,Fragment as d,createElementVNode as i,createVNode as s,withCtx as o,createTextVNode as r,toDisplayString as u,createBlock as p,createCommentVNode as m}from"vue";import{ElMessage as c,ElMessageBox as _}from"element-plus";import"./http-Dy8u1s8a.js";import{_ as y}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./axios-DjXdQO6G.js";import"./index-BOpLbFaH.js";const f={class:"employee-list-container"},w={class:"header"},h=["onClick"],v={key:0,class:"employee-detail"},k={class:"card-header"},b={class:"detail-item"},g={class:"detail-item"},j={class:"detail-item"},C={class:"detail-item"},z={class:"detail-item"},x={class:"detail-item"},R={class:"card-header"},T={class:"header-actions"},V=y({__name:"employee",setup(y){const V=[{uid:"emp001",realname:"张三",email:"zhangsan@company.com",telephone:"13800138001",department:{name:"技术部"},status:1,date_joined:"2023-01-15"},{uid:"emp002",realname:"李四",email:"lisi@company.com",telephone:"13800138002",department:{name:"人事部"},status:1,date_joined:"2023-02-20"},{uid:"emp003",realname:"王五",email:"wangwu@company.com",telephone:"13800138003",department:{name:"财务部"},status:2,date_joined:"2023-03-10"},{uid:"emp004",realname:"赵六",email:"zhaoliu@company.com",telephone:"13800138004",department:{name:"市场部"},status:1,date_joined:"2023-04-05"},{uid:"emp005",realname:"钱七",email:"qianqi@company.com",telephone:"13800138005",department:{name:"技术部"},status:3,date_joined:"2023-05-12"},{uid:"emp006",realname:"孙八",email:"sunba@company.com",telephone:"13800138006",department:{name:"人事部"},status:1,date_joined:"2023-06-18"},{uid:"emp007",realname:"周九",email:"zhoujiu@company.com",telephone:"13800138007",department:{name:"财务部"},status:1,date_joined:"2023-07-22"},{uid:"emp008",realname:"吴十",email:"wushi@company.com",telephone:"13800138008",department:{name:"市场部"},status:2,date_joined:"2023-08-30"}],q=e([]),B=e(!1),W=e(null),$=async()=>{try{await new Promise((e=>setTimeout(e,500))),q.value=V,c.success("员工列表加载成功")}catch(e){c.error("获取员工列表失败")}},D=e=>{c.info(`编辑员工: ${e.realname}`)};return a($),(e,a)=>{const y=l("el-button"),V=l("el-table-column"),I=l("el-tag"),P=l("el-table"),U=l("el-card"),A=l("el-col"),E=l("el-row"),F=l("el-dialog");return t(),n(d,null,[i("div",f,[s(U,null,{default:o((()=>[i("div",w,[a[3]||(a[3]=i("span",null,"员工列表",-1)),s(y,{type:"primary",onClick:$,size:"small",style:{float:"right"}},{default:o((()=>a[2]||(a[2]=[r("刷新")]))),_:1,__:[2]})]),s(P,{data:q.value,style:{width:"100%","margin-top":"20px"},fit:"true"},{default:o((()=>[s(V,{prop:"realname",label:"姓名","min-width":"120"},{default:o((e=>[i("span",{class:"clickable-name",onClick:a=>{return l=e.row,W.value=l,void(B.value=!0);var l}},u(e.row.realname),9,h)])),_:1}),s(V,{prop:"email",label:"邮箱","min-width":"200"}),s(V,{prop:"department.name",label:"部门","min-width":"120"}),s(V,{prop:"status",label:"状态","min-width":"100"},{default:o((e=>[1===e.row.status?(t(),p(I,{key:0,type:"success"},{default:o((()=>a[4]||(a[4]=[r("已激活")]))),_:1,__:[4]})):2===e.row.status?(t(),p(I,{key:1,type:"info"},{default:o((()=>a[5]||(a[5]=[r("未激活")]))),_:1,__:[5]})):(t(),p(I,{key:2,type:"danger"},{default:o((()=>a[6]||(a[6]=[r("锁定")]))),_:1,__:[6]}))])),_:1}),s(V,{prop:"date_joined",label:"入职时间","min-width":"120"}),s(V,{label:"操作","min-width":"200"},{default:o((e=>[s(y,{size:"small",type:"primary",onClick:a=>D(e.row)},{default:o((()=>a[7]||(a[7]=[r("编辑")]))),_:2,__:[7]},1032,["onClick"]),s(y,{size:"small",type:"danger",onClick:a=>(async e=>{try{await _.confirm(`确定要删除员工 ${e.realname} 吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),q.value=q.value.filter((a=>a.uid!==e.uid)),c.success("删除成功")}catch{c.info("已取消删除")}})(e.row)},{default:o((()=>a[8]||(a[8]=[r("删除")]))),_:2,__:[8]},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1})]),s(F,{modelValue:B.value,"onUpdate:modelValue":a[1]||(a[1]=e=>B.value=e),title:"员工详情",width:"900px","before-close":e.handleClose},{default:o((()=>[W.value?(t(),n("div",v,[s(U,{class:"info-card",shadow:"never"},{header:o((()=>[i("div",k,[a[10]||(a[10]=i("span",null,"基本信息",-1)),s(y,{type:"primary",size:"small",onClick:a[0]||(a[0]=e=>D(W.value))},{default:o((()=>a[9]||(a[9]=[r("编辑信息")]))),_:1,__:[9]})])])),default:o((()=>[s(E,{gutter:20},{default:o((()=>[s(A,{span:8},{default:o((()=>[i("div",b,[a[11]||(a[11]=i("label",null,"姓名：",-1)),i("span",null,u(W.value.realname),1)])])),_:1}),s(A,{span:8},{default:o((()=>[i("div",g,[a[12]||(a[12]=i("label",null,"邮箱：",-1)),i("span",null,u(W.value.email),1)])])),_:1}),s(A,{span:8},{default:o((()=>[i("div",j,[a[13]||(a[13]=i("label",null,"电话：",-1)),i("span",null,u(W.value.telephone),1)])])),_:1})])),_:1}),s(E,{gutter:20},{default:o((()=>[s(A,{span:8},{default:o((()=>{var e;return[i("div",C,[a[14]||(a[14]=i("label",null,"部门：",-1)),i("span",null,u(null==(e=W.value.department)?void 0:e.name),1)])]})),_:1}),s(A,{span:8},{default:o((()=>[i("div",z,[a[18]||(a[18]=i("label",null,"状态：",-1)),1===W.value.status?(t(),p(I,{key:0,type:"success"},{default:o((()=>a[15]||(a[15]=[r("已激活")]))),_:1,__:[15]})):2===W.value.status?(t(),p(I,{key:1,type:"info"},{default:o((()=>a[16]||(a[16]=[r("未激活")]))),_:1,__:[16]})):(t(),p(I,{key:2,type:"danger"},{default:o((()=>a[17]||(a[17]=[r("锁定")]))),_:1,__:[17]}))])])),_:1}),s(A,{span:8},{default:o((()=>[i("div",x,[a[19]||(a[19]=i("label",null,"入职时间：",-1)),i("span",null,u(W.value.date_joined),1)])])),_:1})])),_:1})])),_:1}),s(U,{class:"work-record-card",shadow:"never"},{header:o((()=>[i("div",R,[a[22]||(a[22]=i("span",null,"工作记录",-1)),i("div",T,[s(y,{type:"success",size:"small",onClick:e.addWorkRecord},{default:o((()=>a[20]||(a[20]=[r("添加记录")]))),_:1,__:[20]},8,["onClick"]),s(y,{type:"primary",size:"small",onClick:e.refreshWorkRecords},{default:o((()=>a[21]||(a[21]=[r("刷新")]))),_:1,__:[21]},8,["onClick"])])])])),default:o((()=>[s(P,{data:e.workRecords,style:{width:"100%"},stripe:""},{default:o((()=>[s(V,{prop:"date",label:"日期",width:"120"}),s(V,{prop:"type",label:"类型",width:"100"},{default:o((e=>["请假"===e.row.type?(t(),p(I,{key:0,type:"warning"},{default:o((()=>[r(u(e.row.type),1)])),_:2},1024)):"加班"===e.row.type?(t(),p(I,{key:1,type:"danger"},{default:o((()=>[r(u(e.row.type),1)])),_:2},1024)):(t(),p(I,{key:2,type:"success"},{default:o((()=>[r(u(e.row.type),1)])),_:2},1024))])),_:1}),s(V,{prop:"title",label:"标题","min-width":"150"}),s(V,{prop:"description",label:"描述","min-width":"200"}),s(V,{prop:"status",label:"状态",width:"100"},{default:o((e=>["已批准"===e.row.status?(t(),p(I,{key:0,type:"success"},{default:o((()=>[r(u(e.row.status),1)])),_:2},1024)):"待审批"===e.row.status?(t(),p(I,{key:1,type:"warning"},{default:o((()=>[r(u(e.row.status),1)])),_:2},1024)):(t(),p(I,{key:2,type:"danger"},{default:o((()=>[r(u(e.row.status),1)])),_:2},1024))])),_:1}),s(V,{prop:"approver",label:"审批人",width:"100"}),s(V,{label:"操作",width:"120",fixed:"right"},{default:o((l=>[s(y,{size:"small",type:"primary",onClick:a=>e.viewRecordDetail(l.row)},{default:o((()=>a[23]||(a[23]=[r("查看")]))),_:2,__:[23]},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1})])):m("",!0)])),_:1},8,["modelValue","before-close"])],64)}}},[["__scopeId","data-v-0e3be16b"]]);export{V as default};
