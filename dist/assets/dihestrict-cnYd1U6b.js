import{ref as e,reactive as l,computed as a,onMounted as t,resolveComponent as o,resolveDirective as u,openBlock as d,createElementBlock as i,createElementVNode as n,createVNode as s,withCtx as r,unref as p,createTextVNode as c,toDisplayString as m,withKeys as v,withDirectives as f,createBlock as _,createCommentVNode as g}from"vue";import{ElMessageBox as b,ElMessage as h}from"element-plus";import{K as y,J as V,l as w,g as C,N as D,v as U,F as k}from"./index-BOpLbFaH.js";import{_ as P}from"./_plugin-vue_export-helper-BCo6x5W8.js";const x={class:"district-container"},z={class:"page-header"},S={class:"header-actions"},T={class:"overview-section"},G={class:"card-content"},j={class:"card-icon primary"},q={class:"card-info"},F={class:"card-value"},I={class:"card-content"},O={class:"card-icon success"},B={class:"card-info"},K={class:"card-value"},L={class:"card-content"},$={class:"card-icon warning"},J={class:"card-info"},N={class:"card-value"},R={class:"card-content"},A={class:"card-icon info"},E={class:"card-info"},H={class:"card-value"},M={class:"search-section"},Q={class:"district-list"},W={class:"pagination-container"},X={class:"dialog-footer"},Y={key:0,class:"district-detail"},Z=P({__name:"dihestrict",setup(P){const Z=e(!1),ee=e(!1),le=e(!1),ae=e(!1),te=e(),oe=e(null),ue=l({name:"",level:"",region:""}),de=l({currentPage:1,pageSize:10,total:0}),ie=l({id:null,name:"",level:"",region:"",postcode:"",population:0,area:0,gdp:0,companies:0,status:"normal",establishDate:"",location:"",description:""}),ne={name:[{required:!0,message:"请输入区县名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],level:[{required:!0,message:"请选择行政级别",trigger:"change"}],region:[{required:!0,message:"请选择所属区域",trigger:"change"}],postcode:[{pattern:/^\d{6}$/,message:"邮政编码格式不正确",trigger:"blur"}],population:[{required:!0,message:"请输入人口数量",trigger:"blur"}],area:[{required:!0,message:"请输入面积",trigger:"blur"}]},se=l({total:0,totalPopulation:0,totalGDP:0,totalCompanies:0}),re=e([{id:1,name:"朝阳区",level:"district",region:"urban",postcode:"100020",population:345.2,area:470.8,gdp:1250.5,companies:15680,status:"normal",establishDate:"1958-05-01",location:"北京市东部",description:"北京市中心城区之一，经济发达，文化繁荣",createTime:"2020-01-01 10:00:00"},{id:2,name:"海淀区",level:"district",region:"urban",postcode:"100080",population:332.1,area:431,gdp:1180.3,companies:14250,status:"normal",establishDate:"1952-09-01",location:"北京市西北部",description:"科技教育中心，中关村科技园区所在地",createTime:"2020-01-01 10:00:00"},{id:3,name:"昌平区",level:"district",region:"suburban",postcode:"102200",population:196.8,area:1343.5,gdp:680.2,companies:8560,status:"developing",establishDate:"1999-09-16",location:"北京市北部",description:"北京市重要的生态涵养区和科技创新基地",createTime:"2020-01-01 10:00:00"},{id:4,name:"密云区",level:"district",region:"rural",postcode:"101500",population:45.6,area:2229.5,gdp:180.5,companies:2340,status:"developing",establishDate:"2015-11-17",location:"北京市东北部",description:"生态涵养区，以旅游业和农业为主",createTime:"2020-01-01 10:00:00"}]),pe=a((()=>ie.id?"编辑区县":"添加区县")),ce=e=>({district:"市辖区",county:"县级市","county-level":"县",autonomous:"自治县"}[e]||"未知"),me=e=>({district:"primary",county:"success","county-level":"warning",autonomous:"info"}[e]||""),ve=e=>({urban:"城区",suburban:"郊区",rural:"农村"}[e]||"未知"),fe=e=>({urban:"primary",suburban:"warning",rural:"success"}[e]||""),_e=e=>({normal:"正常",developing:"发展中",pending:"待开发"}[e]||"未知"),ge=e=>({normal:"success",developing:"warning",pending:"info"}[e]||""),be=e=>e.toLocaleString(),he=()=>{ie.id=null,le.value=!0},ye=async()=>{if(te.value)try{if(await te.value.validate(),ee.value=!0,await new Promise((e=>setTimeout(e,1e3))),ie.id){const e=re.value.findIndex((e=>e.id===ie.id));e>-1&&(re.value[e]={...ie}),h.success("编辑成功")}else{const e={...ie,id:Date.now(),createTime:(new Date).toLocaleString()};re.value.unshift(e),h.success("添加成功")}Pe(),le.value=!1,Ve()}catch(e){}finally{ee.value=!1}},Ve=()=>{te.value&&te.value.resetFields(),Object.assign(ie,{id:null,name:"",level:"",region:"",postcode:"",population:0,area:0,gdp:0,companies:0,status:"normal",establishDate:"",location:"",description:""})},we=()=>{de.currentPage=1},Ce=()=>{Object.assign(ue,{name:"",level:"",region:""}),we()},De=e=>{de.pageSize=e},Ue=e=>{de.currentPage=e},ke=()=>{h.success("区县数据导出成功")},Pe=()=>{se.total=re.value.length,se.totalPopulation=re.value.reduce(((e,l)=>e+l.population),0),se.totalGDP=re.value.reduce(((e,l)=>e+l.gdp),0),se.totalCompanies=re.value.reduce(((e,l)=>e+l.companies),0)};return t((()=>{Pe(),de.total=re.value.length})),(e,l)=>{const a=o("el-icon"),t=o("el-button"),P=o("el-card"),xe=o("el-col"),ze=o("el-row"),Se=o("el-input"),Te=o("el-option"),Ge=o("el-select"),je=o("el-table-column"),qe=o("el-tag"),Fe=o("el-table"),Ie=o("el-pagination"),Oe=o("el-form-item"),Be=o("el-input-number"),Ke=o("el-date-picker"),Le=o("el-form"),$e=o("el-dialog"),Je=o("el-descriptions-item"),Ne=o("el-descriptions"),Re=u("loading");return d(),i("div",x,[n("div",z,[l[22]||(l[22]=n("h2",null,"区县管理系统",-1)),n("div",S,[s(t,{type:"success",onClick:ke},{default:r((()=>[s(a,null,{default:r((()=>[s(p(y))])),_:1}),l[20]||(l[20]=c(" 导出数据 "))])),_:1,__:[20]}),s(t,{type:"primary",onClick:he},{default:r((()=>[s(a,null,{default:r((()=>[s(p(V))])),_:1}),l[21]||(l[21]=c(" 添加区县 "))])),_:1,__:[21]})])]),n("div",T,[s(ze,{gutter:20},{default:r((()=>[s(xe,{span:6},{default:r((()=>[s(P,{class:"overview-card"},{default:r((()=>[n("div",G,[n("div",j,[s(a,null,{default:r((()=>[s(p(w))])),_:1})]),n("div",q,[l[23]||(l[23]=n("div",{class:"card-title"},"区县总数",-1)),n("div",F,m(se.total),1)])])])),_:1})])),_:1}),s(xe,{span:6},{default:r((()=>[s(P,{class:"overview-card"},{default:r((()=>[n("div",I,[n("div",O,[s(a,null,{default:r((()=>[s(p(C))])),_:1})]),n("div",B,[l[24]||(l[24]=n("div",{class:"card-title"},"总人口",-1)),n("div",K,m(be(se.totalPopulation)),1)])])])),_:1})])),_:1}),s(xe,{span:6},{default:r((()=>[s(P,{class:"overview-card"},{default:r((()=>{return[n("div",L,[n("div",$,[s(a,null,{default:r((()=>[s(p(D))])),_:1})]),n("div",J,[l[25]||(l[25]=n("div",{class:"card-title"},"GDP总量",-1)),n("div",N,m((e=se.totalGDP,(e/1e4).toFixed(1)+"万亿")),1)])])];var e})),_:1})])),_:1}),s(xe,{span:6},{default:r((()=>[s(P,{class:"overview-card"},{default:r((()=>[n("div",R,[n("div",A,[s(a,null,{default:r((()=>[s(p(U))])),_:1})]),n("div",E,[l[26]||(l[26]=n("div",{class:"card-title"},"企业数量",-1)),n("div",H,m(be(se.totalCompanies)),1)])])])),_:1})])),_:1})])),_:1})]),n("div",M,[s(ze,{gutter:20},{default:r((()=>[s(xe,{span:6},{default:r((()=>[s(Se,{modelValue:ue.name,"onUpdate:modelValue":l[0]||(l[0]=e=>ue.name=e),placeholder:"区县名称",clearable:"",onClear:we,onKeyup:v(we,["enter"])},{prefix:r((()=>[s(a,null,{default:r((()=>[s(p(k))])),_:1})])),_:1},8,["modelValue"])])),_:1}),s(xe,{span:6},{default:r((()=>[s(Ge,{modelValue:ue.level,"onUpdate:modelValue":l[1]||(l[1]=e=>ue.level=e),placeholder:"行政级别",clearable:"",onChange:we},{default:r((()=>[s(Te,{label:"市辖区",value:"district"}),s(Te,{label:"县级市",value:"county"}),s(Te,{label:"县",value:"county-level"}),s(Te,{label:"自治县",value:"autonomous"})])),_:1},8,["modelValue"])])),_:1}),s(xe,{span:6},{default:r((()=>[s(Ge,{modelValue:ue.region,"onUpdate:modelValue":l[2]||(l[2]=e=>ue.region=e),placeholder:"所属区域",clearable:"",onChange:we},{default:r((()=>[s(Te,{label:"城区",value:"urban"}),s(Te,{label:"郊区",value:"suburban"}),s(Te,{label:"农村",value:"rural"})])),_:1},8,["modelValue"])])),_:1}),s(xe,{span:6},{default:r((()=>[s(t,{type:"primary",onClick:we},{default:r((()=>[s(a,null,{default:r((()=>[s(p(k))])),_:1}),l[27]||(l[27]=c(" 搜索 "))])),_:1,__:[27]}),s(t,{onClick:Ce},{default:r((()=>l[28]||(l[28]=[c("重置")]))),_:1,__:[28]})])),_:1})])),_:1})]),n("div",Q,[f((d(),_(Fe,{data:re.value,stripe:""},{default:r((()=>[s(je,{prop:"id",label:"ID",width:"80"}),s(je,{prop:"name",label:"区县名称"}),s(je,{prop:"level",label:"行政级别",width:"120"},{default:r((e=>[s(qe,{type:me(e.row.level)},{default:r((()=>[c(m(ce(e.row.level)),1)])),_:2},1032,["type"])])),_:1}),s(je,{prop:"region",label:"所属区域",width:"100"},{default:r((e=>[s(qe,{type:fe(e.row.region)},{default:r((()=>[c(m(ve(e.row.region)),1)])),_:2},1032,["type"])])),_:1}),s(je,{prop:"population",label:"人口(万)",width:"100"}),s(je,{prop:"area",label:"面积(km²)",width:"120"}),s(je,{prop:"gdp",label:"GDP(亿元)",width:"120"}),s(je,{prop:"companies",label:"企业数量",width:"100"}),s(je,{prop:"status",label:"状态",width:"100"},{default:r((e=>[s(qe,{type:ge(e.row.status)},{default:r((()=>[c(m(_e(e.row.status)),1)])),_:2},1032,["type"])])),_:1}),s(je,{label:"操作",width:"200",fixed:"right"},{default:r((e=>[s(t,{size:"small",onClick:l=>{return a=e.row,oe.value=a,void(ae.value=!0);var a}},{default:r((()=>l[29]||(l[29]=[c("查看")]))),_:2,__:[29]},1032,["onClick"]),s(t,{size:"small",type:"primary",onClick:l=>{return a=e.row,Object.assign(ie,a),void(le.value=!0);var a}},{default:r((()=>l[30]||(l[30]=[c("编辑")]))),_:2,__:[30]},1032,["onClick"]),s(t,{size:"small",type:"danger",onClick:l=>(async e=>{try{await b.confirm(`确定要删除区县"${e.name}"吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const l=re.value.findIndex((l=>l.id===e.id));l>-1&&(re.value.splice(l,1),Pe(),h.success("删除成功"))}catch(l){}})(e.row)},{default:r((()=>l[31]||(l[31]=[c("删除")]))),_:2,__:[31]},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[Re,Z.value]]),n("div",W,[s(Ie,{"current-page":de.currentPage,"onUpdate:currentPage":l[3]||(l[3]=e=>de.currentPage=e),"page-size":de.pageSize,"onUpdate:pageSize":l[4]||(l[4]=e=>de.pageSize=e),"page-sizes":[10,20,50,100],total:de.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:De,onCurrentChange:Ue},null,8,["current-page","page-size","total"])])]),s($e,{modelValue:le.value,"onUpdate:modelValue":l[18]||(l[18]=e=>le.value=e),title:pe.value,width:"700px",onClose:Ve},{footer:r((()=>[n("div",X,[s(t,{onClick:l[17]||(l[17]=e=>le.value=!1)},{default:r((()=>l[32]||(l[32]=[c("取消")]))),_:1,__:[32]}),s(t,{type:"primary",onClick:ye,loading:ee.value},{default:r((()=>l[33]||(l[33]=[c("确定")]))),_:1,__:[33]},8,["loading"])])])),default:r((()=>[s(Le,{model:ie,rules:ne,ref_key:"districtFormRef",ref:te,"label-width":"120px"},{default:r((()=>[s(ze,{gutter:20},{default:r((()=>[s(xe,{span:12},{default:r((()=>[s(Oe,{label:"区县名称",prop:"name"},{default:r((()=>[s(Se,{modelValue:ie.name,"onUpdate:modelValue":l[5]||(l[5]=e=>ie.name=e),placeholder:"请输入区县名称"},null,8,["modelValue"])])),_:1})])),_:1}),s(xe,{span:12},{default:r((()=>[s(Oe,{label:"行政级别",prop:"level"},{default:r((()=>[s(Ge,{modelValue:ie.level,"onUpdate:modelValue":l[6]||(l[6]=e=>ie.level=e),placeholder:"请选择行政级别",style:{width:"100%"}},{default:r((()=>[s(Te,{label:"市辖区",value:"district"}),s(Te,{label:"县级市",value:"county"}),s(Te,{label:"县",value:"county-level"}),s(Te,{label:"自治县",value:"autonomous"})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),s(ze,{gutter:20},{default:r((()=>[s(xe,{span:12},{default:r((()=>[s(Oe,{label:"所属区域",prop:"region"},{default:r((()=>[s(Ge,{modelValue:ie.region,"onUpdate:modelValue":l[7]||(l[7]=e=>ie.region=e),placeholder:"请选择所属区域",style:{width:"100%"}},{default:r((()=>[s(Te,{label:"城区",value:"urban"}),s(Te,{label:"郊区",value:"suburban"}),s(Te,{label:"农村",value:"rural"})])),_:1},8,["modelValue"])])),_:1})])),_:1}),s(xe,{span:12},{default:r((()=>[s(Oe,{label:"邮政编码",prop:"postcode"},{default:r((()=>[s(Se,{modelValue:ie.postcode,"onUpdate:modelValue":l[8]||(l[8]=e=>ie.postcode=e),placeholder:"请输入邮政编码"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),s(ze,{gutter:20},{default:r((()=>[s(xe,{span:12},{default:r((()=>[s(Oe,{label:"人口(万)",prop:"population"},{default:r((()=>[s(Be,{modelValue:ie.population,"onUpdate:modelValue":l[9]||(l[9]=e=>ie.population=e),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1}),s(xe,{span:12},{default:r((()=>[s(Oe,{label:"面积(km²)",prop:"area"},{default:r((()=>[s(Be,{modelValue:ie.area,"onUpdate:modelValue":l[10]||(l[10]=e=>ie.area=e),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),s(ze,{gutter:20},{default:r((()=>[s(xe,{span:12},{default:r((()=>[s(Oe,{label:"GDP(亿元)",prop:"gdp"},{default:r((()=>[s(Be,{modelValue:ie.gdp,"onUpdate:modelValue":l[11]||(l[11]=e=>ie.gdp=e),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1}),s(xe,{span:12},{default:r((()=>[s(Oe,{label:"企业数量",prop:"companies"},{default:r((()=>[s(Be,{modelValue:ie.companies,"onUpdate:modelValue":l[12]||(l[12]=e=>ie.companies=e),min:0,style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),s(ze,{gutter:20},{default:r((()=>[s(xe,{span:12},{default:r((()=>[s(Oe,{label:"区县状态",prop:"status"},{default:r((()=>[s(Ge,{modelValue:ie.status,"onUpdate:modelValue":l[13]||(l[13]=e=>ie.status=e),placeholder:"请选择区县状态",style:{width:"100%"}},{default:r((()=>[s(Te,{label:"正常",value:"normal"}),s(Te,{label:"发展中",value:"developing"}),s(Te,{label:"待开发",value:"pending"})])),_:1},8,["modelValue"])])),_:1})])),_:1}),s(xe,{span:12},{default:r((()=>[s(Oe,{label:"成立时间",prop:"establishDate"},{default:r((()=>[s(Ke,{modelValue:ie.establishDate,"onUpdate:modelValue":l[14]||(l[14]=e=>ie.establishDate=e),type:"date",placeholder:"选择成立时间",style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),s(Oe,{label:"地理位置",prop:"location"},{default:r((()=>[s(Se,{modelValue:ie.location,"onUpdate:modelValue":l[15]||(l[15]=e=>ie.location=e),placeholder:"请输入地理位置描述"},null,8,["modelValue"])])),_:1}),s(Oe,{label:"区县描述",prop:"description"},{default:r((()=>[s(Se,{modelValue:ie.description,"onUpdate:modelValue":l[16]||(l[16]=e=>ie.description=e),type:"textarea",rows:3,placeholder:"请输入区县描述"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"]),s($e,{modelValue:ae.value,"onUpdate:modelValue":l[19]||(l[19]=e=>ae.value=e),title:"区县详情",width:"800px"},{default:r((()=>[oe.value?(d(),i("div",Y,[s(Ne,{column:2,border:""},{default:r((()=>[s(Je,{label:"区县名称"},{default:r((()=>[c(m(oe.value.name),1)])),_:1}),s(Je,{label:"行政级别"},{default:r((()=>[s(qe,{type:me(oe.value.level)},{default:r((()=>[c(m(ce(oe.value.level)),1)])),_:1},8,["type"])])),_:1}),s(Je,{label:"所属区域"},{default:r((()=>[s(qe,{type:fe(oe.value.region)},{default:r((()=>[c(m(ve(oe.value.region)),1)])),_:1},8,["type"])])),_:1}),s(Je,{label:"邮政编码"},{default:r((()=>[c(m(oe.value.postcode),1)])),_:1}),s(Je,{label:"人口"},{default:r((()=>[c(m(oe.value.population)+"万人",1)])),_:1}),s(Je,{label:"面积"},{default:r((()=>[c(m(oe.value.area)+" km²",1)])),_:1}),s(Je,{label:"GDP"},{default:r((()=>[c(m(oe.value.gdp)+"亿元",1)])),_:1}),s(Je,{label:"企业数量"},{default:r((()=>[c(m(oe.value.companies)+"家",1)])),_:1}),s(Je,{label:"区县状态"},{default:r((()=>[s(qe,{type:ge(oe.value.status)},{default:r((()=>[c(m(_e(oe.value.status)),1)])),_:1},8,["type"])])),_:1}),s(Je,{label:"成立时间"},{default:r((()=>[c(m(oe.value.establishDate),1)])),_:1}),s(Je,{label:"地理位置",span:2},{default:r((()=>[c(m(oe.value.location),1)])),_:1}),s(Je,{label:"区县描述",span:2},{default:r((()=>[c(m(oe.value.description||"暂无描述"),1)])),_:1})])),_:1})])):g("",!0)])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-b9520e4d"]]);export{Z as default};
