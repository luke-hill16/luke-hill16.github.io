import{C as e,V as l,u as a,S as t,o,B as u,v as d,b as i,M as n,k as s,c as r,W as p,h as c,y as m,e as v,w as f,O as g,a as _,P as b,I as h,Q as y,l as V,m as w,x as C,i as D,f as U,g as k,J as P}from"./index-DyjvvSaJ.js";const x={class:"district-container"},z={class:"page-header"},S={class:"header-actions"},T={class:"overview-section"},G={class:"card-content"},j={class:"card-icon primary"},q={class:"card-info"},I={class:"card-value"},O={class:"card-content"},B={class:"card-icon success"},F={class:"card-info"},L={class:"card-value"},$={class:"card-content"},J={class:"card-icon warning"},K={class:"card-info"},Q={class:"card-value"},R={class:"card-content"},A={class:"card-icon info"},E={class:"card-info"},H={class:"card-value"},M={class:"search-section"},N={class:"district-list"},W={class:"pagination-container"},X={class:"dialog-footer"},Y={key:0,class:"district-detail"},Z=e({__name:"dihestrict",setup(e){const Z=l(!1),ee=l(!1),le=l(!1),ae=l(!1),te=l(),oe=l(null),ue=a({name:"",level:"",region:""}),de=a({currentPage:1,pageSize:10,total:0}),ie=a({id:null,name:"",level:"",region:"",postcode:"",population:0,area:0,gdp:0,companies:0,status:"normal",establishDate:"",location:"",description:""}),ne={name:[{required:!0,message:"请输入区县名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],level:[{required:!0,message:"请选择行政级别",trigger:"change"}],region:[{required:!0,message:"请选择所属区域",trigger:"change"}],postcode:[{pattern:/^\d{6}$/,message:"邮政编码格式不正确",trigger:"blur"}],population:[{required:!0,message:"请输入人口数量",trigger:"blur"}],area:[{required:!0,message:"请输入面积",trigger:"blur"}]},se=a({total:0,totalPopulation:0,totalGDP:0,totalCompanies:0}),re=l([{id:1,name:"朝阳区",level:"district",region:"urban",postcode:"100020",population:345.2,area:470.8,gdp:1250.5,companies:15680,status:"normal",establishDate:"1958-05-01",location:"北京市东部",description:"北京市中心城区之一，经济发达，文化繁荣",createTime:"2020-01-01 10:00:00"},{id:2,name:"海淀区",level:"district",region:"urban",postcode:"100080",population:332.1,area:431,gdp:1180.3,companies:14250,status:"normal",establishDate:"1952-09-01",location:"北京市西北部",description:"科技教育中心，中关村科技园区所在地",createTime:"2020-01-01 10:00:00"},{id:3,name:"昌平区",level:"district",region:"suburban",postcode:"102200",population:196.8,area:1343.5,gdp:680.2,companies:8560,status:"developing",establishDate:"1999-09-16",location:"北京市北部",description:"北京市重要的生态涵养区和科技创新基地",createTime:"2020-01-01 10:00:00"},{id:4,name:"密云区",level:"district",region:"rural",postcode:"101500",population:45.6,area:2229.5,gdp:180.5,companies:2340,status:"developing",establishDate:"2015-11-17",location:"北京市东北部",description:"生态涵养区，以旅游业和农业为主",createTime:"2020-01-01 10:00:00"}]),pe=t((()=>ie.id?"编辑区县":"添加区县")),ce=e=>({district:"市辖区",county:"县级市","county-level":"县",autonomous:"自治县"}[e]||"未知"),me=e=>({district:"primary",county:"success","county-level":"warning",autonomous:"info"}[e]||""),ve=e=>({urban:"城区",suburban:"郊区",rural:"农村"}[e]||"未知"),fe=e=>({urban:"primary",suburban:"warning",rural:"success"}[e]||""),ge=e=>({normal:"正常",developing:"发展中",pending:"待开发"}[e]||"未知"),_e=e=>({normal:"success",developing:"warning",pending:"info"}[e]||""),be=e=>e.toLocaleString(),he=e=>(e/1e4).toFixed(1)+"万亿",ye=()=>{ie.id=null,le.value=!0},Ve=async()=>{if(te.value)try{if(await te.value.validate(),ee.value=!0,await new Promise((e=>setTimeout(e,1e3))),ie.id){const e=re.value.findIndex((e=>e.id===ie.id));e>-1&&(re.value[e]={...ie}),P.success("编辑成功")}else{const e={...ie,id:Date.now(),createTime:(new Date).toLocaleString()};re.value.unshift(e),P.success("添加成功")}xe(),le.value=!1,we()}catch(e){}finally{ee.value=!1}},we=()=>{te.value&&te.value.resetFields(),Object.assign(ie,{id:null,name:"",level:"",region:"",postcode:"",population:0,area:0,gdp:0,companies:0,status:"normal",establishDate:"",location:"",description:""})},Ce=()=>{de.currentPage=1},De=()=>{Object.assign(ue,{name:"",level:"",region:""}),Ce()},Ue=e=>{de.pageSize=e},ke=e=>{de.currentPage=e},Pe=()=>{P.success("区县数据导出成功")},xe=()=>{se.total=re.value.length,se.totalPopulation=re.value.reduce(((e,l)=>e+l.population),0),se.totalGDP=re.value.reduce(((e,l)=>e+l.gdp),0),se.totalCompanies=re.value.reduce(((e,l)=>e+l.companies),0)};return o((()=>{xe(),de.total=re.value.length})),(e,l)=>{const a=u("el-icon"),t=u("el-button"),o=u("el-card"),ze=u("el-col"),Se=u("el-row"),Te=u("el-input"),Ge=u("el-option"),je=u("el-select"),qe=u("el-table-column"),Ie=u("el-tag"),Oe=u("el-table"),Be=u("el-pagination"),Fe=u("el-form-item"),Le=u("el-input-number"),$e=u("el-date-picker"),Je=u("el-form"),Ke=u("el-dialog"),Qe=u("el-descriptions-item"),Re=u("el-descriptions"),Ae=d("loading");return i(),n("div",x,[s("div",z,[l[22]||(l[22]=s("h2",null,"区县管理系统",-1)),s("div",S,[r(t,{type:"success",onClick:Pe},{default:p((()=>[r(a,null,{default:p((()=>[r(c(m))])),_:1}),l[20]||(l[20]=v(" 导出数据 "))])),_:1,__:[20]}),r(t,{type:"primary",onClick:ye},{default:p((()=>[r(a,null,{default:p((()=>[r(c(f))])),_:1}),l[21]||(l[21]=v(" 添加区县 "))])),_:1,__:[21]})])]),s("div",T,[r(Se,{gutter:20},{default:p((()=>[r(ze,{span:6},{default:p((()=>[r(o,{class:"overview-card"},{default:p((()=>[s("div",G,[s("div",j,[r(a,null,{default:p((()=>[r(c(g))])),_:1})]),s("div",q,[l[23]||(l[23]=s("div",{class:"card-title"},"区县总数",-1)),s("div",I,_(se.total),1)])])])),_:1})])),_:1}),r(ze,{span:6},{default:p((()=>[r(o,{class:"overview-card"},{default:p((()=>[s("div",O,[s("div",B,[r(a,null,{default:p((()=>[r(c(b))])),_:1})]),s("div",F,[l[24]||(l[24]=s("div",{class:"card-title"},"总人口",-1)),s("div",L,_(be(se.totalPopulation)),1)])])])),_:1})])),_:1}),r(ze,{span:6},{default:p((()=>[r(o,{class:"overview-card"},{default:p((()=>[s("div",$,[s("div",J,[r(a,null,{default:p((()=>[r(c(h))])),_:1})]),s("div",K,[l[25]||(l[25]=s("div",{class:"card-title"},"GDP总量",-1)),s("div",Q,_(he(se.totalGDP)),1)])])])),_:1})])),_:1}),r(ze,{span:6},{default:p((()=>[r(o,{class:"overview-card"},{default:p((()=>[s("div",R,[s("div",A,[r(a,null,{default:p((()=>[r(c(y))])),_:1})]),s("div",E,[l[26]||(l[26]=s("div",{class:"card-title"},"企业数量",-1)),s("div",H,_(be(se.totalCompanies)),1)])])])),_:1})])),_:1})])),_:1})]),s("div",M,[r(Se,{gutter:20},{default:p((()=>[r(ze,{span:6},{default:p((()=>[r(Te,{modelValue:ue.name,"onUpdate:modelValue":l[0]||(l[0]=e=>ue.name=e),placeholder:"区县名称",clearable:"",onClear:Ce,onKeyup:V(Ce,["enter"])},{prefix:p((()=>[r(a,null,{default:p((()=>[r(c(w))])),_:1})])),_:1},8,["modelValue"])])),_:1}),r(ze,{span:6},{default:p((()=>[r(je,{modelValue:ue.level,"onUpdate:modelValue":l[1]||(l[1]=e=>ue.level=e),placeholder:"行政级别",clearable:"",onChange:Ce},{default:p((()=>[r(Ge,{label:"市辖区",value:"district"}),r(Ge,{label:"县级市",value:"county"}),r(Ge,{label:"县",value:"county-level"}),r(Ge,{label:"自治县",value:"autonomous"})])),_:1},8,["modelValue"])])),_:1}),r(ze,{span:6},{default:p((()=>[r(je,{modelValue:ue.region,"onUpdate:modelValue":l[2]||(l[2]=e=>ue.region=e),placeholder:"所属区域",clearable:"",onChange:Ce},{default:p((()=>[r(Ge,{label:"城区",value:"urban"}),r(Ge,{label:"郊区",value:"suburban"}),r(Ge,{label:"农村",value:"rural"})])),_:1},8,["modelValue"])])),_:1}),r(ze,{span:6},{default:p((()=>[r(t,{type:"primary",onClick:Ce},{default:p((()=>[r(a,null,{default:p((()=>[r(c(w))])),_:1}),l[27]||(l[27]=v(" 搜索 "))])),_:1,__:[27]}),r(t,{onClick:De},{default:p((()=>l[28]||(l[28]=[v("重置")]))),_:1,__:[28]})])),_:1})])),_:1})]),s("div",N,[C((i(),D(Oe,{data:re.value,stripe:""},{default:p((()=>[r(qe,{prop:"id",label:"ID",width:"80"}),r(qe,{prop:"name",label:"区县名称"}),r(qe,{prop:"level",label:"行政级别",width:"120"},{default:p((e=>[r(Ie,{type:me(e.row.level)},{default:p((()=>[v(_(ce(e.row.level)),1)])),_:2},1032,["type"])])),_:1}),r(qe,{prop:"region",label:"所属区域",width:"100"},{default:p((e=>[r(Ie,{type:fe(e.row.region)},{default:p((()=>[v(_(ve(e.row.region)),1)])),_:2},1032,["type"])])),_:1}),r(qe,{prop:"population",label:"人口(万)",width:"100"}),r(qe,{prop:"area",label:"面积(km²)",width:"120"}),r(qe,{prop:"gdp",label:"GDP(亿元)",width:"120"}),r(qe,{prop:"companies",label:"企业数量",width:"100"}),r(qe,{prop:"status",label:"状态",width:"100"},{default:p((e=>[r(Ie,{type:_e(e.row.status)},{default:p((()=>[v(_(ge(e.row.status)),1)])),_:2},1032,["type"])])),_:1}),r(qe,{label:"操作",width:"200",fixed:"right"},{default:p((e=>[r(t,{size:"small",onClick:l=>(e=>{oe.value=e,ae.value=!0})(e.row)},{default:p((()=>l[29]||(l[29]=[v("查看")]))),_:2,__:[29]},1032,["onClick"]),r(t,{size:"small",type:"primary",onClick:l=>(e=>{Object.assign(ie,e),le.value=!0})(e.row)},{default:p((()=>l[30]||(l[30]=[v("编辑")]))),_:2,__:[30]},1032,["onClick"]),r(t,{size:"small",type:"danger",onClick:l=>(async e=>{try{await k.confirm(`确定要删除区县"${e.name}"吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const l=re.value.findIndex((l=>l.id===e.id));l>-1&&(re.value.splice(l,1),xe(),P.success("删除成功"))}catch{}})(e.row)},{default:p((()=>l[31]||(l[31]=[v("删除")]))),_:2,__:[31]},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[Ae,Z.value]]),s("div",W,[r(Be,{"current-page":de.currentPage,"onUpdate:currentPage":l[3]||(l[3]=e=>de.currentPage=e),"page-size":de.pageSize,"onUpdate:pageSize":l[4]||(l[4]=e=>de.pageSize=e),"page-sizes":[10,20,50,100],total:de.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:Ue,onCurrentChange:ke},null,8,["current-page","page-size","total"])])]),r(Ke,{modelValue:le.value,"onUpdate:modelValue":l[18]||(l[18]=e=>le.value=e),title:pe.value,width:"700px",onClose:we},{footer:p((()=>[s("div",X,[r(t,{onClick:l[17]||(l[17]=e=>le.value=!1)},{default:p((()=>l[32]||(l[32]=[v("取消")]))),_:1,__:[32]}),r(t,{type:"primary",onClick:Ve,loading:ee.value},{default:p((()=>l[33]||(l[33]=[v("确定")]))),_:1,__:[33]},8,["loading"])])])),default:p((()=>[r(Je,{model:ie,rules:ne,ref_key:"districtFormRef",ref:te,"label-width":"120px"},{default:p((()=>[r(Se,{gutter:20},{default:p((()=>[r(ze,{span:12},{default:p((()=>[r(Fe,{label:"区县名称",prop:"name"},{default:p((()=>[r(Te,{modelValue:ie.name,"onUpdate:modelValue":l[5]||(l[5]=e=>ie.name=e),placeholder:"请输入区县名称"},null,8,["modelValue"])])),_:1})])),_:1}),r(ze,{span:12},{default:p((()=>[r(Fe,{label:"行政级别",prop:"level"},{default:p((()=>[r(je,{modelValue:ie.level,"onUpdate:modelValue":l[6]||(l[6]=e=>ie.level=e),placeholder:"请选择行政级别",style:{width:"100%"}},{default:p((()=>[r(Ge,{label:"市辖区",value:"district"}),r(Ge,{label:"县级市",value:"county"}),r(Ge,{label:"县",value:"county-level"}),r(Ge,{label:"自治县",value:"autonomous"})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),r(Se,{gutter:20},{default:p((()=>[r(ze,{span:12},{default:p((()=>[r(Fe,{label:"所属区域",prop:"region"},{default:p((()=>[r(je,{modelValue:ie.region,"onUpdate:modelValue":l[7]||(l[7]=e=>ie.region=e),placeholder:"请选择所属区域",style:{width:"100%"}},{default:p((()=>[r(Ge,{label:"城区",value:"urban"}),r(Ge,{label:"郊区",value:"suburban"}),r(Ge,{label:"农村",value:"rural"})])),_:1},8,["modelValue"])])),_:1})])),_:1}),r(ze,{span:12},{default:p((()=>[r(Fe,{label:"邮政编码",prop:"postcode"},{default:p((()=>[r(Te,{modelValue:ie.postcode,"onUpdate:modelValue":l[8]||(l[8]=e=>ie.postcode=e),placeholder:"请输入邮政编码"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),r(Se,{gutter:20},{default:p((()=>[r(ze,{span:12},{default:p((()=>[r(Fe,{label:"人口(万)",prop:"population"},{default:p((()=>[r(Le,{modelValue:ie.population,"onUpdate:modelValue":l[9]||(l[9]=e=>ie.population=e),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1}),r(ze,{span:12},{default:p((()=>[r(Fe,{label:"面积(km²)",prop:"area"},{default:p((()=>[r(Le,{modelValue:ie.area,"onUpdate:modelValue":l[10]||(l[10]=e=>ie.area=e),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),r(Se,{gutter:20},{default:p((()=>[r(ze,{span:12},{default:p((()=>[r(Fe,{label:"GDP(亿元)",prop:"gdp"},{default:p((()=>[r(Le,{modelValue:ie.gdp,"onUpdate:modelValue":l[11]||(l[11]=e=>ie.gdp=e),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1}),r(ze,{span:12},{default:p((()=>[r(Fe,{label:"企业数量",prop:"companies"},{default:p((()=>[r(Le,{modelValue:ie.companies,"onUpdate:modelValue":l[12]||(l[12]=e=>ie.companies=e),min:0,style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),r(Se,{gutter:20},{default:p((()=>[r(ze,{span:12},{default:p((()=>[r(Fe,{label:"区县状态",prop:"status"},{default:p((()=>[r(je,{modelValue:ie.status,"onUpdate:modelValue":l[13]||(l[13]=e=>ie.status=e),placeholder:"请选择区县状态",style:{width:"100%"}},{default:p((()=>[r(Ge,{label:"正常",value:"normal"}),r(Ge,{label:"发展中",value:"developing"}),r(Ge,{label:"待开发",value:"pending"})])),_:1},8,["modelValue"])])),_:1})])),_:1}),r(ze,{span:12},{default:p((()=>[r(Fe,{label:"成立时间",prop:"establishDate"},{default:p((()=>[r($e,{modelValue:ie.establishDate,"onUpdate:modelValue":l[14]||(l[14]=e=>ie.establishDate=e),type:"date",placeholder:"选择成立时间",style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),r(Fe,{label:"地理位置",prop:"location"},{default:p((()=>[r(Te,{modelValue:ie.location,"onUpdate:modelValue":l[15]||(l[15]=e=>ie.location=e),placeholder:"请输入地理位置描述"},null,8,["modelValue"])])),_:1}),r(Fe,{label:"区县描述",prop:"description"},{default:p((()=>[r(Te,{modelValue:ie.description,"onUpdate:modelValue":l[16]||(l[16]=e=>ie.description=e),type:"textarea",rows:3,placeholder:"请输入区县描述"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"]),r(Ke,{modelValue:ae.value,"onUpdate:modelValue":l[19]||(l[19]=e=>ae.value=e),title:"区县详情",width:"800px"},{default:p((()=>[oe.value?(i(),n("div",Y,[r(Re,{column:2,border:""},{default:p((()=>[r(Qe,{label:"区县名称"},{default:p((()=>[v(_(oe.value.name),1)])),_:1}),r(Qe,{label:"行政级别"},{default:p((()=>[r(Ie,{type:me(oe.value.level)},{default:p((()=>[v(_(ce(oe.value.level)),1)])),_:1},8,["type"])])),_:1}),r(Qe,{label:"所属区域"},{default:p((()=>[r(Ie,{type:fe(oe.value.region)},{default:p((()=>[v(_(ve(oe.value.region)),1)])),_:1},8,["type"])])),_:1}),r(Qe,{label:"邮政编码"},{default:p((()=>[v(_(oe.value.postcode),1)])),_:1}),r(Qe,{label:"人口"},{default:p((()=>[v(_(oe.value.population)+"万人",1)])),_:1}),r(Qe,{label:"面积"},{default:p((()=>[v(_(oe.value.area)+" km²",1)])),_:1}),r(Qe,{label:"GDP"},{default:p((()=>[v(_(oe.value.gdp)+"亿元",1)])),_:1}),r(Qe,{label:"企业数量"},{default:p((()=>[v(_(oe.value.companies)+"家",1)])),_:1}),r(Qe,{label:"区县状态"},{default:p((()=>[r(Ie,{type:_e(oe.value.status)},{default:p((()=>[v(_(ge(oe.value.status)),1)])),_:1},8,["type"])])),_:1}),r(Qe,{label:"成立时间"},{default:p((()=>[v(_(oe.value.establishDate),1)])),_:1}),r(Qe,{label:"地理位置",span:2},{default:p((()=>[v(_(oe.value.location),1)])),_:1}),r(Qe,{label:"区县描述",span:2},{default:p((()=>[v(_(oe.value.description||"暂无描述"),1)])),_:1})])),_:1})])):U("",!0)])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-b9520e4d"]]);export{Z as default};
