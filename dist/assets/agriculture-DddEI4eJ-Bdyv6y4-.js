import{d as e,S as a,m as l,Z as t,s,z as u,I as i,j as d,c as o,P as r,q as n,O as c,G as v,X as p,T as m,H as _,i as f,k as y,N as h,U as w,b as g,$ as b,p as k,M as V,f as C,a as x}from"./index-BEF7uh_8.js";const U={class:"smart-agriculture-container"},z={class:"header"},T={class:"header-actions"},Y={class:"overview-content"},M={class:"overview-icon temperature"},B={class:"overview-info"},R={class:"overview-value"},q={class:"overview-content"},A={class:"overview-icon humidity"},D={class:"overview-info"},P={class:"overview-value"},$={class:"overview-content"},F={class:"overview-icon soil"},L={class:"overview-info"},j={class:"overview-value"},H={class:"overview-content"},I={class:"overview-icon light"},E={class:"overview-info"},G={class:"overview-value"},K={class:"search-section"},N=["onClick"],O={style:{"margin-left":"5px"}},S={key:0,class:"device-detail"},X={class:"card-header"},Z={class:"device-image-section"},J={class:"device-image-container"},Q={class:"image-error"},W={class:"image-overlay"},ee={class:"detail-item"},ae={class:"detail-item"},le={class:"detail-item"},te={class:"detail-item"},se={class:"detail-item"},ue={class:"detail-item"},ie={class:"detail-item"},de={class:"content-text"},oe={class:"data-item"},re={class:"data-label"},ne={class:"data-value"},ce={class:"card-header"},ve={class:"form-image-upload"},pe={key:1,class:"form-image-placeholder"},me={class:"dialog-footer"},_e={key:0,class:"control-panel"},fe={class:"control-item"},ye={key:0,class:"control-item"},he={class:"control-item"},we={class:"control-item"},ge={class:"dialog-footer"},be={class:"analytics-content"},ke={class:"stat-number"},Ve={class:"stat-number"},Ce={class:"stat-number"},xe={class:"stat-number"},Ue={class:"alerts-content"},ze={class:"alerts-header"},Te=e({__name:"agriculture",setup(e){const Te=a([]),Ye=a(!1),Me=a(null),Be=a(!1),Re=a("添加设备"),qe=a(null),Ae=a(!1);a(null);const De=a(!1),Pe=a(!1),$e=a("temperature"),Fe=a([]),Le=a([]),je=a({keyword:"",status:"",type:"",dateRange:[]}),He=[{id:"dev001",name:"温湿度传感器-01",type:"sensor",location:"大棚A区",status:"online",battery:85,lastUpdate:"2024-01-15 14:30:00",description:"监测大棚内温湿度变化，支持远程数据采集。",image:"https://picsum.photos/400/300?random=1"},{id:"dev002",name:"土壤传感器-01",type:"sensor",location:"大棚B区",status:"online",battery:92,lastUpdate:"2024-01-15 14:28:00",description:"监测土壤湿度和pH值，为灌溉提供数据支持。",image:"https://picsum.photos/400/300?random=2"},{id:"dev003",name:"智能灌溉控制器",type:"controller",location:"大棚A区",status:"online",battery:78,lastUpdate:"2024-01-15 14:25:00",description:"根据土壤湿度自动控制灌溉系统。",image:"https://picsum.photos/400/300?random=3"},{id:"dev004",name:"监控摄像头-01",type:"camera",location:"大棚C区",status:"offline",battery:45,lastUpdate:"2024-01-15 13:15:00",description:"24小时监控作物生长状况。",image:"https://picsum.photos/400/300?random=4"},{id:"dev005",name:"自动喷灌设备",type:"irrigation",location:"大棚B区",status:"maintenance",battery:60,lastUpdate:"2024-01-15 12:00:00",description:"自动喷灌系统，支持定时和条件触发。",image:"https://picsum.photos/400/300?random=5"}],Ie=a({name:"",type:"",location:"",description:"",image:"",parameters:{interval:30,threshold:80}}),Ee=a({power:!0,irrigation:!1,interval:30,threshold:80}),Ge={name:[{required:!0,message:"请输入设备名称",trigger:"blur"}],type:[{required:!0,message:"请选择设备类型",trigger:"change"}],location:[{required:!0,message:"请输入设备位置",trigger:"blur"}]},Ke=l((()=>25.6)),Ne=l((()=>68.2)),Oe=l((()=>72.5)),Se=l((()=>45e3)),Xe=l((()=>Te.value.length)),Ze=l((()=>Te.value.filter((e=>"online"===e.status)).length)),Je=l((()=>Te.value.filter((e=>"error"===e.status)).length)),Qe=l((()=>12580)),We=async()=>{try{await new Promise((e=>setTimeout(e,500))),Te.value=He,g.success("设备列表加载成功")}catch(e){g.error("获取设备列表失败")}},ea=()=>{We()},aa=()=>{Re.value="添加设备",Ie.value={name:"",type:"",location:"",description:"",image:"",parameters:{interval:30,threshold:80}},Be.value=!0},la=async()=>{try{await qe.value.validate(),await new Promise((e=>setTimeout(e,1e3))),g.success("添加设备"===Re.value?"设备添加成功":"设备信息更新成功"),Be.value=!1,We()}catch(e){g.error("表单验证失败")}},ta=e=>{Me.value=e,Ye.value=!0,ra(e.id)},sa=async()=>{try{await new Promise((e=>setTimeout(e,1e3))),g.success("控制指令发送成功"),Ae.value=!1,We()}catch(e){g.error("控制指令发送失败")}},ua=()=>{De.value=!0},ia=()=>{Pe.value=!0,na()},da=()=>{let e=[...He];if(je.value.keyword){const a=je.value.keyword.toLowerCase();e=e.filter((e=>e.name.toLowerCase().includes(a)||e.location.toLowerCase().includes(a)))}je.value.status&&(e=e.filter((e=>e.status===je.value.status))),je.value.type&&(e=e.filter((e=>e.type===je.value.type))),Te.value=e,0===e.length?g.info("没有找到匹配的设备"):g.success(`找到 ${e.length} 台设备`)},oa=()=>{je.value={keyword:"",status:"",type:"",dateRange:[]},Te.value=[...He],g.success("搜索条件已重置")},ra=e=>{Fe.value=[{label:"温度",value:"25.6",unit:"°C",status:"normal",statusText:"正常"},{label:"湿度",value:"68.2",unit:"%",status:"normal",statusText:"正常"},{label:"土壤湿度",value:"72.5",unit:"%",status:"normal",statusText:"正常"},{label:"光照强度",value:"45000",unit:" lux",status:"normal",statusText:"正常"}]},na=()=>{Le.value=[{id:"alert001",device:"温湿度传感器-01",type:"temperature",message:"温度超过阈值：28.5°C",time:"2024-01-15 14:25:00",status:"active"},{id:"alert002",device:"监控摄像头-01",type:"device",message:"设备离线超过30分钟",time:"2024-01-15 13:15:00",status:"active"},{id:"alert003",device:"土壤传感器-01",type:"soil",message:"土壤湿度低于阈值：45%",time:"2024-01-15 12:30:00",status:"handled"}]},ca=()=>{g.info("添加告警规则功能开发中")},va=()=>{Le.value=[],g.success("所有告警已清空")},pa=e=>{},ma=e=>{},_a=()=>{Ye.value=!1,Me.value=null,Fe.value=[]},fa=()=>{var e;Be.value=!1,null==(e=qe.value)||e.resetFields()},ya=()=>{Ae.value=!1},ha=()=>{De.value=!1},wa=()=>{Pe.value=!1},ga=e=>{const a={sensor:"https://picsum.photos/400/300?random=10",controller:"https://picsum.photos/400/300?random=11",camera:"https://picsum.photos/400/300?random=12",irrigation:"https://picsum.photos/400/300?random=13"};return a[e]||a.sensor},ba=()=>{g.info("图片上传功能开发中，当前使用默认图片")},ka=()=>{const e=["https://picsum.photos/400/300?random=20","https://picsum.photos/400/300?random=21","https://picsum.photos/400/300?random=22"];b.confirm("选择图片方式","选择图片",{confirmButtonText:"使用示例图片",cancelButtonText:"取消",type:"info"}).then((()=>{Ie.value.image=e[Math.floor(Math.random()*e.length)],g.success("图片已选择")})).catch((()=>{g.info("已取消选择")}))};return t(We),(e,a)=>{const l=s("el-button"),t=s("el-icon"),He=s("el-card"),We=s("el-col"),ra=s("el-row"),na=s("el-input"),Va=s("el-option"),Ca=s("el-select"),xa=s("el-date-picker"),Ua=s("el-table-column"),za=s("el-tag"),Ta=s("el-progress"),Ya=s("el-table"),Ma=s("el-image"),Ba=s("el-dialog"),Ra=s("el-form-item"),qa=s("el-form"),Aa=s("el-switch"),Da=s("el-input-number");return u(),i("div",U,[d(He,null,{default:o((()=>[r("div",z,[a[27]||(a[27]=r("span",null,"智慧农业管理",-1)),r("div",T,[d(l,{type:"primary",onClick:aa,size:"small"},{default:o((()=>a[23]||(a[23]=[n("添加设备")]))),_:1,__:[23]}),d(l,{type:"success",onClick:ea,size:"small"},{default:o((()=>a[24]||(a[24]=[n("刷新数据")]))),_:1,__:[24]}),d(l,{type:"info",onClick:ua,size:"small"},{default:o((()=>a[25]||(a[25]=[n("数据分析")]))),_:1,__:[25]}),d(l,{type:"warning",onClick:ia,size:"small"},{default:o((()=>a[26]||(a[26]=[n("告警管理")]))),_:1,__:[26]})])]),d(ra,{gutter:20,style:{"margin-bottom":"20px"}},{default:o((()=>[d(We,{span:6},{default:o((()=>[d(He,{class:"overview-card"},{default:o((()=>[r("div",Y,[r("div",M,[d(t,null,{default:o((()=>[d(c(v))])),_:1})]),r("div",B,[r("div",R,p(Ke.value)+"°C",1),a[28]||(a[28]=r("div",{class:"overview-label"},"平均温度",-1))])])])),_:1})])),_:1}),d(We,{span:6},{default:o((()=>[d(He,{class:"overview-card"},{default:o((()=>[r("div",q,[r("div",A,[d(t,null,{default:o((()=>[d(c(m))])),_:1})]),r("div",D,[r("div",P,p(Ne.value)+"%",1),a[29]||(a[29]=r("div",{class:"overview-label"},"平均湿度",-1))])])])),_:1})])),_:1}),d(We,{span:6},{default:o((()=>[d(He,{class:"overview-card"},{default:o((()=>[r("div",$,[r("div",F,[d(t,null,{default:o((()=>[d(c(m))])),_:1})]),r("div",L,[r("div",j,p(Oe.value)+"%",1),a[30]||(a[30]=r("div",{class:"overview-label"},"土壤湿度",-1))])])])),_:1})])),_:1}),d(We,{span:6},{default:o((()=>[d(He,{class:"overview-card"},{default:o((()=>[r("div",H,[r("div",I,[d(t,null,{default:o((()=>[d(c(_))])),_:1})]),r("div",E,[r("div",G,p(Se.value)+" lux",1),a[31]||(a[31]=r("div",{class:"overview-label"},"光照强度",-1))])])])),_:1})])),_:1})])),_:1}),r("div",K,[d(ra,{gutter:20},{default:o((()=>[d(We,{span:6},{default:o((()=>[d(na,{modelValue:je.value.keyword,"onUpdate:modelValue":a[0]||(a[0]=e=>je.value.keyword=e),placeholder:"搜索设备名称或位置",clearable:"",onKeyup:f(da,["enter"])},{prefix:o((()=>[d(t,null,{default:o((()=>[d(c(y))])),_:1})])),_:1},8,["modelValue"])])),_:1}),d(We,{span:4},{default:o((()=>[d(Ca,{modelValue:je.value.status,"onUpdate:modelValue":a[1]||(a[1]=e=>je.value.status=e),placeholder:"设备状态",clearable:""},{default:o((()=>[d(Va,{label:"在线",value:"online"}),d(Va,{label:"离线",value:"offline"}),d(Va,{label:"故障",value:"error"}),d(Va,{label:"维护中",value:"maintenance"})])),_:1},8,["modelValue"])])),_:1}),d(We,{span:4},{default:o((()=>[d(Ca,{modelValue:je.value.type,"onUpdate:modelValue":a[2]||(a[2]=e=>je.value.type=e),placeholder:"设备类型",clearable:""},{default:o((()=>[d(Va,{label:"传感器",value:"sensor"}),d(Va,{label:"控制器",value:"controller"}),d(Va,{label:"摄像头",value:"camera"}),d(Va,{label:"灌溉设备",value:"irrigation"})])),_:1},8,["modelValue"])])),_:1}),d(We,{span:6},{default:o((()=>[d(xa,{modelValue:je.value.dateRange,"onUpdate:modelValue":a[3]||(a[3]=e=>je.value.dateRange=e),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1}),d(We,{span:4},{default:o((()=>[d(l,{type:"primary",onClick:da},{default:o((()=>a[32]||(a[32]=[n("搜索")]))),_:1,__:[32]}),d(l,{onClick:oa},{default:o((()=>a[33]||(a[33]=[n("重置")]))),_:1,__:[33]})])),_:1})])),_:1})]),d(Ya,{data:Te.value,style:{width:"100%","margin-top":"20px"},fit:"true"},{default:o((()=>[d(Ua,{prop:"name",label:"设备名称","min-width":"150"},{default:o((e=>[r("span",{class:"clickable-title",onClick:a=>ta(e.row)},p(e.row.name),9,N)])),_:1}),d(Ua,{prop:"type",label:"设备类型","min-width":"120"},{default:o((e=>["sensor"===e.row.type?(u(),h(za,{key:0,type:"primary"},{default:o((()=>a[34]||(a[34]=[n("传感器")]))),_:1,__:[34]})):"controller"===e.row.type?(u(),h(za,{key:1,type:"success"},{default:o((()=>a[35]||(a[35]=[n("控制器")]))),_:1,__:[35]})):"camera"===e.row.type?(u(),h(za,{key:2,type:"warning"},{default:o((()=>a[36]||(a[36]=[n("摄像头")]))),_:1,__:[36]})):"irrigation"===e.row.type?(u(),h(za,{key:3,type:"info"},{default:o((()=>a[37]||(a[37]=[n("灌溉设备")]))),_:1,__:[37]})):w("",!0)])),_:1}),d(Ua,{prop:"location",label:"位置","min-width":"120"}),d(Ua,{prop:"status",label:"状态","min-width":"100"},{default:o((e=>["online"===e.row.status?(u(),h(za,{key:0,type:"success"},{default:o((()=>a[38]||(a[38]=[n("在线")]))),_:1,__:[38]})):"offline"===e.row.status?(u(),h(za,{key:1,type:"danger"},{default:o((()=>a[39]||(a[39]=[n("离线")]))),_:1,__:[39]})):"error"===e.row.status?(u(),h(za,{key:2,type:"danger"},{default:o((()=>a[40]||(a[40]=[n("故障")]))),_:1,__:[40]})):"maintenance"===e.row.status?(u(),h(za,{key:3,type:"warning"},{default:o((()=>a[41]||(a[41]=[n("维护中")]))),_:1,__:[41]})):w("",!0)])),_:1}),d(Ua,{prop:"lastUpdate",label:"最后更新","min-width":"150"}),d(Ua,{prop:"battery",label:"电量","min-width":"100"},{default:o((e=>{return[d(Ta,{percentage:e.row.battery,color:(a=e.row.battery,a>80?"#67C23A":a>50?"#E6A23C":"#F56C6C"),"show-text":!1},null,8,["percentage","color"]),r("span",O,p(e.row.battery)+"%",1)];var a})),_:1}),d(Ua,{label:"操作","min-width":"200",fixed:"right"},{default:o((e=>[d(l,{size:"small",type:"primary",onClick:a=>ta(e.row)},{default:o((()=>a[42]||(a[42]=[n("查看")]))),_:2,__:[42]},1032,["onClick"]),d(l,{size:"small",type:"success",onClick:a=>{return l=e.row,Me.value=l,Ee.value={power:"online"===l.status,irrigation:!1,interval:30,threshold:80},void(Ae.value=!0);var l}},{default:o((()=>a[43]||(a[43]=[n("控制")]))),_:2,__:[43]},1032,["onClick"]),d(l,{size:"small",type:"warning",onClick:a=>{return l=e.row,void g.info(`设备 ${l.name} 已进入维护模式`);var l}},{default:o((()=>a[44]||(a[44]=[n("维护")]))),_:2,__:[44]},1032,["onClick"]),d(l,{size:"small",type:"danger",onClick:a=>(async e=>{try{await b.confirm(`确定要删除设备"${e.name}"吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),Te.value=Te.value.filter((a=>a.id!==e.id)),g.success("删除成功")}catch{g.info("已取消删除")}})(e.row)},{default:o((()=>a[45]||(a[45]=[n("删除")]))),_:2,__:[45]},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),d(Ba,{modelValue:Ye.value,"onUpdate:modelValue":a[6]||(a[6]=e=>Ye.value=e),title:"设备详情",width:"900px","before-close":_a},{default:o((()=>[Me.value?(u(),i("div",S,[d(He,{class:"info-card",shadow:"never"},{header:o((()=>[r("div",X,[a[47]||(a[47]=r("span",null,"设备信息",-1)),d(l,{type:"primary",size:"small",onClick:a[4]||(a[4]=e=>{return a=Me.value,Re.value="编辑设备",Ie.value={...a},void(Be.value=!0);var a})},{default:o((()=>a[46]||(a[46]=[n("编辑")]))),_:1,__:[46]})])])),default:o((()=>[r("div",Z,[r("div",J,[d(Ma,{src:Me.value.image||ga(Me.value.type),fit:"cover",class:"device-image","preview-src-list":[Me.value.image||ga(Me.value.type)],"preview-teleported":""},{error:o((()=>[r("div",Q,[d(t,null,{default:o((()=>[d(c(k))])),_:1}),a[48]||(a[48]=r("span",null,"图片加载失败",-1))])])),_:1},8,["src","preview-src-list"]),r("div",W,[d(l,{type:"primary",size:"small",onClick:ba},{default:o((()=>a[49]||(a[49]=[n("更换图片")]))),_:1,__:[49]})])])]),d(ra,{gutter:20},{default:o((()=>[d(We,{span:12},{default:o((()=>[r("div",ee,[a[50]||(a[50]=r("label",null,"设备名称：",-1)),r("span",null,p(Me.value.name),1)])])),_:1}),d(We,{span:12},{default:o((()=>[r("div",ae,[a[55]||(a[55]=r("label",null,"设备类型：",-1)),"sensor"===Me.value.type?(u(),h(za,{key:0,type:"primary"},{default:o((()=>a[51]||(a[51]=[n("传感器")]))),_:1,__:[51]})):"controller"===Me.value.type?(u(),h(za,{key:1,type:"success"},{default:o((()=>a[52]||(a[52]=[n("控制器")]))),_:1,__:[52]})):"camera"===Me.value.type?(u(),h(za,{key:2,type:"warning"},{default:o((()=>a[53]||(a[53]=[n("摄像头")]))),_:1,__:[53]})):"irrigation"===Me.value.type?(u(),h(za,{key:3,type:"info"},{default:o((()=>a[54]||(a[54]=[n("灌溉设备")]))),_:1,__:[54]})):w("",!0)])])),_:1})])),_:1}),d(ra,{gutter:20},{default:o((()=>[d(We,{span:12},{default:o((()=>[r("div",le,[a[56]||(a[56]=r("label",null,"设备位置：",-1)),r("span",null,p(Me.value.location),1)])])),_:1}),d(We,{span:12},{default:o((()=>[r("div",te,[a[61]||(a[61]=r("label",null,"设备状态：",-1)),"online"===Me.value.status?(u(),h(za,{key:0,type:"success"},{default:o((()=>a[57]||(a[57]=[n("在线")]))),_:1,__:[57]})):"offline"===Me.value.status?(u(),h(za,{key:1,type:"danger"},{default:o((()=>a[58]||(a[58]=[n("离线")]))),_:1,__:[58]})):"error"===Me.value.status?(u(),h(za,{key:2,type:"danger"},{default:o((()=>a[59]||(a[59]=[n("故障")]))),_:1,__:[59]})):"maintenance"===Me.value.status?(u(),h(za,{key:3,type:"warning"},{default:o((()=>a[60]||(a[60]=[n("维护中")]))),_:1,__:[60]})):w("",!0)])])),_:1})])),_:1}),d(ra,{gutter:20},{default:o((()=>[d(We,{span:12},{default:o((()=>[r("div",se,[a[62]||(a[62]=r("label",null,"设备电量：",-1)),r("span",null,p(Me.value.battery)+"%",1)])])),_:1}),d(We,{span:12},{default:o((()=>[r("div",ue,[a[63]||(a[63]=r("label",null,"最后更新：",-1)),r("span",null,p(Me.value.lastUpdate),1)])])),_:1})])),_:1}),d(ra,{gutter:20},{default:o((()=>[d(We,{span:24},{default:o((()=>[r("div",ie,[a[64]||(a[64]=r("label",null,"设备描述：",-1)),r("div",de,p(Me.value.description),1)])])),_:1})])),_:1})])),_:1}),d(He,{class:"data-card",shadow:"never"},{header:o((()=>a[65]||(a[65]=[r("div",{class:"card-header"},[r("span",null,"实时数据")],-1)]))),default:o((()=>[d(ra,{gutter:20},{default:o((()=>[(u(!0),i(V,null,C(Fe.value,((e,a)=>(u(),h(We,{span:6,key:a},{default:o((()=>[r("div",oe,[r("div",re,p(e.label),1),r("div",ne,p(e.value)+p(e.unit),1),r("div",{class:x(["data-status",e.status])},p(e.statusText),3)])])),_:2},1024)))),128))])),_:1})])),_:1}),d(He,{class:"chart-card",shadow:"never"},{header:o((()=>[r("div",ce,[a[66]||(a[66]=r("span",null,"历史数据趋势",-1)),d(Ca,{modelValue:$e.value,"onUpdate:modelValue":a[5]||(a[5]=e=>$e.value=e),size:"small",style:{width:"120px"}},{default:o((()=>[d(Va,{label:"温度",value:"temperature"}),d(Va,{label:"湿度",value:"humidity"}),d(Va,{label:"土壤湿度",value:"soil"}),d(Va,{label:"光照",value:"light"})])),_:1},8,["modelValue"])])])),default:o((()=>[a[67]||(a[67]=r("div",{id:"historyChart",style:{height:"300px"}},null,-1))])),_:1,__:[67]})])):w("",!0)])),_:1},8,["modelValue"]),d(Ba,{modelValue:Be.value,"onUpdate:modelValue":a[14]||(a[14]=e=>Be.value=e),title:Re.value,width:"800px","before-close":fa},{footer:o((()=>[r("div",me,[d(l,{onClick:a[13]||(a[13]=e=>Be.value=!1)},{default:o((()=>a[70]||(a[70]=[n("取消")]))),_:1,__:[70]}),d(l,{type:"primary",onClick:la},{default:o((()=>a[71]||(a[71]=[n("提交")]))),_:1,__:[71]})])])),default:o((()=>[d(qa,{model:Ie.value,rules:Ge,ref_key:"deviceFormRef",ref:qe,"label-width":"120px"},{default:o((()=>[d(Ra,{label:"设备名称",prop:"name"},{default:o((()=>[d(na,{modelValue:Ie.value.name,"onUpdate:modelValue":a[7]||(a[7]=e=>Ie.value.name=e),placeholder:"请输入设备名称"},null,8,["modelValue"])])),_:1}),d(Ra,{label:"设备类型",prop:"type"},{default:o((()=>[d(Ca,{modelValue:Ie.value.type,"onUpdate:modelValue":a[8]||(a[8]=e=>Ie.value.type=e),placeholder:"请选择设备类型",style:{width:"100%"}},{default:o((()=>[d(Va,{label:"传感器",value:"sensor"}),d(Va,{label:"控制器",value:"controller"}),d(Va,{label:"摄像头",value:"camera"}),d(Va,{label:"灌溉设备",value:"irrigation"})])),_:1},8,["modelValue"])])),_:1}),d(Ra,{label:"设备位置",prop:"location"},{default:o((()=>[d(na,{modelValue:Ie.value.location,"onUpdate:modelValue":a[9]||(a[9]=e=>Ie.value.location=e),placeholder:"请输入设备位置"},null,8,["modelValue"])])),_:1}),d(Ra,{label:"设备描述",prop:"description"},{default:o((()=>[d(na,{modelValue:Ie.value.description,"onUpdate:modelValue":a[10]||(a[10]=e=>Ie.value.description=e),type:"textarea",rows:4,placeholder:"请输入设备描述"},null,8,["modelValue"])])),_:1}),d(Ra,{label:"设备图片"},{default:o((()=>[r("div",ve,[Ie.value.image?(u(),h(Ma,{key:0,src:Ie.value.image,fit:"cover",class:"form-device-image","preview-src-list":[Ie.value.image],"preview-teleported":""},null,8,["src","preview-src-list"])):(u(),i("div",pe,[d(t,null,{default:o((()=>[d(c(k))])),_:1}),a[68]||(a[68]=r("span",null,"暂无图片",-1))])),d(l,{type:"primary",onClick:ka,style:{"margin-top":"10px"}},{default:o((()=>a[69]||(a[69]=[n(" 选择图片 ")]))),_:1,__:[69]})])])),_:1}),d(Ra,{label:"设备参数"},{default:o((()=>[d(ra,{gutter:20},{default:o((()=>[d(We,{span:12},{default:o((()=>[d(na,{modelValue:Ie.value.parameters.interval,"onUpdate:modelValue":a[11]||(a[11]=e=>Ie.value.parameters.interval=e),placeholder:"数据采集间隔(秒)"},null,8,["modelValue"])])),_:1}),d(We,{span:12},{default:o((()=>[d(na,{modelValue:Ie.value.parameters.threshold,"onUpdate:modelValue":a[12]||(a[12]=e=>Ie.value.parameters.threshold=e),placeholder:"告警阈值"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"]),d(Ba,{modelValue:Ae.value,"onUpdate:modelValue":a[20]||(a[20]=e=>Ae.value=e),title:"设备控制",width:"600px","before-close":ya},{footer:o((()=>[r("div",ge,[d(l,{onClick:a[19]||(a[19]=e=>Ae.value=!1)},{default:o((()=>a[78]||(a[78]=[n("取消")]))),_:1,__:[78]}),d(l,{type:"primary",onClick:sa},{default:o((()=>a[79]||(a[79]=[n("确认控制")]))),_:1,__:[79]})])])),default:o((()=>[Me.value?(u(),i("div",_e,[d(ra,{gutter:20},{default:o((()=>[d(We,{span:12},{default:o((()=>[d(He,null,{header:o((()=>a[72]||(a[72]=[n("开关控制")]))),default:o((()=>[r("div",fe,[a[73]||(a[73]=r("span",null,"设备开关",-1)),d(Aa,{modelValue:Ee.value.power,"onUpdate:modelValue":a[15]||(a[15]=e=>Ee.value.power=e),onChange:pa},null,8,["modelValue"])]),"irrigation"===Me.value.type?(u(),i("div",ye,[a[74]||(a[74]=r("span",null,"灌溉开关",-1)),d(Aa,{modelValue:Ee.value.irrigation,"onUpdate:modelValue":a[16]||(a[16]=e=>Ee.value.irrigation=e),onChange:ma},null,8,["modelValue"])])):w("",!0)])),_:1})])),_:1}),d(We,{span:12},{default:o((()=>[d(He,null,{header:o((()=>a[75]||(a[75]=[n("参数设置")]))),default:o((()=>[r("div",he,[a[76]||(a[76]=r("span",null,"采集间隔",-1)),d(Da,{modelValue:Ee.value.interval,"onUpdate:modelValue":a[17]||(a[17]=e=>Ee.value.interval=e),min:1,max:3600,size:"small"},null,8,["modelValue"])]),r("div",we,[a[77]||(a[77]=r("span",null,"告警阈值",-1)),d(Da,{modelValue:Ee.value.threshold,"onUpdate:modelValue":a[18]||(a[18]=e=>Ee.value.threshold=e),min:0,max:100,size:"small"},null,8,["modelValue"])])])),_:1})])),_:1})])),_:1})])):w("",!0)])),_:1},8,["modelValue"]),d(Ba,{modelValue:De.value,"onUpdate:modelValue":a[21]||(a[21]=e=>De.value=e),title:"数据分析",width:"1200px","before-close":ha},{default:o((()=>[r("div",be,[d(ra,{gutter:20,style:{"margin-bottom":"30px"}},{default:o((()=>[d(We,{span:6},{default:o((()=>[d(He,{class:"stat-card"},{default:o((()=>[r("div",ke,p(Xe.value),1),a[80]||(a[80]=r("div",{class:"stat-label"},"设备总数",-1))])),_:1,__:[80]})])),_:1}),d(We,{span:6},{default:o((()=>[d(He,{class:"stat-card"},{default:o((()=>[r("div",Ve,p(Ze.value),1),a[81]||(a[81]=r("div",{class:"stat-label"},"在线设备",-1))])),_:1,__:[81]})])),_:1}),d(We,{span:6},{default:o((()=>[d(He,{class:"stat-card"},{default:o((()=>[r("div",Ce,p(Je.value),1),a[82]||(a[82]=r("div",{class:"stat-label"},"故障设备",-1))])),_:1,__:[82]})])),_:1}),d(We,{span:6},{default:o((()=>[d(He,{class:"stat-card"},{default:o((()=>[r("div",xe,p(Qe.value),1),a[83]||(a[83]=r("div",{class:"stat-label"},"数据点数",-1))])),_:1,__:[83]})])),_:1})])),_:1}),d(ra,{gutter:20},{default:o((()=>[d(We,{span:12},{default:o((()=>[d(He,null,{header:o((()=>a[84]||(a[84]=[n("设备状态分布")]))),default:o((()=>[a[85]||(a[85]=r("div",{id:"statusChart",style:{height:"300px"}},null,-1))])),_:1,__:[85]})])),_:1}),d(We,{span:12},{default:o((()=>[d(He,null,{header:o((()=>a[86]||(a[86]=[n("环境数据趋势")]))),default:o((()=>[a[87]||(a[87]=r("div",{id:"trendChart",style:{height:"300px"}},null,-1))])),_:1,__:[87]})])),_:1})])),_:1})])])),_:1},8,["modelValue"]),d(Ba,{modelValue:Pe.value,"onUpdate:modelValue":a[22]||(a[22]=e=>Pe.value=e),title:"告警管理",width:"1000px","before-close":wa},{default:o((()=>[r("div",Ue,[r("div",ze,[d(l,{type:"primary",onClick:ca},{default:o((()=>a[88]||(a[88]=[n("添加告警规则")]))),_:1,__:[88]}),d(l,{onClick:va},{default:o((()=>a[89]||(a[89]=[n("清空所有告警")]))),_:1,__:[89]})]),d(Ya,{data:Le.value,style:{width:"100%","margin-top":"20px"}},{default:o((()=>[d(Ua,{prop:"device",label:"设备","min-width":"120"}),d(Ua,{prop:"type",label:"告警类型","min-width":"120"},{default:o((e=>["temperature"===e.row.type?(u(),h(za,{key:0,type:"danger"},{default:o((()=>a[90]||(a[90]=[n("温度异常")]))),_:1,__:[90]})):"humidity"===e.row.type?(u(),h(za,{key:1,type:"warning"},{default:o((()=>a[91]||(a[91]=[n("湿度异常")]))),_:1,__:[91]})):"soil"===e.row.type?(u(),h(za,{key:2,type:"info"},{default:o((()=>a[92]||(a[92]=[n("土壤异常")]))),_:1,__:[92]})):"device"===e.row.type?(u(),h(za,{key:3,type:"danger"},{default:o((()=>a[93]||(a[93]=[n("设备故障")]))),_:1,__:[93]})):w("",!0)])),_:1}),d(Ua,{prop:"message",label:"告警信息","min-width":"200"}),d(Ua,{prop:"time",label:"告警时间","min-width":"150"}),d(Ua,{prop:"status",label:"状态","min-width":"100"},{default:o((e=>["active"===e.row.status?(u(),h(za,{key:0,type:"danger"},{default:o((()=>a[94]||(a[94]=[n("未处理")]))),_:1,__:[94]})):(u(),h(za,{key:1,type:"success"},{default:o((()=>a[95]||(a[95]=[n("已处理")]))),_:1,__:[95]}))])),_:1}),d(Ua,{label:"操作","min-width":"150"},{default:o((e=>[d(l,{size:"small",type:"success",onClick:a=>(e.row.status="handled",void g.success("告警已处理"))},{default:o((()=>a[96]||(a[96]=[n("处理")]))),_:2,__:[96]},1032,["onClick"]),d(l,{size:"small",type:"danger",onClick:a=>{return l=e.row,Le.value=Le.value.filter((e=>e.id!==l.id)),void g.success("告警已删除");var l}},{default:o((()=>a[97]||(a[97]=[n("删除")]))),_:2,__:[97]},1032,["onClick"])])),_:1})])),_:1},8,["data"])])])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-d51a2586"]]);export{Te as default};
