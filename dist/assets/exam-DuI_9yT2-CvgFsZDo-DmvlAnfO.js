import{r as re}from"./_plugin-vue_export-helper-DlAUqK2U-lGy7RumW-DNI5evPq.js";import{L as w,E as de,r as y,b as n,$ as I,Y as l,J as a,M as i,a as r,l as d,O as m,P as se,C as _,U as J}from"./index-q8LaeBoo.js";const ue={class:"exam-container"},oe={class:"header"},ne={class:"header-actions"},ce=["onClick"],pe={key:0,class:"exam-detail"},me={class:"card-header"},fe={class:"detail-item"},ye={class:"detail-item"},_e={class:"detail-item"},ve={class:"detail-item"},we={class:"detail-item"},ge={class:"detail-item"},he={class:"detail-item"},be={class:"detail-item"},ke={class:"detail-item"},Te={class:"card-header"},Ve={class:"header-actions"},xe={class:"card-header"},Ce={class:"header-actions"},Se={class:"dialog-footer"},ze={__name:"exam",setup($e){const T=w([]),V=w(!1),c=w(null),h=w(!1),x=w("创建考试"),z=w(null),L=[{id:"exam001",title:"安全生产知识考试",category:"安全培训",duration:60,totalScore:100,passScore:60,status:"进行中",startTime:"2024-01-15 09:00:00",endTime:"2024-01-20 18:00:00",description:"本次考试主要考察员工对安全生产知识的掌握程度，包括安全操作规程、应急处理等内容。"},{id:"exam002",title:"公司制度学习考试",category:"制度学习",duration:45,totalScore:100,passScore:70,status:"已结束",startTime:"2024-01-10 09:00:00",endTime:"2024-01-12 18:00:00",description:"考察员工对公司各项制度的了解程度，包括人事制度、财务制度、行政制度等。"},{id:"exam003",title:"专业技能考核",category:"技能考核",duration:90,totalScore:100,passScore:80,status:"未开始",startTime:"2024-01-25 09:00:00",endTime:"2024-01-30 18:00:00",description:"针对技术部门员工的专业技能考核，包括编程能力、系统设计等。"}],$=w([{id:"q001",order:1,type:"单选题",content:"在发生火灾时，以下哪种做法是正确的？",score:10,difficulty:"简单"},{id:"q002",order:2,type:"多选题",content:"以下哪些是安全生产的基本原则？",score:15,difficulty:"中等"},{id:"q003",order:3,type:"判断题",content:"员工在工作时必须佩戴安全帽。",score:5,difficulty:"简单"}]),N=w([{id:"p001",realname:"张三",department:"技术部",status:"已完成",score:85,startTime:"2024-01-15 10:30:00",endTime:"2024-01-15 11:25:00"},{id:"p002",realname:"李四",department:"人事部",status:"进行中",score:null,startTime:"2024-01-15 14:20:00",endTime:null},{id:"p003",realname:"王五",department:"财务部",status:"未开始",score:null,startTime:null,endTime:null}]),o=w({title:"",category:"",duration:60,totalScore:100,passScore:60,startTime:"",endTime:"",description:""}),O={title:[{required:!0,message:"请输入考试标题",trigger:"blur"}],category:[{required:!0,message:"请选择考试类别",trigger:"change"}],duration:[{required:!0,message:"请输入考试时长",trigger:"blur"}],totalScore:[{required:!0,message:"请输入总分",trigger:"blur"}],passScore:[{required:!0,message:"请输入及格分",trigger:"blur"}],startTime:[{required:!0,message:"请选择开始时间",trigger:"change"}],endTime:[{required:!0,message:"请选择结束时间",trigger:"change"}]},q=async()=>{try{await new Promise(s=>setTimeout(s,500)),T.value=L,_.success("考试列表加载成功")}catch{_.error("获取考试列表失败")}},R=()=>{q()},j=()=>{x.value="创建考试",o.value={title:"",category:"",duration:60,totalScore:100,passScore:60,startTime:"",endTime:"",description:""},h.value=!0},M=s=>{x.value="编辑考试",o.value={...s},h.value=!0},A=async()=>{try{await z.value.validate(),await new Promise(s=>setTimeout(s,1e3)),_.success(x.value==="创建考试"?"考试创建成功":"考试更新成功"),h.value=!1,q()}catch{_.error("表单验证失败")}},D=async s=>{try{await J.confirm(`确定要删除考试"${s.title}"吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),T.value=T.value.filter(e=>e.id!==s.id),_.success("删除成功")}catch{_.info("已取消删除")}},G=s=>{c.value=s,V.value=!0},H=s=>{_.info(`查看考试"${s.title}"的成绩`)},K=()=>{_.info("添加题目功能")},Q=s=>{_.info(`编辑题目: ${s.content}`)},W=async s=>{try{await J.confirm(`确定要删除题目"${s.content}"吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),$.value=$.value.filter(e=>e.id!==s.id),_.success("删除成功")}catch{_.info("已取消删除")}},Y=()=>{_.info("添加参与人员功能")},Z=s=>{_.info(`查看${s.realname}的考试详情`)},X=()=>{_.success("题目列表已刷新")},ee=()=>{_.success("参与人员列表已刷新")},le=()=>{V.value=!1,c.value=null},ae=()=>{var s;h.value=!1,(s=z.value)==null||s.resetFields()};return de(q),(s,e)=>{const f=y("el-button"),u=y("el-table-column"),p=y("el-tag"),U=y("el-table"),C=y("el-card"),v=y("el-col"),S=y("el-row"),P=y("el-dialog"),F=y("el-input"),g=y("el-form-item"),k=y("el-option"),te=y("el-select"),B=y("el-input-number"),E=y("el-date-picker"),ie=y("el-form");return n(),I("div",ue,[l(C,null,{default:a(()=>[i("div",oe,[e[14]||(e[14]=i("span",null,"员工考试管理",-1)),i("div",ne,[l(f,{type:"primary",onClick:j,size:"small"},{default:a(()=>e[12]||(e[12]=[r("创建考试")])),_:1,__:[12]}),l(f,{type:"success",onClick:R,size:"small"},{default:a(()=>e[13]||(e[13]=[r("刷新")])),_:1,__:[13]})])]),l(U,{data:T.value,style:{width:"100%","margin-top":"20px"},fit:"true"},{default:a(()=>[l(u,{prop:"title",label:"考试标题","min-width":"200"},{default:a(t=>[i("span",{class:"clickable-title",onClick:b=>G(t.row)},d(t.row.title),9,ce)]),_:1}),l(u,{prop:"category",label:"考试类别","min-width":"120"}),l(u,{prop:"duration",label:"考试时长","min-width":"100"},{default:a(t=>[i("span",null,d(t.row.duration)+"分钟",1)]),_:1}),l(u,{prop:"totalScore",label:"总分","min-width":"80"}),l(u,{prop:"passScore",label:"及格分","min-width":"80"}),l(u,{prop:"status",label:"状态","min-width":"100"},{default:a(t=>[t.row.status==="进行中"?(n(),m(p,{key:0,type:"success"},{default:a(()=>[r(d(t.row.status),1)]),_:2},1024)):t.row.status==="已结束"?(n(),m(p,{key:1,type:"info"},{default:a(()=>[r(d(t.row.status),1)]),_:2},1024)):(n(),m(p,{key:2,type:"warning"},{default:a(()=>[r(d(t.row.status),1)]),_:2},1024))]),_:1}),l(u,{prop:"startTime",label:"开始时间","min-width":"150"}),l(u,{prop:"endTime",label:"结束时间","min-width":"150"}),l(u,{label:"操作","min-width":"200",fixed:"right"},{default:a(t=>[l(f,{size:"small",type:"primary",onClick:b=>M(t.row)},{default:a(()=>e[15]||(e[15]=[r("编辑")])),_:2,__:[15]},1032,["onClick"]),l(f,{size:"small",type:"success",onClick:b=>H(t.row)},{default:a(()=>e[16]||(e[16]=[r("查看成绩")])),_:2,__:[16]},1032,["onClick"]),l(f,{size:"small",type:"danger",onClick:b=>D(t.row)},{default:a(()=>e[17]||(e[17]=[r("删除")])),_:2,__:[17]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),l(P,{modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=t=>V.value=t),title:"考试详情",width:"1000px","before-close":le},{default:a(()=>[c.value?(n(),I("div",pe,[l(C,{class:"info-card",shadow:"never"},{header:a(()=>[i("div",me,[e[19]||(e[19]=i("span",null,"考试信息",-1)),l(f,{type:"primary",size:"small",onClick:e[0]||(e[0]=t=>M(c.value))},{default:a(()=>e[18]||(e[18]=[r("编辑考试")])),_:1,__:[18]})])]),default:a(()=>[l(S,{gutter:20},{default:a(()=>[l(v,{span:8},{default:a(()=>[i("div",fe,[e[20]||(e[20]=i("label",null,"考试标题：",-1)),i("span",null,d(c.value.title),1)])]),_:1}),l(v,{span:8},{default:a(()=>[i("div",ye,[e[21]||(e[21]=i("label",null,"考试类别：",-1)),i("span",null,d(c.value.category),1)])]),_:1}),l(v,{span:8},{default:a(()=>[i("div",_e,[e[22]||(e[22]=i("label",null,"考试时长：",-1)),i("span",null,d(c.value.duration)+"分钟",1)])]),_:1})]),_:1}),l(S,{gutter:20},{default:a(()=>[l(v,{span:8},{default:a(()=>[i("div",ve,[e[23]||(e[23]=i("label",null,"总分：",-1)),i("span",null,d(c.value.totalScore)+"分",1)])]),_:1}),l(v,{span:8},{default:a(()=>[i("div",we,[e[24]||(e[24]=i("label",null,"及格分：",-1)),i("span",null,d(c.value.passScore)+"分",1)])]),_:1}),l(v,{span:8},{default:a(()=>[i("div",ge,[e[25]||(e[25]=i("label",null,"状态：",-1)),c.value.status==="进行中"?(n(),m(p,{key:0,type:"success"},{default:a(()=>[r(d(c.value.status),1)]),_:1})):c.value.status==="已结束"?(n(),m(p,{key:1,type:"info"},{default:a(()=>[r(d(c.value.status),1)]),_:1})):(n(),m(p,{key:2,type:"warning"},{default:a(()=>[r(d(c.value.status),1)]),_:1}))])]),_:1})]),_:1}),l(S,{gutter:20},{default:a(()=>[l(v,{span:12},{default:a(()=>[i("div",he,[e[26]||(e[26]=i("label",null,"开始时间：",-1)),i("span",null,d(c.value.startTime),1)])]),_:1}),l(v,{span:12},{default:a(()=>[i("div",be,[e[27]||(e[27]=i("label",null,"结束时间：",-1)),i("span",null,d(c.value.endTime),1)])]),_:1})]),_:1}),l(S,{gutter:20},{default:a(()=>[l(v,{span:24},{default:a(()=>[i("div",ke,[e[28]||(e[28]=i("label",null,"考试说明：",-1)),i("span",null,d(c.value.description),1)])]),_:1})]),_:1})]),_:1}),l(C,{class:"questions-card",shadow:"never"},{header:a(()=>[i("div",Te,[e[31]||(e[31]=i("span",null,"题目列表",-1)),i("div",Ve,[l(f,{type:"success",size:"small",onClick:K},{default:a(()=>e[29]||(e[29]=[r("添加题目")])),_:1,__:[29]}),l(f,{type:"primary",size:"small",onClick:X},{default:a(()=>e[30]||(e[30]=[r("刷新")])),_:1,__:[30]})])])]),default:a(()=>[l(U,{data:$.value,style:{width:"100%"},stripe:""},{default:a(()=>[l(u,{prop:"order",label:"序号",width:"80"}),l(u,{prop:"type",label:"题型",width:"100"},{default:a(t=>[t.row.type==="单选题"?(n(),m(p,{key:0,type:"primary"},{default:a(()=>[r(d(t.row.type),1)]),_:2},1024)):t.row.type==="多选题"?(n(),m(p,{key:1,type:"success"},{default:a(()=>[r(d(t.row.type),1)]),_:2},1024)):t.row.type==="判断题"?(n(),m(p,{key:2,type:"warning"},{default:a(()=>[r(d(t.row.type),1)]),_:2},1024)):(n(),m(p,{key:3,type:"info"},{default:a(()=>[r(d(t.row.type),1)]),_:2},1024))]),_:1}),l(u,{prop:"content",label:"题目内容","min-width":"300"}),l(u,{prop:"score",label:"分值",width:"80"}),l(u,{prop:"difficulty",label:"难度",width:"100"},{default:a(t=>[t.row.difficulty==="简单"?(n(),m(p,{key:0,type:"success"},{default:a(()=>[r(d(t.row.difficulty),1)]),_:2},1024)):t.row.difficulty==="中等"?(n(),m(p,{key:1,type:"warning"},{default:a(()=>[r(d(t.row.difficulty),1)]),_:2},1024)):(n(),m(p,{key:2,type:"danger"},{default:a(()=>[r(d(t.row.difficulty),1)]),_:2},1024))]),_:1}),l(u,{label:"操作",width:"150",fixed:"right"},{default:a(t=>[l(f,{size:"small",type:"primary",onClick:b=>Q(t.row)},{default:a(()=>e[32]||(e[32]=[r("编辑")])),_:2,__:[32]},1032,["onClick"]),l(f,{size:"small",type:"danger",onClick:b=>W(t.row)},{default:a(()=>e[33]||(e[33]=[r("删除")])),_:2,__:[33]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),l(C,{class:"participants-card",shadow:"never"},{header:a(()=>[i("div",xe,[e[36]||(e[36]=i("span",null,"参与人员",-1)),i("div",Ce,[l(f,{type:"success",size:"small",onClick:Y},{default:a(()=>e[34]||(e[34]=[r("添加人员")])),_:1,__:[34]}),l(f,{type:"primary",size:"small",onClick:ee},{default:a(()=>e[35]||(e[35]=[r("刷新")])),_:1,__:[35]})])])]),default:a(()=>[l(U,{data:N.value,style:{width:"100%"},stripe:""},{default:a(()=>[l(u,{prop:"realname",label:"姓名",width:"120"}),l(u,{prop:"department",label:"部门",width:"120"}),l(u,{prop:"status",label:"状态",width:"100"},{default:a(t=>[t.row.status==="已完成"?(n(),m(p,{key:0,type:"success"},{default:a(()=>[r(d(t.row.status),1)]),_:2},1024)):t.row.status==="进行中"?(n(),m(p,{key:1,type:"warning"},{default:a(()=>[r(d(t.row.status),1)]),_:2},1024)):(n(),m(p,{key:2,type:"info"},{default:a(()=>[r(d(t.row.status),1)]),_:2},1024))]),_:1}),l(u,{prop:"score",label:"得分",width:"100"}),l(u,{prop:"startTime",label:"开始时间","min-width":"150"}),l(u,{prop:"endTime",label:"结束时间","min-width":"150"}),l(u,{label:"操作",width:"120",fixed:"right"},{default:a(t=>[l(f,{size:"small",type:"primary",onClick:b=>Z(t.row)},{default:a(()=>e[37]||(e[37]=[r("查看")])),_:2,__:[37]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})])):se("",!0)]),_:1},8,["modelValue"]),l(P,{modelValue:h.value,"onUpdate:modelValue":e[11]||(e[11]=t=>h.value=t),title:x.value,width:"800px","before-close":ae},{footer:a(()=>[i("div",Se,[l(f,{onClick:e[10]||(e[10]=t=>h.value=!1)},{default:a(()=>e[38]||(e[38]=[r("取消")])),_:1,__:[38]}),l(f,{type:"primary",onClick:A},{default:a(()=>e[39]||(e[39]=[r("确定")])),_:1,__:[39]})])]),default:a(()=>[l(ie,{model:o.value,rules:O,ref_key:"examFormRef",ref:z,"label-width":"120px"},{default:a(()=>[l(g,{label:"考试标题",prop:"title"},{default:a(()=>[l(F,{modelValue:o.value.title,"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.title=t),placeholder:"请输入考试标题"},null,8,["modelValue"])]),_:1}),l(g,{label:"考试类别",prop:"category"},{default:a(()=>[l(te,{modelValue:o.value.category,"onUpdate:modelValue":e[3]||(e[3]=t=>o.value.category=t),placeholder:"请选择考试类别",style:{width:"100%"}},{default:a(()=>[l(k,{label:"安全培训",value:"安全培训"}),l(k,{label:"技能考核",value:"技能考核"}),l(k,{label:"制度学习",value:"制度学习"}),l(k,{label:"岗位培训",value:"岗位培训"}),l(k,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1}),l(g,{label:"考试时长",prop:"duration"},{default:a(()=>[l(B,{modelValue:o.value.duration,"onUpdate:modelValue":e[4]||(e[4]=t=>o.value.duration=t),min:1,max:300,placeholder:"分钟"},null,8,["modelValue"])]),_:1}),l(g,{label:"总分",prop:"totalScore"},{default:a(()=>[l(B,{modelValue:o.value.totalScore,"onUpdate:modelValue":e[5]||(e[5]=t=>o.value.totalScore=t),min:1,max:100,placeholder:"分"},null,8,["modelValue"])]),_:1}),l(g,{label:"及格分",prop:"passScore"},{default:a(()=>[l(B,{modelValue:o.value.passScore,"onUpdate:modelValue":e[6]||(e[6]=t=>o.value.passScore=t),min:1,max:o.value.totalScore,placeholder:"分"},null,8,["modelValue","max"])]),_:1}),l(g,{label:"开始时间",prop:"startTime"},{default:a(()=>[l(E,{modelValue:o.value.startTime,"onUpdate:modelValue":e[7]||(e[7]=t=>o.value.startTime=t),type:"datetime",placeholder:"选择开始时间",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(g,{label:"结束时间",prop:"endTime"},{default:a(()=>[l(E,{modelValue:o.value.endTime,"onUpdate:modelValue":e[8]||(e[8]=t=>o.value.endTime=t),type:"datetime",placeholder:"选择结束时间",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(g,{label:"考试说明",prop:"description"},{default:a(()=>[l(F,{modelValue:o.value.description,"onUpdate:modelValue":e[9]||(e[9]=t=>o.value.description=t),type:"textarea",rows:4,placeholder:"请输入考试说明"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Be=re(ze,[["__scopeId","data-v-921b8b48"]]);export{Be as default};
