import{_ as e,r as a,J as l,l as t,o,c as u,a as d,b as i,w as n,K as s,i as r,E as p,d as c,L as m,e as v,u as f,O as _,g,M as b,U as h,t as y,V,S as w,W as C,y as D,z as U,j as k,k as P}from"./index-C3v4GxiK.js";const x={class:"district-container"},z={class:"page-header"},S={class:"header-actions"},T={class:"overview-section"},G={class:"card-content"},j={class:"card-icon primary"},q={class:"card-info"},I={class:"card-value"},O={class:"card-content"},F={class:"card-icon success"},L={class:"card-info"},B={class:"card-value"},K={class:"card-content"},$={class:"card-icon warning"},E={class:"card-info"},J={class:"card-value"},M={class:"card-content"},R={class:"card-icon info"},W={class:"card-info"},A={class:"card-value"},H={class:"search-section"},N={class:"district-list"},Q={class:"pagination-container"},X={class:"dialog-footer"},Y={key:0,class:"district-detail"},Z=e({__name:"dihestrict",setup(e){const Z=a(!1),ee=a(!1),ae=a(!1),le=a(!1),te=a(),oe=a(null),ue=l({name:"",level:"",region:""}),de=l({currentPage:1,pageSize:10,total:0}),ie=l({id:null,name:"",level:"",region:"",postcode:"",population:0,area:0,gdp:0,companies:0,status:"normal",establishDate:"",location:"",description:""}),ne={name:[{required:!0,message:"请输入区县名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],level:[{required:!0,message:"请选择行政级别",trigger:"change"}],region:[{required:!0,message:"请选择所属区域",trigger:"change"}],postcode:[{pattern:/^\d{6}$/,message:"邮政编码格式不正确",trigger:"blur"}],population:[{required:!0,message:"请输入人口数量",trigger:"blur"}],area:[{required:!0,message:"请输入面积",trigger:"blur"}]},se=l({total:0,totalPopulation:0,totalGDP:0,totalCompanies:0}),re=a([{id:1,name:"朝阳区",level:"district",region:"urban",postcode:"100020",population:345.2,area:470.8,gdp:1250.5,companies:15680,status:"normal",establishDate:"1958-05-01",location:"北京市东部",description:"北京市中心城区之一，经济发达，文化繁荣",createTime:"2020-01-01 10:00:00"},{id:2,name:"海淀区",level:"district",region:"urban",postcode:"100080",population:332.1,area:431,gdp:1180.3,companies:14250,status:"normal",establishDate:"1952-09-01",location:"北京市西北部",description:"科技教育中心，中关村科技园区所在地",createTime:"2020-01-01 10:00:00"},{id:3,name:"昌平区",level:"district",region:"suburban",postcode:"102200",population:196.8,area:1343.5,gdp:680.2,companies:8560,status:"developing",establishDate:"1999-09-16",location:"北京市北部",description:"北京市重要的生态涵养区和科技创新基地",createTime:"2020-01-01 10:00:00"},{id:4,name:"密云区",level:"district",region:"rural",postcode:"101500",population:45.6,area:2229.5,gdp:180.5,companies:2340,status:"developing",establishDate:"2015-11-17",location:"北京市东北部",description:"生态涵养区，以旅游业和农业为主",createTime:"2020-01-01 10:00:00"}]),pe=t((()=>ie.id?"编辑区县":"添加区县")),ce=e=>({district:"市辖区",county:"县级市","county-level":"县",autonomous:"自治县"}[e]||"未知"),me=e=>({district:"primary",county:"success","county-level":"warning",autonomous:"info"}[e]||""),ve=e=>({urban:"城区",suburban:"郊区",rural:"农村"}[e]||"未知"),fe=e=>({urban:"primary",suburban:"warning",rural:"success"}[e]||""),_e=e=>({normal:"正常",developing:"发展中",pending:"待开发"}[e]||"未知"),ge=e=>({normal:"success",developing:"warning",pending:"info"}[e]||""),be=e=>e.toLocaleString(),he=()=>{ie.id=null,ae.value=!0},ye=async()=>{if(te.value)try{if(await te.value.validate(),ee.value=!0,await new Promise((e=>setTimeout(e,1e3))),ie.id){const e=re.value.findIndex((e=>e.id===ie.id));e>-1&&(re.value[e]={...ie}),p.success("编辑成功")}else{const e={...ie,id:Date.now(),createTime:(new Date).toLocaleString()};re.value.unshift(e),p.success("添加成功")}Pe(),ae.value=!1,Ve()}catch(e){}finally{ee.value=!1}},Ve=()=>{te.value&&te.value.resetFields(),Object.assign(ie,{id:null,name:"",level:"",region:"",postcode:"",population:0,area:0,gdp:0,companies:0,status:"normal",establishDate:"",location:"",description:""})},we=()=>{de.currentPage=1},Ce=()=>{Object.assign(ue,{name:"",level:"",region:""}),we()},De=e=>{de.pageSize=e},Ue=e=>{de.currentPage=e},ke=()=>{p.success("区县数据导出成功")},Pe=()=>{se.total=re.value.length,se.totalPopulation=re.value.reduce(((e,a)=>e+a.population),0),se.totalGDP=re.value.reduce(((e,a)=>e+a.gdp),0),se.totalCompanies=re.value.reduce(((e,a)=>e+a.companies),0)};return o((()=>{Pe(),de.total=re.value.length})),(e,a)=>{const l=c("el-icon"),t=c("el-button"),o=c("el-card"),xe=c("el-col"),ze=c("el-row"),Se=c("el-input"),Te=c("el-option"),Ge=c("el-select"),je=c("el-table-column"),qe=c("el-tag"),Ie=c("el-table"),Oe=c("el-pagination"),Fe=c("el-form-item"),Le=c("el-input-number"),Be=c("el-date-picker"),Ke=c("el-form"),$e=c("el-dialog"),Ee=c("el-descriptions-item"),Je=c("el-descriptions"),Me=m("loading");return v(),u("div",x,[d("div",z,[a[22]||(a[22]=d("h2",null,"区县管理系统",-1)),d("div",S,[i(t,{type:"success",onClick:ke},{default:n((()=>[i(l,null,{default:n((()=>[i(f(_))])),_:1}),a[20]||(a[20]=g(" 导出数据 "))])),_:1,__:[20]}),i(t,{type:"primary",onClick:he},{default:n((()=>[i(l,null,{default:n((()=>[i(f(b))])),_:1}),a[21]||(a[21]=g(" 添加区县 "))])),_:1,__:[21]})])]),d("div",T,[i(ze,{gutter:20},{default:n((()=>[i(xe,{span:6},{default:n((()=>[i(o,{class:"overview-card"},{default:n((()=>[d("div",G,[d("div",j,[i(l,null,{default:n((()=>[i(f(h))])),_:1})]),d("div",q,[a[23]||(a[23]=d("div",{class:"card-title"},"区县总数",-1)),d("div",I,y(se.total),1)])])])),_:1})])),_:1}),i(xe,{span:6},{default:n((()=>[i(o,{class:"overview-card"},{default:n((()=>[d("div",O,[d("div",F,[i(l,null,{default:n((()=>[i(f(V))])),_:1})]),d("div",L,[a[24]||(a[24]=d("div",{class:"card-title"},"总人口",-1)),d("div",B,y(be(se.totalPopulation)),1)])])])),_:1})])),_:1}),i(xe,{span:6},{default:n((()=>[i(o,{class:"overview-card"},{default:n((()=>{return[d("div",K,[d("div",$,[i(l,null,{default:n((()=>[i(f(w))])),_:1})]),d("div",E,[a[25]||(a[25]=d("div",{class:"card-title"},"GDP总量",-1)),d("div",J,y((e=se.totalGDP,(e/1e4).toFixed(1)+"万亿")),1)])])];var e})),_:1})])),_:1}),i(xe,{span:6},{default:n((()=>[i(o,{class:"overview-card"},{default:n((()=>[d("div",M,[d("div",R,[i(l,null,{default:n((()=>[i(f(C))])),_:1})]),d("div",W,[a[26]||(a[26]=d("div",{class:"card-title"},"企业数量",-1)),d("div",A,y(be(se.totalCompanies)),1)])])])),_:1})])),_:1})])),_:1})]),d("div",H,[i(ze,{gutter:20},{default:n((()=>[i(xe,{span:6},{default:n((()=>[i(Se,{modelValue:ue.name,"onUpdate:modelValue":a[0]||(a[0]=e=>ue.name=e),placeholder:"区县名称",clearable:"",onClear:we,onKeyup:D(we,["enter"])},{prefix:n((()=>[i(l,null,{default:n((()=>[i(f(U))])),_:1})])),_:1},8,["modelValue"])])),_:1}),i(xe,{span:6},{default:n((()=>[i(Ge,{modelValue:ue.level,"onUpdate:modelValue":a[1]||(a[1]=e=>ue.level=e),placeholder:"行政级别",clearable:"",onChange:we},{default:n((()=>[i(Te,{label:"市辖区",value:"district"}),i(Te,{label:"县级市",value:"county"}),i(Te,{label:"县",value:"county-level"}),i(Te,{label:"自治县",value:"autonomous"})])),_:1},8,["modelValue"])])),_:1}),i(xe,{span:6},{default:n((()=>[i(Ge,{modelValue:ue.region,"onUpdate:modelValue":a[2]||(a[2]=e=>ue.region=e),placeholder:"所属区域",clearable:"",onChange:we},{default:n((()=>[i(Te,{label:"城区",value:"urban"}),i(Te,{label:"郊区",value:"suburban"}),i(Te,{label:"农村",value:"rural"})])),_:1},8,["modelValue"])])),_:1}),i(xe,{span:6},{default:n((()=>[i(t,{type:"primary",onClick:we},{default:n((()=>[i(l,null,{default:n((()=>[i(f(U))])),_:1}),a[27]||(a[27]=g(" 搜索 "))])),_:1,__:[27]}),i(t,{onClick:Ce},{default:n((()=>a[28]||(a[28]=[g("重置")]))),_:1,__:[28]})])),_:1})])),_:1})]),d("div",N,[s((v(),r(Ie,{data:re.value,stripe:""},{default:n((()=>[i(je,{prop:"id",label:"ID",width:"80"}),i(je,{prop:"name",label:"区县名称"}),i(je,{prop:"level",label:"行政级别",width:"120"},{default:n((e=>[i(qe,{type:me(e.row.level)},{default:n((()=>[g(y(ce(e.row.level)),1)])),_:2},1032,["type"])])),_:1}),i(je,{prop:"region",label:"所属区域",width:"100"},{default:n((e=>[i(qe,{type:fe(e.row.region)},{default:n((()=>[g(y(ve(e.row.region)),1)])),_:2},1032,["type"])])),_:1}),i(je,{prop:"population",label:"人口(万)",width:"100"}),i(je,{prop:"area",label:"面积(km²)",width:"120"}),i(je,{prop:"gdp",label:"GDP(亿元)",width:"120"}),i(je,{prop:"companies",label:"企业数量",width:"100"}),i(je,{prop:"status",label:"状态",width:"100"},{default:n((e=>[i(qe,{type:ge(e.row.status)},{default:n((()=>[g(y(_e(e.row.status)),1)])),_:2},1032,["type"])])),_:1}),i(je,{label:"操作",width:"200",fixed:"right"},{default:n((e=>[i(t,{size:"small",onClick:a=>{return l=e.row,oe.value=l,void(le.value=!0);var l}},{default:n((()=>a[29]||(a[29]=[g("查看")]))),_:2,__:[29]},1032,["onClick"]),i(t,{size:"small",type:"primary",onClick:a=>{return l=e.row,Object.assign(ie,l),void(ae.value=!0);var l}},{default:n((()=>a[30]||(a[30]=[g("编辑")]))),_:2,__:[30]},1032,["onClick"]),i(t,{size:"small",type:"danger",onClick:a=>(async e=>{try{await P.confirm(`确定要删除区县"${e.name}"吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const a=re.value.findIndex((a=>a.id===e.id));a>-1&&(re.value.splice(a,1),Pe(),p.success("删除成功"))}catch(a){}})(e.row)},{default:n((()=>a[31]||(a[31]=[g("删除")]))),_:2,__:[31]},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[Me,Z.value]]),d("div",Q,[i(Oe,{"current-page":de.currentPage,"onUpdate:currentPage":a[3]||(a[3]=e=>de.currentPage=e),"page-size":de.pageSize,"onUpdate:pageSize":a[4]||(a[4]=e=>de.pageSize=e),"page-sizes":[10,20,50,100],total:de.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:De,onCurrentChange:Ue},null,8,["current-page","page-size","total"])])]),i($e,{modelValue:ae.value,"onUpdate:modelValue":a[18]||(a[18]=e=>ae.value=e),title:pe.value,width:"700px",onClose:Ve},{footer:n((()=>[d("div",X,[i(t,{onClick:a[17]||(a[17]=e=>ae.value=!1)},{default:n((()=>a[32]||(a[32]=[g("取消")]))),_:1,__:[32]}),i(t,{type:"primary",onClick:ye,loading:ee.value},{default:n((()=>a[33]||(a[33]=[g("确定")]))),_:1,__:[33]},8,["loading"])])])),default:n((()=>[i(Ke,{model:ie,rules:ne,ref_key:"districtFormRef",ref:te,"label-width":"120px"},{default:n((()=>[i(ze,{gutter:20},{default:n((()=>[i(xe,{span:12},{default:n((()=>[i(Fe,{label:"区县名称",prop:"name"},{default:n((()=>[i(Se,{modelValue:ie.name,"onUpdate:modelValue":a[5]||(a[5]=e=>ie.name=e),placeholder:"请输入区县名称"},null,8,["modelValue"])])),_:1})])),_:1}),i(xe,{span:12},{default:n((()=>[i(Fe,{label:"行政级别",prop:"level"},{default:n((()=>[i(Ge,{modelValue:ie.level,"onUpdate:modelValue":a[6]||(a[6]=e=>ie.level=e),placeholder:"请选择行政级别",style:{width:"100%"}},{default:n((()=>[i(Te,{label:"市辖区",value:"district"}),i(Te,{label:"县级市",value:"county"}),i(Te,{label:"县",value:"county-level"}),i(Te,{label:"自治县",value:"autonomous"})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),i(ze,{gutter:20},{default:n((()=>[i(xe,{span:12},{default:n((()=>[i(Fe,{label:"所属区域",prop:"region"},{default:n((()=>[i(Ge,{modelValue:ie.region,"onUpdate:modelValue":a[7]||(a[7]=e=>ie.region=e),placeholder:"请选择所属区域",style:{width:"100%"}},{default:n((()=>[i(Te,{label:"城区",value:"urban"}),i(Te,{label:"郊区",value:"suburban"}),i(Te,{label:"农村",value:"rural"})])),_:1},8,["modelValue"])])),_:1})])),_:1}),i(xe,{span:12},{default:n((()=>[i(Fe,{label:"邮政编码",prop:"postcode"},{default:n((()=>[i(Se,{modelValue:ie.postcode,"onUpdate:modelValue":a[8]||(a[8]=e=>ie.postcode=e),placeholder:"请输入邮政编码"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),i(ze,{gutter:20},{default:n((()=>[i(xe,{span:12},{default:n((()=>[i(Fe,{label:"人口(万)",prop:"population"},{default:n((()=>[i(Le,{modelValue:ie.population,"onUpdate:modelValue":a[9]||(a[9]=e=>ie.population=e),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1}),i(xe,{span:12},{default:n((()=>[i(Fe,{label:"面积(km²)",prop:"area"},{default:n((()=>[i(Le,{modelValue:ie.area,"onUpdate:modelValue":a[10]||(a[10]=e=>ie.area=e),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),i(ze,{gutter:20},{default:n((()=>[i(xe,{span:12},{default:n((()=>[i(Fe,{label:"GDP(亿元)",prop:"gdp"},{default:n((()=>[i(Le,{modelValue:ie.gdp,"onUpdate:modelValue":a[11]||(a[11]=e=>ie.gdp=e),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1}),i(xe,{span:12},{default:n((()=>[i(Fe,{label:"企业数量",prop:"companies"},{default:n((()=>[i(Le,{modelValue:ie.companies,"onUpdate:modelValue":a[12]||(a[12]=e=>ie.companies=e),min:0,style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),i(ze,{gutter:20},{default:n((()=>[i(xe,{span:12},{default:n((()=>[i(Fe,{label:"区县状态",prop:"status"},{default:n((()=>[i(Ge,{modelValue:ie.status,"onUpdate:modelValue":a[13]||(a[13]=e=>ie.status=e),placeholder:"请选择区县状态",style:{width:"100%"}},{default:n((()=>[i(Te,{label:"正常",value:"normal"}),i(Te,{label:"发展中",value:"developing"}),i(Te,{label:"待开发",value:"pending"})])),_:1},8,["modelValue"])])),_:1})])),_:1}),i(xe,{span:12},{default:n((()=>[i(Fe,{label:"成立时间",prop:"establishDate"},{default:n((()=>[i(Be,{modelValue:ie.establishDate,"onUpdate:modelValue":a[14]||(a[14]=e=>ie.establishDate=e),type:"date",placeholder:"选择成立时间",style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),i(Fe,{label:"地理位置",prop:"location"},{default:n((()=>[i(Se,{modelValue:ie.location,"onUpdate:modelValue":a[15]||(a[15]=e=>ie.location=e),placeholder:"请输入地理位置描述"},null,8,["modelValue"])])),_:1}),i(Fe,{label:"区县描述",prop:"description"},{default:n((()=>[i(Se,{modelValue:ie.description,"onUpdate:modelValue":a[16]||(a[16]=e=>ie.description=e),type:"textarea",rows:3,placeholder:"请输入区县描述"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"]),i($e,{modelValue:le.value,"onUpdate:modelValue":a[19]||(a[19]=e=>le.value=e),title:"区县详情",width:"800px"},{default:n((()=>[oe.value?(v(),u("div",Y,[i(Je,{column:2,border:""},{default:n((()=>[i(Ee,{label:"区县名称"},{default:n((()=>[g(y(oe.value.name),1)])),_:1}),i(Ee,{label:"行政级别"},{default:n((()=>[i(qe,{type:me(oe.value.level)},{default:n((()=>[g(y(ce(oe.value.level)),1)])),_:1},8,["type"])])),_:1}),i(Ee,{label:"所属区域"},{default:n((()=>[i(qe,{type:fe(oe.value.region)},{default:n((()=>[g(y(ve(oe.value.region)),1)])),_:1},8,["type"])])),_:1}),i(Ee,{label:"邮政编码"},{default:n((()=>[g(y(oe.value.postcode),1)])),_:1}),i(Ee,{label:"人口"},{default:n((()=>[g(y(oe.value.population)+"万人",1)])),_:1}),i(Ee,{label:"面积"},{default:n((()=>[g(y(oe.value.area)+" km²",1)])),_:1}),i(Ee,{label:"GDP"},{default:n((()=>[g(y(oe.value.gdp)+"亿元",1)])),_:1}),i(Ee,{label:"企业数量"},{default:n((()=>[g(y(oe.value.companies)+"家",1)])),_:1}),i(Ee,{label:"区县状态"},{default:n((()=>[i(qe,{type:ge(oe.value.status)},{default:n((()=>[g(y(_e(oe.value.status)),1)])),_:1},8,["type"])])),_:1}),i(Ee,{label:"成立时间"},{default:n((()=>[g(y(oe.value.establishDate),1)])),_:1}),i(Ee,{label:"地理位置",span:2},{default:n((()=>[g(y(oe.value.location),1)])),_:1}),i(Ee,{label:"区县描述",span:2},{default:n((()=>[g(y(oe.value.description||"暂无描述"),1)])),_:1})])),_:1})])):k("",!0)])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-b9520e4d"]]);export{Z as default};
