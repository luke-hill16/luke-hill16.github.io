import{ref as e,computed as l,onMounted as a,resolveComponent as t,openBlock as s,createElementBlock as u,createVNode as i,withCtx as o,createElementVNode as d,createTextVNode as r,unref as n,toDisplayString as c,withKeys as v,createBlock as p,createCommentVNode as m,Fragment as _,renderList as f,normalizeClass as y}from"vue";import{ElMessage as h,ElMessageBox as g}from"element-plus";import{k as w,G as b,H as k,F as V,I as C}from"./index-BOpLbFaH.js";/* empty css                                                                    */import{_ as x}from"./_plugin-vue_export-helper-BCo6x5W8.js";const U={class:"smart-agriculture-container"},z={class:"header"},T={class:"header-actions"},Y={class:"overview-content"},B={class:"overview-icon temperature"},M={class:"overview-info"},R={class:"overview-value"},A={class:"overview-content"},D={class:"overview-icon humidity"},F={class:"overview-info"},j={class:"overview-value"},q={class:"overview-content"},L={class:"overview-icon soil"},P={class:"overview-info"},$={class:"overview-value"},H={class:"overview-content"},I={class:"overview-icon light"},E={class:"overview-info"},G={class:"overview-value"},K={class:"search-section"},J=["onClick"],N={style:{"margin-left":"5px"}},O={key:0,class:"device-detail"},Q={class:"card-header"},S={class:"device-image-section"},W={class:"device-image-container"},X={class:"image-error"},Z={class:"image-overlay"},ee={class:"detail-item"},le={class:"detail-item"},ae={class:"detail-item"},te={class:"detail-item"},se={class:"detail-item"},ue={class:"detail-item"},ie={class:"detail-item"},oe={class:"content-text"},de={class:"data-item"},re={class:"data-label"},ne={class:"data-value"},ce={class:"card-header"},ve={class:"form-image-upload"},pe={key:1,class:"form-image-placeholder"},me={class:"dialog-footer"},_e={key:0,class:"control-panel"},fe={class:"control-item"},ye={key:0,class:"control-item"},he={class:"control-item"},ge={class:"control-item"},we={class:"dialog-footer"},be={class:"analytics-content"},ke={class:"stat-number"},Ve={class:"stat-number"},Ce={class:"stat-number"},xe={class:"stat-number"},Ue={class:"alerts-content"},ze={class:"alerts-header"},Te=x({__name:"agriculture",setup(x){const Te=e([]),Ye=e(!1),Be=e(null),Me=e(!1),Re=e("添加设备"),Ae=e(null),De=e(!1);e(null);const Fe=e(!1),je=e(!1),qe=e("temperature"),Le=e([]),Pe=e([]),$e=e({keyword:"",status:"",type:"",dateRange:[]}),He=[{id:"dev001",name:"温湿度传感器-01",type:"sensor",location:"大棚A区",status:"online",battery:85,lastUpdate:"2024-01-15 14:30:00",description:"监测大棚内温湿度变化，支持远程数据采集。",image:"https://picsum.photos/400/300?random=1"},{id:"dev002",name:"土壤传感器-01",type:"sensor",location:"大棚B区",status:"online",battery:92,lastUpdate:"2024-01-15 14:28:00",description:"监测土壤湿度和pH值，为灌溉提供数据支持。",image:"https://picsum.photos/400/300?random=2"},{id:"dev003",name:"智能灌溉控制器",type:"controller",location:"大棚A区",status:"online",battery:78,lastUpdate:"2024-01-15 14:25:00",description:"根据土壤湿度自动控制灌溉系统。",image:"https://picsum.photos/400/300?random=3"},{id:"dev004",name:"监控摄像头-01",type:"camera",location:"大棚C区",status:"offline",battery:45,lastUpdate:"2024-01-15 13:15:00",description:"24小时监控作物生长状况。",image:"https://picsum.photos/400/300?random=4"},{id:"dev005",name:"自动喷灌设备",type:"irrigation",location:"大棚B区",status:"maintenance",battery:60,lastUpdate:"2024-01-15 12:00:00",description:"自动喷灌系统，支持定时和条件触发。",image:"https://picsum.photos/400/300?random=5"}],Ie=e({name:"",type:"",location:"",description:"",image:"",parameters:{interval:30,threshold:80}}),Ee=e({power:!0,irrigation:!1,interval:30,threshold:80}),Ge={name:[{required:!0,message:"请输入设备名称",trigger:"blur"}],type:[{required:!0,message:"请选择设备类型",trigger:"change"}],location:[{required:!0,message:"请输入设备位置",trigger:"blur"}]},Ke=l((()=>25.6)),Je=l((()=>68.2)),Ne=l((()=>72.5)),Oe=l((()=>45e3)),Qe=l((()=>Te.value.length)),Se=l((()=>Te.value.filter((e=>"online"===e.status)).length)),We=l((()=>Te.value.filter((e=>"error"===e.status)).length)),Xe=l((()=>12580)),Ze=async()=>{try{await new Promise((e=>setTimeout(e,500))),Te.value=He,h.success("设备列表加载成功")}catch(e){h.error("获取设备列表失败")}},el=()=>{Ze()},ll=()=>{Re.value="添加设备",Ie.value={name:"",type:"",location:"",description:"",image:"",parameters:{interval:30,threshold:80}},Me.value=!0},al=async()=>{try{await Ae.value.validate(),await new Promise((e=>setTimeout(e,1e3))),h.success("添加设备"===Re.value?"设备添加成功":"设备信息更新成功"),Me.value=!1,Ze()}catch(e){h.error("表单验证失败")}},tl=e=>{Be.value=e,Ye.value=!0,rl(e.id)},sl=async()=>{try{await new Promise((e=>setTimeout(e,1e3))),h.success("控制指令发送成功"),De.value=!1,Ze()}catch(e){h.error("控制指令发送失败")}},ul=()=>{Fe.value=!0},il=()=>{je.value=!0,nl()},ol=()=>{let e=[...He];if($e.value.keyword){const l=$e.value.keyword.toLowerCase();e=e.filter((e=>e.name.toLowerCase().includes(l)||e.location.toLowerCase().includes(l)))}$e.value.status&&(e=e.filter((e=>e.status===$e.value.status))),$e.value.type&&(e=e.filter((e=>e.type===$e.value.type))),Te.value=e,0===e.length?h.info("没有找到匹配的设备"):h.success(`找到 ${e.length} 台设备`)},dl=()=>{$e.value={keyword:"",status:"",type:"",dateRange:[]},Te.value=[...He],h.success("搜索条件已重置")},rl=e=>{Le.value=[{label:"温度",value:"25.6",unit:"°C",status:"normal",statusText:"正常"},{label:"湿度",value:"68.2",unit:"%",status:"normal",statusText:"正常"},{label:"土壤湿度",value:"72.5",unit:"%",status:"normal",statusText:"正常"},{label:"光照强度",value:"45000",unit:" lux",status:"normal",statusText:"正常"}]},nl=()=>{Pe.value=[{id:"alert001",device:"温湿度传感器-01",type:"temperature",message:"温度超过阈值：28.5°C",time:"2024-01-15 14:25:00",status:"active"},{id:"alert002",device:"监控摄像头-01",type:"device",message:"设备离线超过30分钟",time:"2024-01-15 13:15:00",status:"active"},{id:"alert003",device:"土壤传感器-01",type:"soil",message:"土壤湿度低于阈值：45%",time:"2024-01-15 12:30:00",status:"handled"}]},cl=()=>{h.info("添加告警规则功能开发中")},vl=()=>{Pe.value=[],h.success("所有告警已清空")},pl=e=>{},ml=e=>{},_l=()=>{Ye.value=!1,Be.value=null,Le.value=[]},fl=()=>{var e;Me.value=!1,null==(e=Ae.value)||e.resetFields()},yl=()=>{De.value=!1},hl=()=>{Fe.value=!1},gl=()=>{je.value=!1},wl=e=>{const l={sensor:"https://picsum.photos/400/300?random=10",controller:"https://picsum.photos/400/300?random=11",camera:"https://picsum.photos/400/300?random=12",irrigation:"https://picsum.photos/400/300?random=13"};return l[e]||l.sensor},bl=()=>{h.info("图片上传功能开发中，当前使用默认图片")},kl=()=>{const e=["https://picsum.photos/400/300?random=20","https://picsum.photos/400/300?random=21","https://picsum.photos/400/300?random=22"];g.confirm("选择图片方式","选择图片",{confirmButtonText:"使用示例图片",cancelButtonText:"取消",type:"info"}).then((()=>{Ie.value.image=e[Math.floor(Math.random()*e.length)],h.success("图片已选择")})).catch((()=>{h.info("已取消选择")}))};return a(Ze),(e,l)=>{const a=t("el-button"),x=t("el-icon"),He=t("el-card"),Ze=t("el-col"),rl=t("el-row"),nl=t("el-input"),Vl=t("el-option"),Cl=t("el-select"),xl=t("el-date-picker"),Ul=t("el-table-column"),zl=t("el-tag"),Tl=t("el-progress"),Yl=t("el-table"),Bl=t("el-image"),Ml=t("el-dialog"),Rl=t("el-form-item"),Al=t("el-form"),Dl=t("el-switch"),Fl=t("el-input-number");return s(),u("div",U,[i(He,null,{default:o((()=>[d("div",z,[l[27]||(l[27]=d("span",null,"智慧农业管理",-1)),d("div",T,[i(a,{type:"primary",onClick:ll,size:"small"},{default:o((()=>l[23]||(l[23]=[r("添加设备")]))),_:1,__:[23]}),i(a,{type:"success",onClick:el,size:"small"},{default:o((()=>l[24]||(l[24]=[r("刷新数据")]))),_:1,__:[24]}),i(a,{type:"info",onClick:ul,size:"small"},{default:o((()=>l[25]||(l[25]=[r("数据分析")]))),_:1,__:[25]}),i(a,{type:"warning",onClick:il,size:"small"},{default:o((()=>l[26]||(l[26]=[r("告警管理")]))),_:1,__:[26]})])]),i(rl,{gutter:20,style:{"margin-bottom":"20px"}},{default:o((()=>[i(Ze,{span:6},{default:o((()=>[i(He,{class:"overview-card"},{default:o((()=>[d("div",Y,[d("div",B,[i(x,null,{default:o((()=>[i(n(w))])),_:1})]),d("div",M,[d("div",R,c(Ke.value)+"°C",1),l[28]||(l[28]=d("div",{class:"overview-label"},"平均温度",-1))])])])),_:1})])),_:1}),i(Ze,{span:6},{default:o((()=>[i(He,{class:"overview-card"},{default:o((()=>[d("div",A,[d("div",D,[i(x,null,{default:o((()=>[i(n(b))])),_:1})]),d("div",F,[d("div",j,c(Je.value)+"%",1),l[29]||(l[29]=d("div",{class:"overview-label"},"平均湿度",-1))])])])),_:1})])),_:1}),i(Ze,{span:6},{default:o((()=>[i(He,{class:"overview-card"},{default:o((()=>[d("div",q,[d("div",L,[i(x,null,{default:o((()=>[i(n(b))])),_:1})]),d("div",P,[d("div",$,c(Ne.value)+"%",1),l[30]||(l[30]=d("div",{class:"overview-label"},"土壤湿度",-1))])])])),_:1})])),_:1}),i(Ze,{span:6},{default:o((()=>[i(He,{class:"overview-card"},{default:o((()=>[d("div",H,[d("div",I,[i(x,null,{default:o((()=>[i(n(k))])),_:1})]),d("div",E,[d("div",G,c(Oe.value)+" lux",1),l[31]||(l[31]=d("div",{class:"overview-label"},"光照强度",-1))])])])),_:1})])),_:1})])),_:1}),d("div",K,[i(rl,{gutter:20},{default:o((()=>[i(Ze,{span:6},{default:o((()=>[i(nl,{modelValue:$e.value.keyword,"onUpdate:modelValue":l[0]||(l[0]=e=>$e.value.keyword=e),placeholder:"搜索设备名称或位置",clearable:"",onKeyup:v(ol,["enter"])},{prefix:o((()=>[i(x,null,{default:o((()=>[i(n(V))])),_:1})])),_:1},8,["modelValue"])])),_:1}),i(Ze,{span:4},{default:o((()=>[i(Cl,{modelValue:$e.value.status,"onUpdate:modelValue":l[1]||(l[1]=e=>$e.value.status=e),placeholder:"设备状态",clearable:""},{default:o((()=>[i(Vl,{label:"在线",value:"online"}),i(Vl,{label:"离线",value:"offline"}),i(Vl,{label:"故障",value:"error"}),i(Vl,{label:"维护中",value:"maintenance"})])),_:1},8,["modelValue"])])),_:1}),i(Ze,{span:4},{default:o((()=>[i(Cl,{modelValue:$e.value.type,"onUpdate:modelValue":l[2]||(l[2]=e=>$e.value.type=e),placeholder:"设备类型",clearable:""},{default:o((()=>[i(Vl,{label:"传感器",value:"sensor"}),i(Vl,{label:"控制器",value:"controller"}),i(Vl,{label:"摄像头",value:"camera"}),i(Vl,{label:"灌溉设备",value:"irrigation"})])),_:1},8,["modelValue"])])),_:1}),i(Ze,{span:6},{default:o((()=>[i(xl,{modelValue:$e.value.dateRange,"onUpdate:modelValue":l[3]||(l[3]=e=>$e.value.dateRange=e),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1}),i(Ze,{span:4},{default:o((()=>[i(a,{type:"primary",onClick:ol},{default:o((()=>l[32]||(l[32]=[r("搜索")]))),_:1,__:[32]}),i(a,{onClick:dl},{default:o((()=>l[33]||(l[33]=[r("重置")]))),_:1,__:[33]})])),_:1})])),_:1})]),i(Yl,{data:Te.value,style:{width:"100%","margin-top":"20px"},fit:"true"},{default:o((()=>[i(Ul,{prop:"name",label:"设备名称","min-width":"150"},{default:o((e=>[d("span",{class:"clickable-title",onClick:l=>tl(e.row)},c(e.row.name),9,J)])),_:1}),i(Ul,{prop:"type",label:"设备类型","min-width":"120"},{default:o((e=>["sensor"===e.row.type?(s(),p(zl,{key:0,type:"primary"},{default:o((()=>l[34]||(l[34]=[r("传感器")]))),_:1,__:[34]})):"controller"===e.row.type?(s(),p(zl,{key:1,type:"success"},{default:o((()=>l[35]||(l[35]=[r("控制器")]))),_:1,__:[35]})):"camera"===e.row.type?(s(),p(zl,{key:2,type:"warning"},{default:o((()=>l[36]||(l[36]=[r("摄像头")]))),_:1,__:[36]})):"irrigation"===e.row.type?(s(),p(zl,{key:3,type:"info"},{default:o((()=>l[37]||(l[37]=[r("灌溉设备")]))),_:1,__:[37]})):m("",!0)])),_:1}),i(Ul,{prop:"location",label:"位置","min-width":"120"}),i(Ul,{prop:"status",label:"状态","min-width":"100"},{default:o((e=>["online"===e.row.status?(s(),p(zl,{key:0,type:"success"},{default:o((()=>l[38]||(l[38]=[r("在线")]))),_:1,__:[38]})):"offline"===e.row.status?(s(),p(zl,{key:1,type:"danger"},{default:o((()=>l[39]||(l[39]=[r("离线")]))),_:1,__:[39]})):"error"===e.row.status?(s(),p(zl,{key:2,type:"danger"},{default:o((()=>l[40]||(l[40]=[r("故障")]))),_:1,__:[40]})):"maintenance"===e.row.status?(s(),p(zl,{key:3,type:"warning"},{default:o((()=>l[41]||(l[41]=[r("维护中")]))),_:1,__:[41]})):m("",!0)])),_:1}),i(Ul,{prop:"lastUpdate",label:"最后更新","min-width":"150"}),i(Ul,{prop:"battery",label:"电量","min-width":"100"},{default:o((e=>{return[i(Tl,{percentage:e.row.battery,color:(l=e.row.battery,l>80?"#67C23A":l>50?"#E6A23C":"#F56C6C"),"show-text":!1},null,8,["percentage","color"]),d("span",N,c(e.row.battery)+"%",1)];var l})),_:1}),i(Ul,{label:"操作","min-width":"200",fixed:"right"},{default:o((e=>[i(a,{size:"small",type:"primary",onClick:l=>tl(e.row)},{default:o((()=>l[42]||(l[42]=[r("查看")]))),_:2,__:[42]},1032,["onClick"]),i(a,{size:"small",type:"success",onClick:l=>{return a=e.row,Be.value=a,Ee.value={power:"online"===a.status,irrigation:!1,interval:30,threshold:80},void(De.value=!0);var a}},{default:o((()=>l[43]||(l[43]=[r("控制")]))),_:2,__:[43]},1032,["onClick"]),i(a,{size:"small",type:"warning",onClick:l=>{return a=e.row,void h.info(`设备 ${a.name} 已进入维护模式`);var a}},{default:o((()=>l[44]||(l[44]=[r("维护")]))),_:2,__:[44]},1032,["onClick"]),i(a,{size:"small",type:"danger",onClick:l=>(async e=>{try{await g.confirm(`确定要删除设备"${e.name}"吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),Te.value=Te.value.filter((l=>l.id!==e.id)),h.success("删除成功")}catch{h.info("已取消删除")}})(e.row)},{default:o((()=>l[45]||(l[45]=[r("删除")]))),_:2,__:[45]},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),i(Ml,{modelValue:Ye.value,"onUpdate:modelValue":l[6]||(l[6]=e=>Ye.value=e),title:"设备详情",width:"900px","before-close":_l},{default:o((()=>[Be.value?(s(),u("div",O,[i(He,{class:"info-card",shadow:"never"},{header:o((()=>[d("div",Q,[l[47]||(l[47]=d("span",null,"设备信息",-1)),i(a,{type:"primary",size:"small",onClick:l[4]||(l[4]=e=>{return l=Be.value,Re.value="编辑设备",Ie.value={...l},void(Me.value=!0);var l})},{default:o((()=>l[46]||(l[46]=[r("编辑")]))),_:1,__:[46]})])])),default:o((()=>[d("div",S,[d("div",W,[i(Bl,{src:Be.value.image||wl(Be.value.type),fit:"cover",class:"device-image","preview-src-list":[Be.value.image||wl(Be.value.type)],"preview-teleported":""},{error:o((()=>[d("div",X,[i(x,null,{default:o((()=>[i(n(C))])),_:1}),l[48]||(l[48]=d("span",null,"图片加载失败",-1))])])),_:1},8,["src","preview-src-list"]),d("div",Z,[i(a,{type:"primary",size:"small",onClick:bl},{default:o((()=>l[49]||(l[49]=[r("更换图片")]))),_:1,__:[49]})])])]),i(rl,{gutter:20},{default:o((()=>[i(Ze,{span:12},{default:o((()=>[d("div",ee,[l[50]||(l[50]=d("label",null,"设备名称：",-1)),d("span",null,c(Be.value.name),1)])])),_:1}),i(Ze,{span:12},{default:o((()=>[d("div",le,[l[55]||(l[55]=d("label",null,"设备类型：",-1)),"sensor"===Be.value.type?(s(),p(zl,{key:0,type:"primary"},{default:o((()=>l[51]||(l[51]=[r("传感器")]))),_:1,__:[51]})):"controller"===Be.value.type?(s(),p(zl,{key:1,type:"success"},{default:o((()=>l[52]||(l[52]=[r("控制器")]))),_:1,__:[52]})):"camera"===Be.value.type?(s(),p(zl,{key:2,type:"warning"},{default:o((()=>l[53]||(l[53]=[r("摄像头")]))),_:1,__:[53]})):"irrigation"===Be.value.type?(s(),p(zl,{key:3,type:"info"},{default:o((()=>l[54]||(l[54]=[r("灌溉设备")]))),_:1,__:[54]})):m("",!0)])])),_:1})])),_:1}),i(rl,{gutter:20},{default:o((()=>[i(Ze,{span:12},{default:o((()=>[d("div",ae,[l[56]||(l[56]=d("label",null,"设备位置：",-1)),d("span",null,c(Be.value.location),1)])])),_:1}),i(Ze,{span:12},{default:o((()=>[d("div",te,[l[61]||(l[61]=d("label",null,"设备状态：",-1)),"online"===Be.value.status?(s(),p(zl,{key:0,type:"success"},{default:o((()=>l[57]||(l[57]=[r("在线")]))),_:1,__:[57]})):"offline"===Be.value.status?(s(),p(zl,{key:1,type:"danger"},{default:o((()=>l[58]||(l[58]=[r("离线")]))),_:1,__:[58]})):"error"===Be.value.status?(s(),p(zl,{key:2,type:"danger"},{default:o((()=>l[59]||(l[59]=[r("故障")]))),_:1,__:[59]})):"maintenance"===Be.value.status?(s(),p(zl,{key:3,type:"warning"},{default:o((()=>l[60]||(l[60]=[r("维护中")]))),_:1,__:[60]})):m("",!0)])])),_:1})])),_:1}),i(rl,{gutter:20},{default:o((()=>[i(Ze,{span:12},{default:o((()=>[d("div",se,[l[62]||(l[62]=d("label",null,"设备电量：",-1)),d("span",null,c(Be.value.battery)+"%",1)])])),_:1}),i(Ze,{span:12},{default:o((()=>[d("div",ue,[l[63]||(l[63]=d("label",null,"最后更新：",-1)),d("span",null,c(Be.value.lastUpdate),1)])])),_:1})])),_:1}),i(rl,{gutter:20},{default:o((()=>[i(Ze,{span:24},{default:o((()=>[d("div",ie,[l[64]||(l[64]=d("label",null,"设备描述：",-1)),d("div",oe,c(Be.value.description),1)])])),_:1})])),_:1})])),_:1}),i(He,{class:"data-card",shadow:"never"},{header:o((()=>l[65]||(l[65]=[d("div",{class:"card-header"},[d("span",null,"实时数据")],-1)]))),default:o((()=>[i(rl,{gutter:20},{default:o((()=>[(s(!0),u(_,null,f(Le.value,((e,l)=>(s(),p(Ze,{span:6,key:l},{default:o((()=>[d("div",de,[d("div",re,c(e.label),1),d("div",ne,c(e.value)+c(e.unit),1),d("div",{class:y(["data-status",e.status])},c(e.statusText),3)])])),_:2},1024)))),128))])),_:1})])),_:1}),i(He,{class:"chart-card",shadow:"never"},{header:o((()=>[d("div",ce,[l[66]||(l[66]=d("span",null,"历史数据趋势",-1)),i(Cl,{modelValue:qe.value,"onUpdate:modelValue":l[5]||(l[5]=e=>qe.value=e),size:"small",style:{width:"120px"}},{default:o((()=>[i(Vl,{label:"温度",value:"temperature"}),i(Vl,{label:"湿度",value:"humidity"}),i(Vl,{label:"土壤湿度",value:"soil"}),i(Vl,{label:"光照",value:"light"})])),_:1},8,["modelValue"])])])),default:o((()=>[l[67]||(l[67]=d("div",{id:"historyChart",style:{height:"300px"}},null,-1))])),_:1,__:[67]})])):m("",!0)])),_:1},8,["modelValue"]),i(Ml,{modelValue:Me.value,"onUpdate:modelValue":l[14]||(l[14]=e=>Me.value=e),title:Re.value,width:"800px","before-close":fl},{footer:o((()=>[d("div",me,[i(a,{onClick:l[13]||(l[13]=e=>Me.value=!1)},{default:o((()=>l[70]||(l[70]=[r("取消")]))),_:1,__:[70]}),i(a,{type:"primary",onClick:al},{default:o((()=>l[71]||(l[71]=[r("提交")]))),_:1,__:[71]})])])),default:o((()=>[i(Al,{model:Ie.value,rules:Ge,ref_key:"deviceFormRef",ref:Ae,"label-width":"120px"},{default:o((()=>[i(Rl,{label:"设备名称",prop:"name"},{default:o((()=>[i(nl,{modelValue:Ie.value.name,"onUpdate:modelValue":l[7]||(l[7]=e=>Ie.value.name=e),placeholder:"请输入设备名称"},null,8,["modelValue"])])),_:1}),i(Rl,{label:"设备类型",prop:"type"},{default:o((()=>[i(Cl,{modelValue:Ie.value.type,"onUpdate:modelValue":l[8]||(l[8]=e=>Ie.value.type=e),placeholder:"请选择设备类型",style:{width:"100%"}},{default:o((()=>[i(Vl,{label:"传感器",value:"sensor"}),i(Vl,{label:"控制器",value:"controller"}),i(Vl,{label:"摄像头",value:"camera"}),i(Vl,{label:"灌溉设备",value:"irrigation"})])),_:1},8,["modelValue"])])),_:1}),i(Rl,{label:"设备位置",prop:"location"},{default:o((()=>[i(nl,{modelValue:Ie.value.location,"onUpdate:modelValue":l[9]||(l[9]=e=>Ie.value.location=e),placeholder:"请输入设备位置"},null,8,["modelValue"])])),_:1}),i(Rl,{label:"设备描述",prop:"description"},{default:o((()=>[i(nl,{modelValue:Ie.value.description,"onUpdate:modelValue":l[10]||(l[10]=e=>Ie.value.description=e),type:"textarea",rows:4,placeholder:"请输入设备描述"},null,8,["modelValue"])])),_:1}),i(Rl,{label:"设备图片"},{default:o((()=>[d("div",ve,[Ie.value.image?(s(),p(Bl,{key:0,src:Ie.value.image,fit:"cover",class:"form-device-image","preview-src-list":[Ie.value.image],"preview-teleported":""},null,8,["src","preview-src-list"])):(s(),u("div",pe,[i(x,null,{default:o((()=>[i(n(C))])),_:1}),l[68]||(l[68]=d("span",null,"暂无图片",-1))])),i(a,{type:"primary",onClick:kl,style:{"margin-top":"10px"}},{default:o((()=>l[69]||(l[69]=[r(" 选择图片 ")]))),_:1,__:[69]})])])),_:1}),i(Rl,{label:"设备参数"},{default:o((()=>[i(rl,{gutter:20},{default:o((()=>[i(Ze,{span:12},{default:o((()=>[i(nl,{modelValue:Ie.value.parameters.interval,"onUpdate:modelValue":l[11]||(l[11]=e=>Ie.value.parameters.interval=e),placeholder:"数据采集间隔(秒)"},null,8,["modelValue"])])),_:1}),i(Ze,{span:12},{default:o((()=>[i(nl,{modelValue:Ie.value.parameters.threshold,"onUpdate:modelValue":l[12]||(l[12]=e=>Ie.value.parameters.threshold=e),placeholder:"告警阈值"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"]),i(Ml,{modelValue:De.value,"onUpdate:modelValue":l[20]||(l[20]=e=>De.value=e),title:"设备控制",width:"600px","before-close":yl},{footer:o((()=>[d("div",we,[i(a,{onClick:l[19]||(l[19]=e=>De.value=!1)},{default:o((()=>l[78]||(l[78]=[r("取消")]))),_:1,__:[78]}),i(a,{type:"primary",onClick:sl},{default:o((()=>l[79]||(l[79]=[r("确认控制")]))),_:1,__:[79]})])])),default:o((()=>[Be.value?(s(),u("div",_e,[i(rl,{gutter:20},{default:o((()=>[i(Ze,{span:12},{default:o((()=>[i(He,null,{header:o((()=>l[72]||(l[72]=[r("开关控制")]))),default:o((()=>[d("div",fe,[l[73]||(l[73]=d("span",null,"设备开关",-1)),i(Dl,{modelValue:Ee.value.power,"onUpdate:modelValue":l[15]||(l[15]=e=>Ee.value.power=e),onChange:pl},null,8,["modelValue"])]),"irrigation"===Be.value.type?(s(),u("div",ye,[l[74]||(l[74]=d("span",null,"灌溉开关",-1)),i(Dl,{modelValue:Ee.value.irrigation,"onUpdate:modelValue":l[16]||(l[16]=e=>Ee.value.irrigation=e),onChange:ml},null,8,["modelValue"])])):m("",!0)])),_:1})])),_:1}),i(Ze,{span:12},{default:o((()=>[i(He,null,{header:o((()=>l[75]||(l[75]=[r("参数设置")]))),default:o((()=>[d("div",he,[l[76]||(l[76]=d("span",null,"采集间隔",-1)),i(Fl,{modelValue:Ee.value.interval,"onUpdate:modelValue":l[17]||(l[17]=e=>Ee.value.interval=e),min:1,max:3600,size:"small"},null,8,["modelValue"])]),d("div",ge,[l[77]||(l[77]=d("span",null,"告警阈值",-1)),i(Fl,{modelValue:Ee.value.threshold,"onUpdate:modelValue":l[18]||(l[18]=e=>Ee.value.threshold=e),min:0,max:100,size:"small"},null,8,["modelValue"])])])),_:1})])),_:1})])),_:1})])):m("",!0)])),_:1},8,["modelValue"]),i(Ml,{modelValue:Fe.value,"onUpdate:modelValue":l[21]||(l[21]=e=>Fe.value=e),title:"数据分析",width:"1200px","before-close":hl},{default:o((()=>[d("div",be,[i(rl,{gutter:20,style:{"margin-bottom":"30px"}},{default:o((()=>[i(Ze,{span:6},{default:o((()=>[i(He,{class:"stat-card"},{default:o((()=>[d("div",ke,c(Qe.value),1),l[80]||(l[80]=d("div",{class:"stat-label"},"设备总数",-1))])),_:1,__:[80]})])),_:1}),i(Ze,{span:6},{default:o((()=>[i(He,{class:"stat-card"},{default:o((()=>[d("div",Ve,c(Se.value),1),l[81]||(l[81]=d("div",{class:"stat-label"},"在线设备",-1))])),_:1,__:[81]})])),_:1}),i(Ze,{span:6},{default:o((()=>[i(He,{class:"stat-card"},{default:o((()=>[d("div",Ce,c(We.value),1),l[82]||(l[82]=d("div",{class:"stat-label"},"故障设备",-1))])),_:1,__:[82]})])),_:1}),i(Ze,{span:6},{default:o((()=>[i(He,{class:"stat-card"},{default:o((()=>[d("div",xe,c(Xe.value),1),l[83]||(l[83]=d("div",{class:"stat-label"},"数据点数",-1))])),_:1,__:[83]})])),_:1})])),_:1}),i(rl,{gutter:20},{default:o((()=>[i(Ze,{span:12},{default:o((()=>[i(He,null,{header:o((()=>l[84]||(l[84]=[r("设备状态分布")]))),default:o((()=>[l[85]||(l[85]=d("div",{id:"statusChart",style:{height:"300px"}},null,-1))])),_:1,__:[85]})])),_:1}),i(Ze,{span:12},{default:o((()=>[i(He,null,{header:o((()=>l[86]||(l[86]=[r("环境数据趋势")]))),default:o((()=>[l[87]||(l[87]=d("div",{id:"trendChart",style:{height:"300px"}},null,-1))])),_:1,__:[87]})])),_:1})])),_:1})])])),_:1},8,["modelValue"]),i(Ml,{modelValue:je.value,"onUpdate:modelValue":l[22]||(l[22]=e=>je.value=e),title:"告警管理",width:"1000px","before-close":gl},{default:o((()=>[d("div",Ue,[d("div",ze,[i(a,{type:"primary",onClick:cl},{default:o((()=>l[88]||(l[88]=[r("添加告警规则")]))),_:1,__:[88]}),i(a,{onClick:vl},{default:o((()=>l[89]||(l[89]=[r("清空所有告警")]))),_:1,__:[89]})]),i(Yl,{data:Pe.value,style:{width:"100%","margin-top":"20px"}},{default:o((()=>[i(Ul,{prop:"device",label:"设备","min-width":"120"}),i(Ul,{prop:"type",label:"告警类型","min-width":"120"},{default:o((e=>["temperature"===e.row.type?(s(),p(zl,{key:0,type:"danger"},{default:o((()=>l[90]||(l[90]=[r("温度异常")]))),_:1,__:[90]})):"humidity"===e.row.type?(s(),p(zl,{key:1,type:"warning"},{default:o((()=>l[91]||(l[91]=[r("湿度异常")]))),_:1,__:[91]})):"soil"===e.row.type?(s(),p(zl,{key:2,type:"info"},{default:o((()=>l[92]||(l[92]=[r("土壤异常")]))),_:1,__:[92]})):"device"===e.row.type?(s(),p(zl,{key:3,type:"danger"},{default:o((()=>l[93]||(l[93]=[r("设备故障")]))),_:1,__:[93]})):m("",!0)])),_:1}),i(Ul,{prop:"message",label:"告警信息","min-width":"200"}),i(Ul,{prop:"time",label:"告警时间","min-width":"150"}),i(Ul,{prop:"status",label:"状态","min-width":"100"},{default:o((e=>["active"===e.row.status?(s(),p(zl,{key:0,type:"danger"},{default:o((()=>l[94]||(l[94]=[r("未处理")]))),_:1,__:[94]})):(s(),p(zl,{key:1,type:"success"},{default:o((()=>l[95]||(l[95]=[r("已处理")]))),_:1,__:[95]}))])),_:1}),i(Ul,{label:"操作","min-width":"150"},{default:o((e=>[i(a,{size:"small",type:"success",onClick:l=>(e.row.status="handled",void h.success("告警已处理"))},{default:o((()=>l[96]||(l[96]=[r("处理")]))),_:2,__:[96]},1032,["onClick"]),i(a,{size:"small",type:"danger",onClick:l=>{return a=e.row,Pe.value=Pe.value.filter((e=>e.id!==a.id)),void h.success("告警已删除");var a}},{default:o((()=>l[97]||(l[97]=[r("删除")]))),_:2,__:[97]},1032,["onClick"])])),_:1})])),_:1},8,["data"])])])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-d51a2586"]]);export{Te as default};
